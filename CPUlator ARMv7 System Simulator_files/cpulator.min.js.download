var aa={Va:23,iterations:3,loaded:function(b){aa.Va&=~b;0==aa.Va&&(aa.ub(),clearInterval(aa.kb))}};aa.kb=setInterval(function(){if(!--aa.iterations){clearInterval(aa.kb);document.getElementById("loadfail").style.display="block";var b=encodeURIComponent("loadFailed")+"="+encodeURIComponent(navigator.userAgent),a=new XMLHttpRequest;a.open("POST","status.php");a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(b)}},2500);window.loader=aa;var J,ea;
(function(){function b(e,y){return("00000000000000000000000000000000"+(e>>>0).toString(2)).slice(-y)}function a(e){e.prototype=Object.create(d.prototype);e.prototype.constructor=e}function d(e,y,x,l){void 0===l&&(l=-1);x||console.log("Device "+e+" at "+K(y)+" has size 0");this.U={devtype:e,base:y>>>0,size:x>>>0,irq:l|0,idx:null,poll_ioctls:[],refresh_interval:300};this.M={za:!1,Na:null,Ra:null,ab:null};this.O=this.B=null;this.T=300}function c(e,y,x){function l(k){function z(A,B){B||($(r[1]).slider("value",A),
A=$(r[1]).slider("value"));r[2].innerHTML=A.toString(16);p.D(32+k,A)}var r=[],u=document.createElement("div");u.className="dev_lego_sens";var n=document.createElement("div");n.className="lego-sens-slider";$(n).slider({max:15,min:0,orientation:"vertical"});u.appendChild(n);r[0]=u;r[1]=n;var F=document.createElement("div");F.innerHTML="8";F.className="lego-sens-value";u.appendChild(F);r[2]=F;$(n).on("slide",function(A,B){z(B.value,!0)});$(u).on("wheel",function(A){var B=0,H=$(r[1]),N=A.originalEvent;
N.deltaY&&(B=-N.deltaY/(0==N.deltaMode?120:1==N.deltaMode?3:1));B=H.slider("value")+B;A.preventDefault();z(B);return!1});F=document.createElement("div");F.innerHTML="0";F.className="lego-sens-threshold";u.appendChild(F);r[3]=F;z(7);return r}d.call(this,"lego",e,16,x);var p=this,m,t=[];this.K=function(k,z){var r=t[k+5];k=r[1];r=r[2];0<z?(k.style.height=z/20971.52+"%",r.style.height="0"):(r.style.height=-z/20971.52+"%",k.style.height="0")};this.C=function(k,z){k=t[k+5];var r=k[4];k[3].className="lego-motor-up"+
(0==(z&3)?" lego-motor-on":"");r.className="lego-motor-down"+(2==(z&3)?" lego-motor-on":"")};this.ga=function(k,z){t[k][3].innerHTML=z.toString(16)};this.O=function(){var k=this.F("Lego Controller",e,{items:[{type:"section",text:"Documentation"},{type:"link",text:"Documentation",href:"http://www-ug.eecg.utoronto.ca/desl/nios_devices_SoC/dev_newlegocontroller2.html"}],fa:"<p>The basic functionality of the Lego Controller is simulated here, allowing you to interact with the Controller from your program, manually specify sensor readings, and observe motor on/off/PWM state.</p><p><b>Registers:</b> Shows current state of the four GPIO registers as a 32-bit word. Hover for a binary representation.</p><p><b>Sensors:</b> <ul><li>Use the slider to set the current sensor value, equivalent to moving the sensor around</li><li>The large number shows the current sensor value</li><li>The small number shows the current sensor threshold, which is used with state mode</li></ul></p><p><b>Motors:</b> <ul><li>Up and down triangles show current motor state (forward, backward, or off)</li><li>The light green background shows a time-smoothed version of the motor state. This is useful for debugging motor PWM, where observing the average motor state is more useful than the instantaneous state</li></ul></p><p><b>Mode:</b> Shows whether the controller is in Value mode or State mode.</p>"}),
z=document.createElement("div");z.style.whiteSpace="nowrap";k.appendChild(z);k=document.createElement("div");k.className="lego-subblock";var r=document.createElement("div");r.innerHTML="Registers";k.appendChild(r);m=document.createElement("div");m.className="dev_lego_regs";k.appendChild(m);z.appendChild(k);var u=document.createElement("div");u.className="lego-subblock";r=document.createElement("div");r.innerHTML="Sensors 0 to 4";u.appendChild(r);k=document.createElement("div");k.className="lego-subblock";
r=document.createElement("div");r.innerHTML="Motors 0 to 4";k.appendChild(r);for(r=0;5>r;r++)t[r]=l(r),u.appendChild(t[r][0]);z.appendChild(u);for(r=0;5>r;r++){u=r+5;var n=[],F=document.createElement("div");F.className="dev_lego_motor";F.innerHTML='<div class="lego-ms"></div><div class="lego-ms"></div><div class="lego-motor-up"></div><div class="lego-motor-down"></div>';n[0]=F;n[1]=F.children[0];n[2]=F.children[1];n[3]=F.children[2];n[4]=F.children[3];n[1].style.bottom="50%";n[2].style.top="50%";
t[u]=n;k.appendChild(t[r+5][0])}z.appendChild(k);k=document.createElement("div");k.className="lego-subblock";r=document.createElement("div");r.innerHTML="Mode";k.appendChild(r);r=document.createElement("div");r.innerHTML='<div style="margin-top:5px">Value</div>';r.className="dev_lego_mode";k.appendChild(r);z.appendChild(k);t[10]=r.children[0];return this.B};this.N=function(k){function z(n){return b(n>>>27,5)+" "+b(n>>>23&15,4)+" "+b(n>>>22&1,1)+" "+b(n>>>21&1,1)+" "+b(n>>>20&1,1)+" "+b(n>>>10&1023,
10)+" "+b(n>>>0&1023,10)}if(k[0])for(var r=0;5>r;r++)p.K(r,k[0][r]);if(k[1]){var u=k[1][0];for(r=0;5>r;r++)p.C(r,u>>2*r&3),p.ga(r,k[1][r+4]);t[10].innerHTML=u&2097152?"Value":"State";r='<span><b>Data:</b> <abbr title="binary: '+z(u)+'">'+K(u)+"</abbr></span>";u=k[1][1];r+='<span><b>Dir:</b> <abbr title="binary: '+z(u)+'">'+K(u)+"</abbr></span>";u=k[1][2];r+='<span><b>Intr:</b> <abbr title="binary: '+z(u)+'">'+K(u)+"</abbr></span>";u=k[1][3];r+='<span><b>Edge:</b> <abbr title="binary: '+z(u)+'">'+
K(u)+"</abbr></span>";m.innerHTML=r}}}function f(e,y,x,l,p){var m=this,t=[];d.call(this,"gpio",e,16,x);this.T=28;p||="dev_led_on";this.W=function(){this.la([[9,-1],[12,7]])};this.O=function(){var k=this.F("LEDs",e,{items:[{type:"section",text:"Display"},{type:"check",text:"Show 32 LEDs",onclick:function(u){u?m.K.classList.add("canhide-showall"):m.K.classList.remove("canhide-showall")}}]});k.classList.add("dev_led");k.classList.add("canhide");for(var z=31;0<=z;z--){var r=document.createElement("div");
r.className=z>=l?"dev_led_led canhide-hide":"dev_led_led";k.appendChild(r);t[z]=r}this.K=k;return this.B};this.Z([[0,0]]);this.N=function(k){k=k[0];if(k!=this.state)for(var z=31;0<=z;z--)t[z].classList.toggle(p,!!(k&1<<z));this.state=k};this.state=0}function g(e,y,x,l,p){function m(){for(var u=0,n=0;32>n;n++)u|=(r[n].checked&1)<<n;k.D(4,u)}function t(u){var n=u.target.defaultChecked;let F=z?32:p;for(var A=0;A<F;A++)r[A].disabled||(r[A].checked=n);m(null);u.preventDefault();u.stopPropagation();return!1}
var k=this;d.call(this,"gpio",e,y,x);this.T=0;var z=!1,r=[];"gpio"===l?this.T=300:"button"===l&&(this.T=300);this.Z([[0,0],[1,0],[2,0],[3,0]]);this.N=function(u){var n=u[0],F=u[1],A=u[2];u=u[3];for(var B=0;32>B;B++)r[B].disabled=!!(F&1<<B),r[B].checked=!!(n&1<<B),r[B].parentNode.style.backgroundColor=u&A&1<<B?"#c0ffc0":"#ffffff"};this.W=function(){"button"===l?this.la([[9,0],[12,1]]):"gpio"!==l&&this.la([[9,0],[12,7]])};this.O=function(){var u={items:[]};if(32>p){switch(l){case "button":var n="buttons";
break;case "switch":n="switches";break;case "gpio":n="bits";break;default:n=l}u.items=[{type:"section",text:"Display"},{type:"check",text:"Show 32 "+n,onclick:function(H){(z=H)?k.K.classList.add("switch-showall"):k.K.classList.remove("switch-showall")}}]}if("button"===l||"gpio"===l)u.fa='<p>The state of each bit is shown as a check box. The check box state tells you the pin\'s value (0 or 1), its direction (input or output), and whether the pin is requesting an interrupt (mask and edge capture both 1).</p><div class="dev-switch"><p><label><input type="checkbox">0</label> <label><input type="checkbox" checked>0</label><span style="margin-left: 1em">Input pin</span></p></div><div class="dev-switch"><p><label><input type="checkbox" disabled>0</label> <label><input type="checkbox" checked disabled>0</label><span style="margin-left: 1em">Output pin</span></p></div><div class="dev-switch"><p><label style="background-color: #c0ffc0"><input type="checkbox">0</label> <label style="background-color: #c0ffc0"><input type="checkbox" disabled checked>0</label><span style="margin-left:1em">Requesting interrupt</span></p></div>';
n=!1;switch(l){case "button":var F="Push buttons";break;case "switch":F="Switches";break;case "gpio":F="Parallel port";n=!0;break;default:F="Unknown device type "+l}u=this.F(F,e,u);u.classList.add("dev-switch");for(F=0;32>F;F++){var A=document.createElement("label");31-F>=p&&(A.className="switch-upper");var B=document.createElement("input");B.type="checkbox";B.style.display="block";B.addEventListener("change",m);B.checked=n;A.appendChild(B);r[31-F]=B;B=document.createTextNode(31-F);A.appendChild(B);
u.appendChild(A)}A=document.createElement("label");A.className="all";A.innerHTML='<div><input type="checkbox"><input type="checkbox" checked></div>All';A.children[0].children[0].addEventListener("click",t);A.children[0].children[1].addEventListener("click",t);u.appendChild(A);this.K=u;m(null);return this.B}}function q(e,y,x,l,p,m){d.call(this,"gpio",e,y,x);this.T=28;var t=this;this.W=function(){this.la([[9,-1],[12,7]])};this.C=[];l||(this.O=function(){var k=this.F("Seven-segment displays",e,{items:[{type:"section",
text:"Display"},{type:"check",text:"Show 8 digits",onclick:function(F){F?t.K.classList.add("sseg-showall"):t.K.classList.remove("sseg-showall")}}]});k.classList.add("dev-sseg");for(var z=0;8>z;z++){var r=document.createElement("div");r.className=8-z>p?"sseg-upper dev_sseg":"dev_sseg";var u=document.createElement("div");u.style.width="16px";u.style.height="4px";u.style.position="absolute";u.style.left="7px";u.style.top="3px";u.className="dev_sseg_off";r.appendChild(u);var n=u.cloneNode(!1);n.style.width=
"4px";n.style.height="15px";n.style.top="6px";n.style.left="22px";r.appendChild(n);n=n.cloneNode(!1);n.style.top="23px";r.appendChild(n);u=u.cloneNode(!1);u.style.top="37px";r.appendChild(u);n=n.cloneNode(!1);n.style.left="4px";r.appendChild(n);n=n.cloneNode(!1);n.style.top="6px";r.appendChild(n);u=u.cloneNode(!1);u.style.top="20px";r.appendChild(u);u=n.cloneNode(!1);u.style.top="39px";u.style.left="25px";u.style.height="4px";u.style.width="4px";u.style.borderRadius="2px";r.appendChild(u);this.C[7-
z]=r;k.appendChild(r)}this.K=k;return this.B});this.Z([[0,0]]);this.N=function(k){k=k[0];if(k!=this.state)for(var z=0;4>z;z++)for(var r=m?8:7,u=0;u<r;u++)this.C[z].children[u].className=k&1<<8*z+u?"dev_sseg_on":"dev_sseg_off";this.state=k};this.state=0}function h(e,y,x,l){var p=this;d.call(this,"timer",e,y,x);var m=[];this.W=function(){this.D(8,(l||1E5)>>>0)};this.O=function(){var t=this.F("Interval Timer",e,{items:[{type:"section",text:"Debugging"},{type:"item",text:"Force timeout now",onclick:function(){p.D(7,
1)}}],fa:"<p>For easier debugging, the simulated timers run slowly when the processor is stopped. In reality, timers run at full speed even when the processor is stopped.</p>"});t.style.whiteSpace="nowrap";m[0]=document.createElement("div");m[0].className="dev-timer dev-timer-counter";m[0].innerHTML="0";t.appendChild(m[0]);m[1]=document.createElement("div");m[1].innerHTML="Once";m[1].className="dev-timer";t.appendChild(m[1]);m[2]=document.createElement("div");m[2].innerHTML="Stop";m[2].className=
"dev-timer";t.appendChild(m[2]);m[3]=document.createElement("div");m[3].innerHTML="TO=0";m[3].className="dev-timer";t.appendChild(m[3]);return this.B};this.Z([[6,0],[1,0],[0,0]]);this.N=function(t){var k=t[0];m[0].innerHTML=k>>>0;m[1].innerHTML=t[1]&2?"Cont.":"Once";m[1].classList.toggle("dev-timer-1",t[1]&2);k=t[2];m[2].innerHTML=k&2?"Run":"Stop";m[2].classList.toggle("dev-timer-1",k&2);m[3].innerHTML="TO="+(k&1);m[3].classList.toggle("dev-timer-1",k&1)}}function w(e,y,x,l){var p=this;d.call(this,
"aclint_mtimer",e,y,x);var m=[];this.W=function(){this.D(8,(l||1E5)>>>0)};this.O=function(){var t=this.F("RISC-V Machine Timer",e,{items:[{type:"section",text:"Debugging"},{type:"item",text:"Reset internal counter",onclick:function(){p.D(7,0)}}],fa:"<p>For easier debugging, the simulated timers run slowly when the processor is stopped. In reality, timers run at full speed even when the processor is stopped.</p>"});t.style.whiteSpace="nowrap";m[0]=document.createElement("div");m[0].className="dev-timer dev-timer-counter";
m[0].innerHTML="0";t.appendChild(m[0]);m[1]=document.createElement("div");m[1].className="dev-timer";m[1].innerHTML=">=";m[1].style.minWidth="1.5em";m[1].style.textAlign="center";t.appendChild(m[1]);let k=document.createElement("div");k.className="dev-timer";k.innerHTML='<span class="timer-label">mtimecmp: </span>';m[2]=document.createElement("div");m[2].className="dev-timer-counter";m[2].innerHTML="0";k.appendChild(m[2]);t.appendChild(k);return this.B};this.Z([[0,0],[1,0],[2,0],[3,0],[4,0]]);this.N=
function(t){m[0].innerText=(BigInt(t[0]>>>0)|BigInt(t[1]>>>0)<<32n).toString();m[2].innerText=(BigInt(t[3]>>>0)<<32n|BigInt(t[2]>>>0)).toString();m[1].innerText=t[4]?">=":"<";m[1].classList.toggle("dev-timer-1",t[4]&1)}}function v(e,y,x){var l=this;d.call(this,"a9privatetimer",e,y,x);var p=16<y,m=[];this.O=function(){var t=this.F(p?"Cortex-A9 Watchdog Timer":"Cortex-A9 Private Timer",e,{items:[{type:"section",text:"Debugging"},{type:"item",text:"Force timeout now",onclick:function(){l.D(7,1)}}],fa:"<p>For easier debugging, the simulated timers run slowly when the processor is stopped. In reality, timers run at full speed even when the processor is stopped.</p>"});
t.style.whiteSpace="nowrap";m[0]=document.createElement("div");m[0].className="dev-timer dev-timer-counter";m[0].innerHTML="0";t.appendChild(m[0]);m[1]=document.createElement("div");m[1].innerHTML="Once";m[1].className="dev-timer";t.appendChild(m[1]);m[2]=document.createElement("div");m[2].innerHTML="Stop";m[2].className="dev-timer";t.appendChild(m[2]);m[3]=document.createElement("div");m[3].innerHTML="TO=0";m[3].className="dev-timer";t.appendChild(m[3]);p&&(m[4]=document.createElement("div"),m[4].innerHTML=
"RST=0",m[4].className="dev-timer",t.appendChild(m[4]));return this.B};this.Z([[6,0],[2,0],[3,0],[4,0]]);this.N=function(t){var k=t[0];m[0].innerHTML=k>>>0;k=t[1];m[1].innerHTML=k&8?"Watchdog":k&2?"Auto":"Once";m[1].classList.toggle("dev-timer-1",k&10);m[2].innerHTML=k&1?"Run":"Stop";m[2].classList.toggle("dev-timer-1",k&1);k=t[2];m[3].innerHTML="TO="+(k&1);m[3].classList.toggle("dev-timer-1",k&1);p&&(k=t[3],m[4].innerHTML="RST="+(k&1),m[4].classList.toggle("dev-timer-1",k&1))}}function C(e,y,x){var l=
this;d.call(this,"l4watchdog",e,y,x);var p=[];this.O=function(){var m=this.F("HPS L4 Watchdog Timer",e,{items:[{type:"section",text:"Debugging"},{type:"item",text:"Force timeout now",onclick:function(){l.D(7,1)}}],fa:"<p>For easier debugging, the simulated timers run slowly when the processor is stopped. In reality, timers run at full speed even when the processor is stopped.</p>"});m.style.whiteSpace="nowrap";p[0]=document.createElement("div");p[0].className="dev-timer dev-timer-counter";p[0].innerHTML=
"0";m.appendChild(p[0]);p[1]=document.createElement("div");p[1].innerHTML="Reset";p[1].className="dev-timer";m.appendChild(p[1]);p[2]=document.createElement("div");p[2].innerHTML="Stop";p[2].className="dev-timer";m.appendChild(p[2]);p[3]=document.createElement("div");p[3].innerHTML="INTR=0";p[3].className="dev-timer";m.appendChild(p[3]);return this.B};this.Z([[6,0],[0,0],[4,0]]);this.N=function(m){var t=m[0];p[0].innerHTML=t>>>0;t=m[1];p[1].innerHTML=t&2?"Interrupt":"Reset";p[1].classList.toggle("dev-timer-1",
t&2);p[2].innerHTML=t&1?"Run":"Stop";p[2].classList.toggle("dev-timer-1",t&1);t=m[2];p[3].innerHTML="INTR="+(t&1);p[3].classList.toggle("dev-timer-1",t&1)}}function I(e,y,x){function l(r,u,n){switch(r){case 13:r=!!k[11].checked|!!k[12].checked<<1|!!k[13].checked<<2|!!k[14].checked<<3|!!k[15].checked<<4;k[16].innerHTML=K(r,2);m.D(13,r);break;case 14:m.D(14,1);break;default:m.D(r,n.value)}}function p(r,u){var n=0,F=$(u.currentTarget.children[0]);u.deltaY&&(n=-u.deltaY/(0==u.deltaMode?40:1));n=Math.min(F.slider("option",
"max"),Math.max(F.slider("option","min"),F.slider("value")+n));u.preventDefault();F.slider("value",n);l(r,u,{value:n});return!1}d.call(this,"carworlduart",e,8,x);var m=this,t,k=[],z=[];this.O=function(){var r=this.F("Carworld UART",e,{fa:"<p><b>Car Commands</b> show the current steering and acceleration values. These are read-only.</p><p><b>Car State</b> allows adjusting the state of the car to control the responses you'll get when your program requests car position, speed, and sensor values.</p>"}),
u=document.createElement("div");u.style.whiteSpace="nowrap";r.appendChild(u);var n=document.createElement("div");n.className="dev-car-subblock";n.innerHTML='<div>Commands</div><div class="dev-car-subsubblock"><div class="dev-car-label">Steer: <span class="dev-car-num">00</span></div><div class="dev-car-label">Accel: <span class="dev-car-num">00</span></div></div>';k[0]=n.children[1].children[0].children[0];k[1]=n.children[1].children[1].children[0];u.appendChild(n);n=document.createElement("div");
n.className="dev-car-subblock";n.innerHTML='<div>State</div><div class="dev-car-subsubblock"><div class="dev-car-vslider"></div><div class="dev-car-label">x</div><div class="dev-car-num">0</div></div><div class="dev-car-subsubblock"><div class="dev-car-vslider"></div><div class="dev-car-label">y</div><div class="dev-car-num">0</div></div><div class="dev-car-subsubblock"><div class="dev-car-vslider"></div><div class="dev-car-label">z</div><div class="dev-car-num">0</div></div><div class="dev-car-subsubblock"><div class="dev-car-vslider"></div><div class="dev-car-label">Speed</div><div class="dev-car-num">0</div></div><div class="dev-car-subsubblock"><div class="dev-car-sens"><input type="checkbox" id="s1" checked></input><label for="s1"><span></span></label><input type="checkbox"  id="s2" checked></input><label for="s2"><span></span></label><input type="checkbox"  id="s3" checked></input><label for="s3"><span></span></label><input type="checkbox"  id="s4" checked></input><label for="s4"><span></span></label><input type="checkbox"  id="s5" checked></input><label for="s5"><span></span></label></div><div class="dev-car-label">Sensors</div><div class="dev-car-num">1f</div></div>';
k[3]=n.children[1].children[0];k[4]=n.children[1].children[2];k[5]=n.children[2].children[0];k[6]=n.children[2].children[2];k[7]=n.children[3].children[0];k[8]=n.children[3].children[2];k[9]=n.children[4].children[0];k[10]=n.children[4].children[2];k[11]=n.children[5].children[0].children[0];k[12]=n.children[5].children[0].children[2];k[13]=n.children[5].children[0].children[4];k[14]=n.children[5].children[0].children[6];k[15]=n.children[5].children[0].children[8];k[16]=n.children[5].children[2];
$(k[3]).slider({max:127,min:-128,orientation:"vertical"});$(k[5]).slider({max:127,min:-128,orientation:"vertical"});$(k[7]).slider({max:127,min:-128,orientation:"vertical"});$(k[9]).slider({max:255,min:0,orientation:"vertical"});u.appendChild(n);t=document.createElement("div");t.innerHTML='<div style="display:inline-block; width: 55%; overflow: hidden; white-space: nowrap; box-sizing:border-box; padding-right:1em;"><div style="width:6.5em; display:block; float:left">Read FIFO: 0</div><span class="dev_uart_fifo"> </span></div><div style="display:inline-block; width: 45%; overflow: hidden; white-space: nowrap; box-sizing:border-box; padding-right:1em;"><div style="width:6.5em; display:block; float:left">Write FIFO: 0</div><span class="dev_uart_fifo"> </span></div>';
z[0]=t.children[0].children[0];z[1]=t.children[0].children[1];z[2]=t.children[1].children[0];z[3]=t.children[1].children[1];r.appendChild(t);$(k[3]).on("slide",l.bind(null,9));$(k[5]).on("slide",l.bind(null,10));$(k[7]).on("slide",l.bind(null,11));$(k[9]).on("slide",l.bind(null,12));n.children[1].addEventListener("wheel",p.bind(null,9));n.children[2].addEventListener("wheel",p.bind(null,10));n.children[3].addEventListener("wheel",p.bind(null,11));n.children[4].addEventListener("wheel",p.bind(null,
12));k[11].addEventListener("change",l.bind(null,13));k[12].addEventListener("change",l.bind(null,13));k[13].addEventListener("change",l.bind(null,13));k[14].addEventListener("change",l.bind(null,13));k[15].addEventListener("change",l.bind(null,13));l(14,null,null);return this.B};this.N=function(r){k[0].innerHTML=r[3][0].toString();k[1].innerHTML=r[3][1].toString();for(var u=0;4>u;u++){var n=r[3][2+u];$(k[3+2*u]).slider("value",n);k[4+2*u].innerHTML=n.toString()}u=r[0];n=r[1];r=r[2];z[0].innerHTML=
"Read FIFO: "+(u>>>16);z[1].innerHTML=n;z[2].innerHTML="Write FIFO: "+(u&65535);z[3].innerHTML=r}}function Q(e,y,x){d.call(this,"uart",e,y,x);this.T=50;var l,p=[];Terminal.colors[256]="#f0f0f0";Terminal.colors[257]="#000";var m=new Terminal({cols:100,rows:10,useStyle:!1,screenKeys:!1,cursorBlink:!0,Mb:200,convertEol:!0,Rb:!0,tb:!1});this.O=function(){var t=this.F("JTAG UART",e,{items:[{type:"section",text:"Debugging"},{text:"Clear terminal",type:"item",onclick:function(){m.reset()}}]}),k=document.createElement("div");
k.className="dev_uart_term";m.open(k);t.appendChild(k);l=document.createElement("div");t.appendChild(l);l.style.whiteSpace="nowrap";l.style.width="100%";l.style.boxSizing="border-box";l.innerHTML='<div style="display:inline-block; width: 55%; overflow: hidden; white-space: nowrap; box-sizing:border-box; padding-right:1em;"><div style="width:6.5em; display:block; float:left">Read FIFO: 0</div><span class="dev_uart_fifo"> </span></div><div style="display:inline-block; width: 45%; overflow: hidden; white-space: nowrap; box-sizing:border-box; padding-right:1em;"><div style="width:6.5em; display:block; float:left">Write FIFO: 0</div><span class="dev_uart_fifo"> </span></div>';
p[0]=l.children[0].children[0];p[1]=l.children[0].children[1];p[2]=l.children[1].children[0];p[3]=l.children[1].children[1];m.addListener("key",this.C.bind(this));return this.B};this.C=function(t){1==t.length&&(t=t.charCodeAt(0))&&this.D(1,t)};this.N=function(t){var k=t[0];p[0].innerHTML="Read FIFO: "+(k>>>16);p[1].innerHTML=t[1];p[2].innerHTML="Write FIFO: "+(k&65535);p[3].innerHTML=t[2];""!=t[3]&&m.write(t[3])}}function D(e,y,x){d.call(this,"spimuart",e,y,x);this.T=45;var l,p=[];Terminal.colors[256]=
"#f0f0f0";Terminal.colors[257]="#000";var m=new Terminal({cols:100,rows:20,useStyle:!1,screenKeys:!1,cursorBlink:!0,Mb:200,convertEol:!0,Rb:!0,tb:!1});this.O=function(){var t=this.F("Terminal",e,{items:[{type:"section",text:"Debugging"},{text:"Clear terminal",type:"item",onclick:function(){m.reset()}}]}),k=document.createElement("div");k.className="dev_uart_term";m.open(k);t.appendChild(k);l=document.createElement("div");t.appendChild(l);l.style.whiteSpace="nowrap";l.style.width="100%";l.style.boxSizing=
"border-box";l.innerHTML='<div style="display:inline-block; width: 100%; overflow: hidden; white-space: nowrap; box-sizing:border-box; padding-right:1em;"><div style="width:6.5em; display:block; float:left">Read FIFO: 0</div><span class="dev_uart_fifo"> </span></div>';p[0]=l.children[0].children[0];p[1]=l.children[0].children[1];m.addListener("key",this.C.bind(this));return this.B};this.C=function(t){1==t.length&&(t=t.charCodeAt(0))&&this.D(1,t)};this.N=function(t){p[0].innerHTML="Read FIFO: "+(t[0]>>>
16);p[1].innerHTML=t[1];""!=t[2]&&m.write(t[2])}}function M(e,y,x){function l(n){if("string"==typeof n)var F=n;else"object"==typeof n&&"value"in n&&(F=n.value);F=F.trim();if(F.length){n=F.split(" ");F=[];for(var A=0;A<n.length;A++)F.push([8,parseInt(n[A],16)]);t.la(F)}}function p(n,F,A){if(u[F]){if(n=u[F][n])l(n),A.value=n}else console.log("Unknown key "+n+": "+F)}function m(n){function F(){document.pointerLockElement===n?(n.addEventListener("mousemove",A,!1),n.addEventListener("mousedown",A,!1),
n.addEventListener("mouseup",A,!1)):(n.removeEventListener("mousemove",A,!1),n.removeEventListener("mousedown",A,!1),n.removeEventListener("mouseup",A,!1),document.removeEventListener("pointerlockchange",F,!1),n.innerText="Start")}function A(B){var H=B.movementX,N=B.movementY;B=B.buttons&7|(0>H?16:0)|(0>N?32:0)|(255<Math.abs(H)?64:0)|(255<Math.abs(N)?128:0)|8;H=Math.min(Math.max(H,-255),255)&255;N=Math.min(Math.max(N,-255),255)&255;n.innerText=K(B,2)+" "+K(H,2)+" "+K(N,2);r[0][1]=B|0;r[1][1]=H|0;
r[2][1]=N|0;t.la(r)}n.onclick=function(){document.addEventListener("pointerlockchange",F,!1);n.requestPointerLock()}}var t=this;d.call(this,"ps2",e,y,x);var k=[],z=[["A","1C","F0 1C"],["B","32","F0 32"],["C","21","F0 21"],["D","23","F0 23"],["E","24","F0 24"],["F","2B","F0 2B"],["G","34","F0 34"],["H","33","F0 33"],["I","43","F0 43"],["J","3B","F0 3B"],["K","42","F0 42"],["L","4B","F0 4B"],["M","3A","F0 3A"],["N","31","F0 31"],["O","44","F0 44"],["P","4D","F0 4D"],["Q","15","F0 15"],["R","2D","F0 2D"],
["S","1B","F0 1B"],["T","2C","F0 2C"],["U","3C","F0 3C"],["V","2A","F0 2A"],["W","1D","F0 1D"],["X","22","F0 22"],["Y","35","F0 35"],["Z","1A","F0 1A"],["0","45","F0 45"],["1","16","F0 16"],["2","1E","F0 1E"],["3","26","F0 26"],["4","25","F0 25"],["5","2E","F0 2E"],["6","36","F0 36"],["7","3D","F0 3D"],["8","3E","F0 3E"],["9","46","F0 46"],["`","0E","F0 0E"],["-","4E","F0 4E"],["=","55","F0 55"],["\\","5D","F0 5D"],["BKSP","66","F0 66"],["SPACE","29","F0 29"],["TAB","0D","F0 0D"],["CAPS","58","F0 58"],
["L SHFT","12","F0 12"],["L CTRL","14","F0 14"],["L GUI","E0 1F","E0 F0 1F"],["L ALT","11","F0 11"],["R SHFT","59","F0 59"],["R CTRL","E0 14","E0 F0 14"],["R GUI","E0 27","E0 F0 27"],["R ALT","E0 11","E0 F0 11"],["APPS","E0 2F","E0 F0 2F"],["ENTER","5A","F0 5A"],["ESC","76","F0 76"],["F1","05","F0 05"],["F2","06","F0 06"],["F3","04","F0 04"],["F4","0C","F0 0C"],["F5","03","F0 03"],["F6","0B","F0 0B"],["F7","83","F0 83"],["F8","0A","F0 0A"],["F9","01","F0 01"],["F10","09","F0 09"],["F11","78","F0 78"],
["F12","07","F0 07"],["PRNT SCRN","E0 12 E0 7C","E0 F0 7C E0 F0 12"],["SCROLL","7E","F0 7E"],["PAUSE","E1 14 77 E1 F0 14 F0 77"," "],["[","54","F0 54"],["]","5B","F0 5B"],[";","4C","F0 4C"],["'","52","F0 52"],[",","41","F0 41"],[".","49","F0 49"],["/","4A","F0 4A"],["INSERT","E0 70","E0 F0 70"],["HOME","E0 6C","E0 F0 6C"],["PG UP","E0 7D","E0 F0 7D"],["DELETE","E0 71","E0 F0 71"],["END","E0 69","E0 F0 69"],["PG DN","E0 7A","E0 F0 7A"],["U ARROW","E0 75","E0 F0 75"],["L ARROW","E0 6B","E0 F0 6B"],
["D ARROW","E0 72","E0 F0 72"],["R ARROW","E0 74","E0 F0 74"],["NUM","77","F0 77"],["KP /","E0 4A","E0 F0 4A"],["KP *","7C","F0 7C"],["KP -","7B","F0 7B"],["KP +","79","F0 79"],["KP EN","E0 5A","E0 F0 5A"],["KP .","71","F0 71"],["KP 0","70","F0 70"],["KP 1","69","F0 69"],["KP 2","72","F0 72"],["KP 3","7A","F0 7A"],["KP 4","6B","F0 6B"],["KP 5","73","F0 73"],["KP 6","74","F0 74"],["KP 7","6C","F0 6C"],["KP 8","75","F0 75"],["KP 9","7D","F0 7D"]],r=[[8,0],[8,0],[8,0]],u={8:["66","F0 66"],9:["0D","F0 0D"],
13:["5A","F0 5A"],16:["12","F0 12"],17:["14","F0 14"],18:["11","F0 11"],19:["E1 14 77 E1 F0 14 F0 77",""],20:["58","F0 58"],27:["76","F0 76"],32:["29","F0 29"],33:["E0 7D","E0 F0 7D"],34:["E0 7A","E0 F0 7A"],35:["E0 69","E0 F0 69"],36:["E0 6C","E0 F0 6C"],37:["E0 6B","E0 F0 6B"],38:["E0 75","E0 F0 75"],39:["E0 74","E0 F0 74"],40:["E0 72","E0 F0 72"],44:["","E0 12 E0 7C E0 F0 7C E0 F0 12"],45:["E0 70","E0 F0 70"],46:["E0 71","E0 F0 71"],48:["45","F0 45"],49:["16","F0 16"],50:["1E","F0 1E"],51:["26",
"F0 26"],52:["25","F0 25"],53:["2E","F0 2E"],54:["36","F0 36"],55:["3D","F0 3D"],56:["3E","F0 3E"],57:["46","F0 46"],59:["4C","F0 4C"],61:["55","F0 55"],65:["1C","F0 1C"],66:["32","F0 32"],67:["21","F0 21"],68:["23","F0 23"],69:["24","F0 24"],70:["2B","F0 2B"],71:["34","F0 34"],72:["33","F0 33"],73:["43","F0 43"],74:["3B","F0 3B"],75:["42","F0 42"],76:["4B","F0 4B"],77:["3A","F0 3A"],78:["31","F0 31"],79:["44","F0 44"],80:["4D","F0 4D"],81:["15","F0 15"],82:["2D","F0 2D"],83:["1B","F0 1B"],84:["2C",
"F0 2C"],85:["3C","F0 3C"],86:["2A","F0 2A"],87:["1D","F0 1D"],88:["22","F0 22"],89:["35","F0 35"],90:["1A","F0 1A"],91:["E0 1F E0 F0 1F",""],92:["E0 27 E0 F0 27",""],93:["E0 2F","E0 F0 2F"],96:["70","F0 70"],97:["69","F0 69"],98:["72","F0 72"],99:["7A","F0 7A"],100:["6B","F0 6B"],101:["73","F0 73"],102:["74","F0 74"],103:["6C","F0 6C"],104:["75","F0 75"],105:["7D","F0 7D"],106:["7C","F0 7C"],107:["79","F0 79"],109:["7B","F0 7B"],110:["71","F0 71"],111:["E0 4A","E0 F0 4A"],112:["05","F0 05"],113:["06",
"F0 06"],114:["04","F0 04"],115:["0C","F0 0C"],116:["03","F0 03"],117:["0B","F0 0B"],118:["83","F0 83"],119:["0A","F0 0A"],120:["01","F0 01"],121:["09","F0 09"],122:["78","F0 78"],123:["07","F0 07"],144:["77","F0 77"],145:["7E","F0 7E"],173:["4E","F0 4E"],186:["4C","F0 4C"],187:["55","F0 55"],188:["41","F0 41"],189:["4E","F0 4E"],190:["49","F0 49"],191:["4A","F0 4A"],192:["0E","F0 0E"],219:["54","F0 54"],220:["5D","F0 5D"],221:["5B","F0 5B"],222:["52","F0 52"]};this.O=function(){function n(ja){t.B.classList.remove("option0");
t.B.classList.remove("option1");t.B.classList.remove("option2");t.B.classList.add("option"+ja)}function F(){var ja=parseInt(fa[0].value,10),Pa=parseInt(fa[1].value,10),ca=Math.min(Math.max(ja,-255),255)&255,Qa=Math.min(Math.max(Pa,-255),255)&255,Ra=Math.min(Math.max(parseInt(fa[2].value,10),-8),7);fa[6].value=K((fa[4].checked?4:0)|(fa[5].checked?2:0)|(fa[3].checked?1:0)|(0>ja?16:0)|(0>Pa?32:0)|(255<Math.abs(ja)?64:0)|(255<Math.abs(Pa)?128:0)|8,2)+" "+K(ca,2)+" "+K(Qa,2)+" "+K(Ra,2)}var A=this.F("PS/2 keyboard or mouse",
e,{fa:'<p>The interface here provides a way to generate the commonly-used byte sequences sent by keyboard and mice. It does not provide a detailed simulation of mice or keyboards. A few host-to-device commands are handled, but most will just print out a message.</p><p>The PS/2 device user interface has three modes, selected using the drop-down menu: Keyboard, Mouse, and Custom.</p><p><b>Keyboard mode</b>:</p><ol><li>Type into the text box in the first row to generate make and break codes (at least for keys a web browser will recognize), or</li><li>Select a particular key in the second row to send a single make or break code.</li></ol><p><b>Mouse mode</b>: You can either construct your own data packets, or capture the mouse to automatically generate standard PS/2 mouse movement packets from mouse movements.</p><ul><li><b>Manual</b>: Set the x, y, z, and button fields then send a movement packet. The Intellimouse 4-byte packet is shown in the <i>code</i> field. Click "3-byte packet" to send a standard PS/2 mouse movement packet (the first three bytes), or "4-byte packet" to send the full Intellimouse packet. Note that real mice need to be enabled before it will send movement packets, and need to be switched to Intellimouse mode to enable 4-byte packets. This initialization sequence isn\'t modelled here.</li><li><b>Capture</b>: Click Start to capture the mouse. While captured, any mouse motion or clicks will be automatically sent as PS/2 data packets, in 3-byte packet format (Standard PS/2 without scroll wheel), as though the mouse were in stream mode with data reporting enabled. The initialization sequence required to put the mouse into this mode is not modelled. On most browsers, pressing ESC stops mouse capture.</li></ul><p><b>Custom mode</b>: The four "Custom code" rows allow convenient access to your four most frequently used codes. These can be used to send <tt>0xFA</tt> ACKs, to emulate initialization sequences, or send any other byte sequence.</p><p>The following commands are recognized by this simulator</p><ul><li><tt>FF</tt> reset: A <tt>FA AA</tt> response is generated.</li><li><tt>F4</tt>, <tt>F5</tt>, and <tt>F6</tt>: These are acknowledged with <tt>FA</tt>.</li><li><tt>ED</tt> Set LEDs: Each byte of the two-byte command is acknowledged with <tt>FA</tt>, and the LEDs are set using the value of the second byte.</li></ul>',
items:[{type:"section",text:"Mode"},{type:"item",text:"Keyboard",V:"far menuoption option0",onclick:function(){n(0)}},{type:"item",text:"Mouse",V:"far menuoption option1",onclick:function(){n(1)}},{type:"item",text:"Custom",V:"far menuoption option2",onclick:function(){n(2)}},{type:"section",text:"Debugging"},{type:"item",text:"Clear read FIFO",onclick:function(){t.D(10,0)}}]}),B=document.createElement("div");A.appendChild(B);B.style.minWidth="280px";B.innerHTML='<div style="display:inline-block; width: 55%; overflow: hidden; white-space: nowrap; box-sizing:border-box; padding-right:1em;"><div style="width:6.5em; display:block; float:left">Read FIFO: 0</div><span class="dev_uart_fifo"> </span></div><div style="display:inline-block; width: 45%; overflow: hidden; white-space: nowrap; box-sizing:border-box; padding-right:1em;"><div style="width:6.5em; display:block; float:left">Write FIFO: 0</div><span class="dev_uart_fifo"> </span></div>';
k[0]=B.children[0].children[0];k[1]=B.children[0].children[1];k[2]=B.children[1].children[0];k[3]=B.children[1].children[1];B=document.createElement("table");B.className="dev_ps2 noselect";B.innerHTML='<tr class="option0"><td align=right><b>Type here:</b></td><td><input type="text" class="dev_ps2_input"></td></tr><tr class="option0"><td class="dev_ps2_fixed" style="text-align: right"><div style="display:inline-block; vertical-align:middle; margin-right: 4px;"><label>Key: <select></select></label></div><div style="display:inline-block; vertical-align: middle; text-align: right;"><label style="display:block;">Make: <input type="text" style="width:8em; font-size:8pt; background: #f0f0f0; border: 1px #aaa solid;" readonly></label><label style="display:block;">Break: <input type="text" style="width:8em; font-size:8pt; background: #f0f0f0; border: 1px #aaa solid;" readonly></label></div></td><td class="dev_ps2_fixed"><button>Send</button><br><button>Send</button></td></tr><tr class="option1"><td class="dev_ps2_fixed" style="text-align: right"><div style="display:inline-block; vertical-align: middle;">Move:&nbsp;&nbsp;X<input type="number" min="-256" max="256" value="0" style="width: 3.5em;"> Y<input type="number" min="-256" max="256" value="0" style="width: 3.5em;"> Z<input type="number" min="-8" max="7" value="0" style="width: 2.5em;"><br>Buttons: <label style="margin: 0 0.5em"><input type="checkbox">Left</label> <label style="margin: 0 0.5em"><input type="checkbox">Middle</label><label style="margin: 0 0.5em"><input type="checkbox">Right</label></div><br><div style="margin-left:1em; display:inline-block; vertical-align: middle;">Code: <input type="text" readonly style="width: 8em; background: #f0f0f0; border: 1px #aaa solid;"></div></td><td class="dev_ps2_fixed">Send packet:<br><button>3-byte</button><br><button>4-byte</button></td><td class="dev_ps2_fixed">Capture:<br><button style="height:40px; width:80px;">Start</button></td></tr><tr class="option2"><td style="text-align: right;">Custom code 1: <input type="text" style="width:10em;" value="aa"></td><td><button>Send</button></td></tr><tr class="option2"><td style="text-align: right;">Custom code 2: <input type="text" style="width:10em;" value="fa"></td><td><button>Send</button></td></tr><tr class="option2"><td style="text-align: right;">Custom code 3: <input type="text" style="width:10em;"></td><td><button>Send</button></td></tr><tr class="option2"><td style="text-align: right;">Custom code 4: <input type="text" style="width:10em;"></td><td><button>Send</button></td></tr><tr class="option0"><td colspan=2 style="text-align: center;"><div class="dev_ps2_led"></div>Num Lock <div class="dev_ps2_led"></div>Caps Lock <div class="dev_ps2_led"></div>Scroll Lock</td></tr>';
for(var H=B.getElementsByTagName("TR")[1],N=H.getElementsByTagName("INPUT")[0],ya=H.getElementsByTagName("INPUT")[1],da=H.getElementsByTagName("SELECT")[0],ba=0;ba<z.length;ba++){var ha=document.createElement("option");ha.value=ba;ha.innerHTML=z[ba][0];da.appendChild(ha)}da.addEventListener("change",ba=function(ja){N.value=z[ja.currentTarget.value][1];ya.value=z[ja.currentTarget.value][2]});ba({currentTarget:da});da=H.getElementsByTagName("BUTTON")[1];H.getElementsByTagName("BUTTON")[0].addEventListener("click",
l.bind(null,N));da.addEventListener("click",l.bind(null,ya));for(ba=3;7>ba;ba++)B.getElementsByTagName("TR")[ba].getElementsByTagName("BUTTON")[0].addEventListener("click",l.bind(null,B.getElementsByTagName("TR")[ba].getElementsByTagName("INPUT")[0]));H=B.getElementsByTagName("TR")[2];var fa=H.getElementsByTagName("INPUT");for(ba=0;6>ba;ba++)fa[ba].addEventListener("change",F);H.getElementsByTagName("BUTTON")[1].addEventListener("click",l.bind(null,fa[6]));H.getElementsByTagName("BUTTON")[0].addEventListener("click",
function(){l(fa[6].value.substr(0,8))});F();m(B.getElementsByTagName("TR")[2].children[2].children[1]);H=B.getElementsByClassName("dev_ps2_led");k[4]=[H[0],H[1],H[2]];H=B.getElementsByClassName("dev_ps2_input")[0];H.addEventListener("keydown",function(ja){p(0,ja.keyCode,this);ja.preventDefault()});H.addEventListener("keyup",function(ja){p(1,ja.keyCode,this);ja.preventDefault()});A.appendChild(B);n(0);return this.B};this.N=function(n){var F=n[0],A=n[1],B=n[2];k[0].innerHTML="Read FIFO: "+(F>>>16);
k[1].innerHTML=A;k[2].innerHTML="Write FIFO: "+(F&65535);k[3].innerHTML=B;n=n[3];n&2?k[4][0].classList.add("dev_ps2_led_on"):k[4][0].classList.remove("dev_ps2_led_on");n&4?k[4][1].classList.add("dev_ps2_led_on"):k[4][1].classList.remove("dev_ps2_led_on");n&1?k[4][2].classList.add("dev_ps2_led_on"):k[4][2].classList.remove("dev_ps2_led_on")}}function E(e,y,x,l){d.call(this,l?"memoryio":"memory",e,y);this.T=0}function O(e,y,x,l,p,m){function t(A){A=parseFloat(A.currentTarget.innerText);var B="option2";
switch(A){case .25:B="option0";break;case .5:B="option1";break;case 1:B="option2";break;case 1.5:B="option3";break;case 2:B="option4"}Math.round(A)!=A?z.classList.add("dev_vga_fb_shrink"):z.classList.remove("dev_vga_fb_shrink");z.style.width=640*A+"px";z.style.height=480*A+"px";k.B.classList.remove("option0");k.B.classList.remove("option1");k.B.classList.remove("option2");k.B.classList.remove("option3");k.B.classList.remove("option4");k.B.classList.add(B)}var k=this;if(0<=x)throw"VGA frame buffer device has no IRQ";
switch(y){case 245760:d.call(this,"vgafb",e,y,x);break;case 61440:d.call(this,"vgafb-160x120x16",e,y,x);break;case 30720:d.call(this,"vgafb-160x120x8",e,y,x);break;case 7680:d.call(this,"vgafb-80x60x8",e,y,x);break;default:throw"VGA frame buffer: size = "+y+" isn't valid";}this.T=25;var z,r;this.C=null;var u=document.createElement("canvas");u.width=320;u.height=240;var n=u.getContext("2d");this.O=function(){var A={items:[{type:"section",text:"Zoom"},{type:"item",text:"0.25",V:"far menuoption option0",
onclick:t},{type:"item",text:"0.5",V:"far menuoption option1",onclick:t},{type:"item",text:"1.0",V:"far menuoption option2",onclick:t},{type:"item",text:"1.5",V:"far menuoption option3",onclick:t},{type:"item",text:"2.0",V:"far menuoption option4",onclick:t}],Sa:[{type:"item",text:"Pixel buffer: "+K(e),ka:e},{type:"item",text:"Pixel buffer DMA control: "+K(l),ka:l},{type:"item",text:"Character buffer: "+K(p),ka:p},{type:"item",text:"Character buffer control: "+K(m),ka:m}]};A=this.F("VGA pixel buffer",
e,A);var B=document.createElement("canvas");B.width=640;B.height=480;B.className="dev_vga_fb";B.style.width="320px";B.style.height="240px";A.appendChild(B);z=B;this.B.classList.add("option1");r=z.getContext("2d");r.imageSmoothingEnabled=!1;r.Vb=!1;r.Zb=!1;r.Wb=!1;r.fillStyle="#000";this.K=A;return this.B};this.W=function(){var A=new ArrayBuffer(307200);L(19,[k.U.idx,A],[A])};try{new ImageData(1,1),this.N=function(A){if(0===A)n.fillRect(0,0,320,240);else{var B=new Uint8ClampedArray(A);B=new ImageData(B,
320,240);n.putImageData(B,0,0,0,0,320,240);L(19,[k.U.idx,A],[A])}this.ga()}}catch(A){var F=n.createImageData(320,240);this.N=function(B){if(0===B)n.fillRect(0,0,320,240);else{var H=new Uint8Array(B);if(F.data.set)F.data.set(H);else for(var N=0;N<F.data.length;N++)F.data[N]=H[N];n.putImageData(F,0,0,0,0,320,240);L(19,[k.U.idx,B],[B])}this.ga()}}this.ga=function(){r.drawImage(u,0,0,320,240,0,0,640,480);k.C&&r.drawImage(k.C,0,0)}}function R(e,y,x,l,p){var m=this;d.call(this,"vgadma",e,y);this.T=1;this.C=
null;this.W=function(){l&&m.D(3,l);p&&m.D(4,p|4)};this.N=function(){}}function la(e,y,x,l){d.call(this,"vgacbctrl",e,y);this.T=100;this.U.dev_param=l}function V(e,y){function x(){for(var u=z,n=r.length,F=k;F&&u<n;--F,u+=2)for(var A=r[u]>>>16,B=r[u]&65535,H=r[u+1],N=4;N;N--,A++,H>>>=8)p.clearRect(8*A,8*B,8,8),~H&128&&p.drawImage(m,H<<3&120,H>>>1&120,8,8,8*A,8*B,8,8);z=u;u==n?(l.C&&l.C(),l.Ha(),r=null):setTimeout(x,0)}var l=this;d.call(this,"vgacb",e,y);this.T=25;e=document.createElement("canvas");
e.width=640;e.height=480;var p=e.getContext("2d"),m=new Image;m.src="charfont.png";this.canvas=e;this.C=null;var t,k,z,r;this.N=function(u){if(0===u)return p.clearRect(0,0,640,480),l.C&&l.C(),!0;t=Math.ceil(u.length/800);k=Math.ceil(u.length/t/2)|0;r=u;z=0;x();return!1}}function Y(e,y,x,l){var p=this;l=(l||48E3)|0;d.call(this,"audio",e,y,x);this.U.dev_param=l;this.T=43;var m=new AudioContext;m.suspend();var t=[],k=0,z=0,r=0;m.onstatechange=function(){"suspended"==m.state&&(z||1>m.currentTime)&&m.resume()};
for(y=0;32>y;y++)t[y]=m.createBuffer(2,2048,l);var u=[];this.N=function(A){var B=A[0],H=A[1],N=A[2];u[0].children[1].innerText=H+" samples";u[2].children[1].innerText=N+" samples";u[0].children[0].style.width=H/81.92+"%";u[2].children[0].style.width=N/81.92+"%";u[1].innerText=B&1?"Overflowed: yes":"Overflowed: no";u[3].innerText=B&2?"Overflowed: yes":"Overflowed: no";H=A[3];N=A[4];u[4].children[1].innerText=H+" samples";u[6].children[1].innerText=N+" samples";u[4].children[0].style.width=H/61.44+
"%";u[6].children[0].style.width=N/61.44+"%";u[5].innerText=B&4?"Underflowed: yes":"Underflowed: no";u[7].innerText=B&8?"Underflowed: yes":"Underflowed: no";return!1};this.O=function(){var A=this.F("Audio ("+(l/1E3).toString()+" kHz)",e,{fa:"<p>The simulated audio device supports output and input. Audio playback goes to your web browser's audio output. Audio recording is functional, but will record a sawtooth wave with period 32 samples (250 Hz at 8 kHz sampling rate, 1500 Hz at 48 kHz sampling rate) rather than from a microphone.</p><p>The utilizations of the left and right channel write FIFOs are shown. These should be kept near-full when playing audio.</p><p>For debugging use, the simulator tracks whether each FIFO has ever overflowed in the past. To avoid buffer overflow, check for available write space before writing into the FIFOs.</p><p><b>Changes in University Program version 17.0</b><ul><li>The sample rate was changed to 8 kHz. Computer system versions 16.1 and earlier used 48 kHz.</li></ul></p><p><b>Differences from real hardware:</b><ul><li>The output FIFO lengths are &gt;&gt;8K samples long, not 128. The interface remains the same as in hardware though: the simulator will report 128 available FIFO spaces if there are 128 or more.</li><li>The long FIFOs result in high latency. In the simulator, sounds will typically be delayed by 300-600 milliseconds due to buffering, while the delay is just a few milliseconds in hardware. Large buffers help mitigate the high jitter when running in a web browser.</li><li>The FIFOs are dequeued in blocks of 2K samples in the simulator, but one sample at a time in real hardware. This shouldn't affect most correct programs (no FIFO overflows), but does change the way it sounds if the FIFO does overflow.</li><li>Audio can be a demanding workload, so there may be issues with the simulator running fast enough to keep up with audio playback. If so, try using Firefox and/or a faster computer (Firefox supports asm.js, so the simulator runs several times faster than Chrome).</li></ul>"}),
B=document.createElement("div");B.style.whiteSpace="nowrap";B.style.padding="4px";A.appendChild(B);A=document.createElement("div");A.style.display="inline-block";A.style.verticalAlign="middle";for(var H=0;2>H;H++){var N=document.createElement("div");N.innerHTML='<div style="width: 3.5em; display:inline-block;">Out '+(H?"R":"L")+': </div><div style="position:relative; padding: 0px 0.5em; width:6em; text-align: right; display:inline-block; border: 1px #aaa solid;"><div style="position:absolute; left: 0; top: 0; bottom: 0; background-color:#aea; width: 0%; z-index: 0;"></div><span style="position:relative;z-index:1;">0 samples</span></div><div style="margin-left: 1em; display:inline-block;">Overflowed: No</div>';
u[2*H]=N.children[1];u[2*H+1]=N.children[2];A.appendChild(N)}for(H=0;2>H;H++)N=document.createElement("div"),N.innerHTML='<div style="width: 3.5em; display:inline-block;">In '+(H?"R":"L")+': </div><div style="position:relative; padding: 0px 0.5em; width:6em; text-align: right; display:inline-block; border: 1px #aaa solid;"><div style="position:absolute; left: 0; top: 0; bottom: 0; background-color:#aea; width: 0%; z-index: 0;"></div><span style="position:relative;z-index:1;">0 samples</span></div><div style="margin-left: 1em; display:inline-block;">Underflowed: No</div>',
u[2*H+4]=N.children[1],u[2*H+5]=N.children[2],0==H&&(N.style.marginTop="4px"),A.appendChild(N);B.appendChild(A);A=document.createElement("button");A.innerHTML="Reset<br>overflow";A.style.verticalAlign="middle";A.style.marginLeft="1em";B.appendChild(A);A.addEventListener("click",function(){p.D(6,15)});return this.B};this.W=function(){n[0]=p.U.idx;for(var A=0;10>A;A++){var B=new ArrayBuffer(16384);n[1]=B;F[0]=B;L(21,n,F)}};this.C=.25;this.K=null;var n=[this.U.idx,null],F=[null];this.gb=function(A,B){"running"!=
m.state&&m.resume();var H=m.currentTime;if(A){var N=new Float32Array(A,0,2048),ya=new Float32Array(A,8192,2048);t[r].copyToChannel(N,0);t[r].copyToChannel(ya,1);n[1]=A;F[0]=A;L(21,n,F);z?B||(A=63488/l,H+1024/l>k?(p.C=Math.min(A,1.2*p.C),k=H+p.C):H+6144/l>k?(H=Math.min(.05*p.C,A-p.C),p.C+=H,n[1]=H,L(22,n)):H+8192/l<k&&(H=Math.max(-.001,.15-p.C),p.C+=H,n[1]=H,L(22,n))):k=H+p.C-.05;z=!B;B=m.createBufferSource();B.buffer=t[r];B.connect(m.destination);B.start(k);k+=2048/l;r++;32==r&&(r=0)}z?p.K||(p.K=
setInterval(p.gb,32)):p.K&&(clearInterval(p.K),p.K=null)}}function S(e,y,x,l){d.call(this,"videoin",e,y);this.T=1E3;this.W=function(){this.D(2,l)};var p=[];this.O=function(){var m=this.F("Video-in control",e),t=document.createElement("span");t.innerHTML="State: Disabled";m.appendChild(t);p[0]=t;return this.B};this.Z([[0,0],[1,0]]);this.N=function(m){p[0].innerHTML="<b>State</b>: "+(m[0]?"Enabled":"Disabled")+"&nbsp;&nbsp;&nbsp;&nbsp;<b>Writing image to:</b> <tt>0x"+K(m[1])+"</tt>"}}function qa(e,
y){d.call(this,"adc",e,y);this.T=1E3;var x=[];this.O=function(){var l=this.F("ADC",e),p=document.createElement("span");p.innerHTML="Mode: Manual update";l.appendChild(p);x[0]=p;return this.B};this.Z([[0,0]]);this.N=function(l){x[0].innerHTML=l[0]?"<b>Mode</b>: Automatic update":"<b>Mode</b>: Manual update"}}function Sa(e){function y(l){for(var p=l.length?l[0]:"&mdash;",m=1;m<l.length;m++)p=p+" "+l[m];return p}d.call(this,"arm_gic_cpuif",e,20);this.T=1E3;var x=[];this.O=function(){var l=this.F("ARM Generic Interrupt Controller",
e,{fa:"<p>This shows the state of the ARM Generic Interrupt Controller to make debugging easier.<ul><li><b>CPUIF</b>: This shows whether the CPU interface is enabled, and a list of any active interrupts.</li><li><b>Distributor</b>: This shows the state of the Distributor. The first box shows a list of all enabled interrupts. Each of the Pending, Active+Pending, and Active boxes shows a list of interrupts that are in that state. Pending interrupts can cause the CPU to branch to the interrupt handler. An interrupt becomes active while it is being processed. If an interrupt is still pending while also actively being processed, it is in the Active and Pending state.</li><li><b>Devices</b>: This shows a list of all interrupt lines that are requesting an interrupt, regardless of whether the interupt is enabled at the GIC Distributor.</li></ul></p>"}),
p=document.createElement("div");p.innerHTML='<div class="armgic_box"><div>CPUIF: <span style="font-weight: normal;">Off</span></div><div class="armgic_distbox"><div>Active</div><div class="list"></div></div></div><div class="armgic_box"><div>Distributor</div><div class="armgic_distbox"><div>Enabled</div><div class="list"></div></div><div class="armgic_distbox"><div>Pending</div><div class="list"></div></div><div class="armgic_distbox"><div>Act+Pend</div><div class="list"></div></div><div class="armgic_distbox"><div>Active</div><div class="list"></div></div></div><div class="armgic_box"><div>Devices</div><div class="armgic_distbox"><div>Request</div><div class="list"></div></div></div>';
l.appendChild(p);x[0]=p.children[0].children[0].children[0];x[1]=p.children[0].children[1].children[1];x[2]=p.children[1].children[1].children[1];x[3]=p.children[1].children[2].children[1];x[4]=p.children[1].children[3].children[1];x[5]=p.children[1].children[4].children[1];x[6]=p.children[2].children[1].children[1];return this.B};this.N=function(l){x[0].innerHTML=l[0]?"On":"Off";x[1].innerHTML=y(l[1]);x[2].innerHTML=y(l[2]);x[3].innerHTML=y(l[5]);x[4].innerHTML=y(l[6]);x[5].innerHTML=y(l[4]);x[6].innerHTML=
y(l[3])}}function ta(e,y,x){function l(){const G=new da.MeshPhongMaterial({color:4500104}),T=new da.MeshPhongMaterial({color:8952251});p(1,0,-4,0,120,1,30,0,T);p(2,0,2,0,3,5,3,.1,G);p(1,0,6,0,25,1,5,.15,G);p(3,10,0,0,10,-10,0,0,null);p(3,-10,0,0,-10,-10,0,0,null);ca.push(16);ca.push(2,0,-3.2,0,0,0,1,1,0,0,0,0,1,0);ca.push(17);ca.push(2,0,-3.1,0,1,0,0,0);ca.push(18);ca.push(1,-39,39,1,0,0,0);ca.push(19);ca.push(1,-1,1,-1,1,-.785,.785);ca.push(20);ca.push(1,0,1,.25);ca.push(20);ca.push(1,3,1,5E3);ca.push(20);
ca.push(1,4,1,5E3);p(0,0,0,0,0,0,0,0,null)}function p(G,T,Ta,Hb,ob,Ib,Zb,yc,ia){ca.push(G);0==G?(L(26,[ya.U.idx,ca]),ca.length=0):(ca.push(T,Ta,Hb,ob,Ib,Zb),1!=G&&2!=G||ca.push(yc));1==G?(G=new da.BoxBufferGeometry(ob,Ib,Zb),void 0===ia&&(ia=new da.MeshPhongMaterial({color:16777215})),ia=new da.Mesh(G,ia),ia.position.x=T,ia.position.y=Ta,ia.position.z=Hb,ha.push(ia),fa.add(ia)):2==G&&(G=new da.CylinderBufferGeometry(ob/2,ob/2,Ib),void 0===ia&&(ia=new da.MeshPhongMaterial({color:16777215})),ia=new da.Mesh(G,
ia),ia.position.x=T,ia.position.y=Ta,ia.position.z=Hb,ha.push(ia),fa.add(ia))}function m(G){Pa[Qa]=G;Qa=(Qa+1)%3}function t(){if(Qa!=Ra){let T=Pa[Ra];Ra=(Ra+1)%3;ka(27,ya.U.idx,m);for(var G=0;G<ha.length;G++)ha[G].position.x=T[7*G],ha[G].position.y=T[7*G+1],ha[G].position.z=T[7*G+2],ha[G].quaternion.x=T[7*G+3],ha[G].quaternion.y=T[7*G+4],ha[G].quaternion.z=T[7*G+5],ha[G].quaternion.w=T[7*G+6];ba.position.x=.2*T[7];ba.lookAt(ha[1].position);ja.render(fa,ba)}requestAnimationFrame(t)}function k(){for(var G=
0;G<ha.length;G++)fa.remove(ha[G]);ha.length=0;l()}function z(G,T){let Ta=0;null!==G&&(G=Math.max(0,Math.min(T.clientWidth,G)),Ta=65534*(.5-G/T.clientWidth));ya.D(3,131072|Ta&65535)}function r(G){0==G.button&&(G.target.setPointerCapture(G.pointerId),z(G.offsetX,G.target))}function u(G){z(null,null);G.target.releasePointerCapture(G.pointerId)}function n(G){G.buttons&1&&z(G.offsetX,G.target)}function F(G){0==G.button&&z(G.offsetX,G.target)}function A(){z(null,null)}function B(G){G.buttons&1&&z(G.offsetX,
G.target)}function H(){z(null,null)}function N(G){let T=G.targetTouches.item(0).target.getBoundingClientRect();z(G.targetTouches.item(0).clientX-T.left,G.target)}var ya=this;d.call(this,"bullet",e,y,x);this.T=0;const da=window.THREE;var ba,ha=[],fa,ja,Pa=[];this.W=function(){};var ca=[],Qa=0,Ra=0;this.O=function(){var G=this.F("Balancer",e,{fa:'<p>Mouse-down in the animation window to apply an external torque to the balancer. Mouse-down with the pointer in the left and right halves cause the balancer to rotate left and right, respectively, with more torque applied when the mouse pointer is further away from the center.</p><p>See also: <a href="doc/#dev_balancer" target="_blank">Beam balancer documentation</a></p>',
items:[{type:"section",text:"Debug"},{type:"item",text:"Reset",onclick:k}]}),T=document.createElement("canvas");G.appendChild(T);T.width=500;T.height=300;ja=new da.WebGLRenderer({canvas:T,antialias:!0});window.PointerEvent?(T.addEventListener("pointerdown",r,!1),T.addEventListener("pointerup",u,!1),T.addEventListener("pointermove",n,!1)):window.TouchEvent?(T.addEventListener("touchstart",N,!1),T.addEventListener("touchend",H,!1),T.addEventListener("touchmove",N,!1)):(T.addEventListener("mousedown",
F,!1),T.addEventListener("mouseup",A,!1),T.addEventListener("mousemove",B,!1));this.K=G;ba=new da.PerspectiveCamera(22,T.width/T.height,40,120);ba.position.y=15;ba.position.z=80;fa=new da.Scene;G=new da.DirectionalLight(16777215,1);G.position.set(-1,10,15);fa.add(G);G=new da.AmbientLight(4210752,2);fa.add(G);l();for(G=0;2>G;G++)ka(27,ya.U.idx,m);requestAnimationFrame(t);return this.B}}d.prototype.N=function(){};d.prototype.F=function(e,y,x){var l=document.createElement("div");l.className="dev_box";
l.id="dev"+K(y);l.appendChild(this.Ga(e,y,x));e=document.createElement("div");e.className="dev_box_content";l.appendChild(e);this.B=l;return e};d.prototype.Ga=function(e,y,x){var l=this,p=document.createElement("div"),m=this.U.irq;p.className="dev_label noselect";var t=document.createElement("div");t.className="dev_menu";t.title="";var k=document.createElement("i");k.className="fas fa-caret-square-down";k.style.marginRight="0.5em";t.appendChild(k);var z=document.createElement("div");z.className="dev_menu_content";
if(x&&Array.isArray(x.items))for(var r=0,u=x.items.length;r<u;++r){var n=x.items[r];z.appendChild(na(n))}z.appendChild(na({type:"section",text:"Device Info"}));if(x&&Array.isArray(x.Sa))for(r=0,u=x.Sa.length;r<u;++r)n=x.Sa[r],z.appendChild(na(n));else z.appendChild(na({type:"item",text:"Base address: "+K(y),ka:y}));0<=m&&z.appendChild(na({text:"IRQ: "+m}));z.appendChild(na({type:"section",text:"This panel"}));z.appendChild(na({type:"check",text:"Show in a separate box",onclick:function(){l.M.za?l.sa():
l.ra()}}));z.addEventListener("click",function(){var F=this;F.style.display="none";setTimeout(function(){F.style.display=""},250)});t.appendChild(z);p.appendChild(t);x&&x.fa&&(t=document.createElement("div"),t.className="dev_menu",z=document.createElement("i"),z.className="fas fa-question-circle",z.style.marginRight="0.5em",k.style.marginRight="0.25em",t.appendChild(z),k=document.createElement("div"),k.innerHTML=x.fa,k.className="dev_menu_content dev_popup_help",t.appendChild(k),t.addEventListener("mousedown",
function(F){F.stopPropagation()}),p.appendChild(t));x=document.createElement("span");x.innerText=e;this.M.ab=e;x.className="dev_title";p.appendChild(x);e=document.createElement("span");e.className="dev_addr";e.innerHTML=(0<=m?"<span>IRQ "+m+"</span>":"")+'<a href="#" class="c-mono" title="Go to '+K(y)+' in Memory Window" id="link'+y+'">'+K(y)+"</a>";e.addEventListener("click",oa(y));p.appendChild(e);return p};d.prototype.ra=function(){var e;if(this.M.za)throw"Can't float: Already floating";var y=
this.B.clientWidth,x=this.B.clientHeight;var l=this.B;var p=0;for(e=0;l;){if("BODY"==l.tagName){var m=l.scrollTop||document.documentElement.scrollTop;p+=l.offsetLeft-(l.scrollLeft||document.documentElement.scrollLeft)+l.clientLeft;e+=l.offsetTop-m+l.clientTop}else p+=l.offsetLeft-l.scrollLeft+l.clientLeft,e+=l.offsetTop-l.scrollTop+l.clientTop;l=l.offsetParent}l=p;this.M.za=!0;this.M.Ra=this.B.parentNode;this.M.Na=new dockspawn.PanelContainer(this.B,pa,{title:this.M.ab,iconName:"fas fa-desktop"});
p=new dockspawn.Dialog(this.M.Na,pa);x+=this.B.offsetTop;p.resize(Math.max(180,y),x,!0);p.setPosition(l+(200>l?40:-40),e+40)};d.prototype.sa=function(){if(!this.M.za)throw"Can't unfloat: Not floating";this.M.za=!1;this.M.Na.onCloseButtonClicked(null);this.M.Na=null;this.B.style.width="";this.B.style.height="";this.M.Ra.insertBefore(this.B,this.M.Ra.children[0])};d.prototype.Z=function(e){this.U.poll_ioctls=e};d.prototype.D=function(){var e=[[0,0]];return function(y,x){e[0][0]=y;e[0][1]=x;this.la(e)}}();
d.prototype.la=function(){var e=[0,null];return function(y){e[0]=this.U.idx;e[1]=y;L(18,e)}}();d.prototype.Ha=function(){L(20,this.U.idx)};a(c);a(f);a(g);a(q);a(h);a(w);a(v);a(C);a(I);a(Q);a(D);a(M);a(E);a(O);a(R);a(la);a(V);a(Y);a(S);a(qa);a(Sa);a(ta);J={ya:[],Ub:[],W:function(){J.ta[P.queries.sys].P(J);$("#dev_ui_box").sortable({handle:"div.dev_label > :not(.dev_menu)"})},A:function(e){var y=J;if(!d.prototype.isPrototypeOf(e))throw"dev_obj needs to extend devobj2";y.ya.push(e);e.U.idx=y.ya.length-
1;if(y.ya[e.U.idx]!==e)throw"add_device: Something bad happened";e.U.refresh_interval=e.T;L(4,e.U);e.W&&e.W();e.O&&(e.O(),e.B&&document.getElementById("dev_ui_box").appendChild(e.B))},Jb:function(e,y){!1!==J.ya[e].N(y)&&L(20,e)},Za:function(e,y,x,l,p,m){var t=J;if(x&x-1)throw"create_altera_vga_device: fbmemsize must be a power of two";if(x<y)throw"fbmemsize smaller than fbsize";try{var k,z;t.A(new E(e,x,-1,!0));t.A(k=new O(e,y,-1,l,p,m));t.A(new E(p,8192,-1,!0));t.A(z=new V(p,7680,-1));k.C=z.canvas;
z.C=k.ga;var r;x=e=null;switch(y){case 245760:e=15728960;x=134807584;break;case 61440:e=7864480;x=117964832;break;case 30720:e=7864480;x=117964816;break;case 7680:e=3932240;x=101122064;break;default:throw"Unknown VGA device type";}t.A(r=new R(l,16,-1,e,x));r.C=k;t.A(new la(m,8,-1,p))}catch(u){U('<b>VGA device</b>: Error creating VGA device: "'+u.toString()+'"')}},ua:function(e,y,x,l,p,m){var t=J;if(x&x-1)throw"create_altera_vga_device_16_0: fbmemsize must be a power of two";if(x<y)throw"fbmemsize smaller than fbsize";
try{var k,z;t.A(new E(e,x,-1,!0));t.A(k=new O(e,y,-1,l,p,m));var r;x=e=null;switch(y){case 245760:e=15728960;x=134811392;break;case 61440:e=7864480;x=117968640;break;case 30720:e=7864480;x=117966592;break;case 7680:e=3932240;x=101123840;break;default:throw"Unknown VGA device type";}t.A(r=new R(l,16,-1,e,x));r.C=k;t.A(new E(p,8192,-1,!0));t.A(z=new V(p,7680,-1));k.C=z.canvas;z.C=k.ga;t.A(r=new R(m,16,-1,3932240,101123840));r.C=z}catch(u){U('<b>VGA device</b>: Error creating VGA device: "'+u.toString()+
'"')}},R:function(){void 0!==P.queries.dev_balancer&&this.A(new ta(4282384384,16,-1))},L:{Aa:function(e){var y=P.queries.d_audio|0||e;if(8E3>y||96E3<y)y=e;return y},Gb:{name:"Nios II DE1-SoC",H:0,description:"DE1-SoC Computer",P:function(e){var y,x;e.A(new E(0,67108864,-1,!1));e.R();e.A(new f(4280287232,0,-1,10));e.A(new g(4280287296,16,-1,"switch",10));e.A(new g(4280287312,16,1,"button",4));e.A(y=new q(4280287264,16,-1,!1,6,!1));e.A(x=new q(4280287280,16,-1,!0,6,!1));for(var l=0;4>l;l++)x.C[l]=y.C[l+
4];e.A(new Q(4280291328,8,8));e.A(new h(4280295424,16,0));e.A(new h(4280295456,16,2));e.ua(134217728,245760,262144,4280299552,150994944,4280299568);e.A(new c(4280287328,0,11));e.A(new g(4280287344,16,12,"gpio",32));e.A(new I(268439584,0,3));if("undefined"===typeof AudioContext)U("<b>Audio device</b> not supported: browser does not support Web Audio");else try{var p=new Y(4280299584,16,6,J.L.Aa(8E3));e.A(p)}catch(m){U('<b>Audio device</b>: Error creating audio device: "'+m.toString()+'"')}e.A(new E(1073741824,
1073741824,-1,!1));e.A(new M(4280287488,8,7));e.A(new M(4280287496,8,23));e.A(new S(4280299616,16,-1,134217728));e.A(new qa(4280303616,32,-1))}},Hb:{name:"Nios II DE2",H:0,description:"DE2 Media Computer",P:function(e){var y,x;e.A(new E(0,8388608,-1,!1));e.R();e.A(new f(268435456,0,-1,18));e.A(new f(268435472,0,-1,9,"dev_led_on_green"));e.A(new g(268435520,16,-1,"switch",18));e.A(new g(268435536,16,1,"button",4));e.A(y=new q(268435488,16,-1,!1,8,!1));e.A(x=new q(268435504,16,-1,!0,8,!1));for(var l=
0;4>l;l++)x.C[l]=y.C[l+4];e.A(new Q(268439552,8,8));e.A(new h(268443648,16,0,5E4));e.Za(134217728,245760,524288,268447776,150994944,268447792);e.A(new g(268435552,16,11,"gpio",32));e.A(new g(268435568,16,12,"gpio",32));if("undefined"===typeof AudioContext)U("<b>Audio device</b> not supported: browser does not support Web Audio");else try{var p=new Y(268447808,16,6,J.L.Aa(48E3));e.A(p)}catch(m){U('<b>Audio device</b>: Error creating audio device: "'+m.toString()+'"')}e.A(new M(268435712,8,7));e.A(new S(268447840,
16,-1,134217728))}},Ib:{name:"Nios II DE2-115",H:0,description:"DE2-115 Media Computer",P:function(e){var y,x;e.A(new E(0,134217728,-1,!1));e.R();e.A(new f(268435456,0,-1,18));e.A(new f(268435472,0,-1,9,"dev_led_on_green"));e.A(new g(268435520,16,-1,"switch",18));e.A(new g(268435536,16,1,"button",4));e.A(y=new q(268435488,16,-1,!1,8,!1));e.A(x=new q(268435504,16,-1,!0,8,!1));for(var l=0;4>l;l++)x.C[l]=y.C[l+4];e.A(new Q(268439552,8,8));e.A(new h(268443648,16,0,5E4));e.ua(134217728,245760,2097152,
268447776,150994944,268447792);e.A(new g(268435552,16,11,"gpio",32));e.A(new g(268435568,16,12,"gpio",32));if("undefined"===typeof AudioContext)U("<b>Audio device</b> not supported: browser does not support Web Audio");else try{var p=new Y(268447808,16,6,J.L.Aa(8E3));e.A(p)}catch(m){U('<b>Audio device</b>: Error creating audio device: "'+m.toString()+'"')}e.A(new M(268435712,8,7));e.A(new M(268435720,8,17));e.A(new S(268447840,16,-1,134217728))}},Eb:{name:"Nios II DE0",H:0,description:"Based on the DE0 Media Computer",
P:function(e){var y,x;e.A(new E(0,8388608,-1,!1));e.R();e.A(new f(268435472,0,-1,10,"dev_led_on_green"));e.A(new g(268435520,16,-1,"switch",10));e.A(new g(268435536,16,1,"button",3));e.A(y=new q(268435488,16,-1,!1,4,!0));e.A(x=new q(268435504,16,-1,!0,4,!0));for(var l=0;4>l;l++)x.C[l]=y.C[l+4];e.A(new Q(268439552,8,8));e.A(new h(268443648,16,0,5E4));e.Za(134217728,7680,8192,268447776,150994944,268447792);e.A(new g(268435552,16,11,"gpio",32));e.A(new g(268435568,16,12,"gpio",32));e.A(new M(268435712,
8,7));e.A(new M(268435720,8,17))}},Fb:{name:"Nios II DE10-Lite",H:0,description:"Based on the DE10-Lite Computer",P:function(e){var y,x;e.A(new E(0,67108864,-1,!1));e.R();e.A(new f(4280287232,0,-1,10));e.A(new g(4280287296,16,-1,"switch",10));e.A(new g(4280287312,16,1,"button",2));e.A(y=new q(4280287264,16,-1,!1,6,!0));e.A(x=new q(4280287280,16,-1,!0,6,!0));for(var l=0;4>l;l++)x.C[l]=y.C[l+4];e.A(new Q(4280291328,8,8));e.A(new h(4280295424,16,0,1E5));e.A(new h(4280295456,16,2,1E5));e.ua(134217728,
61440,65536,4280299552,150994944,4280299568);U("<b>VGA pixel buffer:</b> Using 160x120 16 bpp mode. This differs from v16.1 of the computer system.");e.A(new g(4280287328,16,11,"gpio",32))}},Db:{name:"Nios II generic",H:0,description:"Nios II system with 4 GB of memory and no other I/O devices",P:function(e){e.R();e.A(new E(0,1073741824,-1,!1));e.A(new E(1073741824,1073741824,-1,!1));e.A(new E(2147483648,1073741824,-1,!1));e.A(new E(3221225472,1073741824,-1,!1))}},pb:{name:"ARMv7 DE1-SoC",H:1,description:"DE1-SoC Computer",
P:function(e){var y,x;e.A(new E(0,1073741824,-1,!1));e.A(new E(4294901760,65536,-1,!1));e.A(new E(3221225472,67108864,-1,!1));e.R();e.A(new f(4280287232,0,-1,10));e.A(new g(4280287296,16,-1,"switch",10));e.A(new g(4280287312,16,73,"button",4));e.A(y=new q(4280287264,16,-1,!1,6,!1));e.A(x=new q(4280287280,16,-1,!0,6,!1));for(var l=0;4>l;l++)x.C[l]=y.C[l+4];e.A(new Q(4280291328,8,80));e.A(new v(4294886912,16,29));e.A(new v(4294886944,24,30));e.A(new C(4291829760,24,203));e.A(new C(4291833856,24,204));
e.A(new h(4280295424,16,72));e.A(new h(4280295456,16,74));e.ua(3355443200,245760,262144,4280299552,3372220416,4280299568);e.A(new I(4280356896,0,75));e.A(new g(4280287328,16,11,"gpio",32));e.A(new g(4280287344,16,12,"gpio",32));if("undefined"===typeof AudioContext)U("<b>Audio device</b> not supported: browser does not support Web Audio");else try{var p=new Y(4280299584,16,78,J.L.Aa(8E3));e.A(p)}catch(m){U('<b>Audio device</b>: Error creating audio device: "'+m.toString()+'"')}e.A(new M(4280287488,
8,79));e.A(new M(4280287496,8,89));e.A(new S(4280299616,16,-1,3355443200));e.A(new qa(4280303616,32,-1));e.A(new Sa(4294885632,4294889472))}},ob:{name:"ARMv7 generic",H:1,description:"ARMv7 system with 4 GB memory and no other I/O devices",P:function(e){e.R();e.A(new E(0,1073741824,-1,!1));e.A(new E(1073741824,1073741824,-1,!1));e.A(new E(2147483648,1073741824,-1,!1));e.A(new E(3221225472,1073741824,-1,!1))}},zb:{name:"MIPS32r5 generic",H:3,description:"MIPS32 release 5 system with 4 GB memory and no other I/O devices",
P:function(e){e.R();e.A(new E(0,1073741824,-1,!1));e.A(new E(1073741824,1073741824,-1,!1));e.A(new E(2147483648,1073741824,-1,!1));e.A(new E(3221225472,1073741824,-1,!1))}},Ab:{name:"MIPS32r5 SPIM",H:3,description:"MIPS32 release 5 system with 4 GB memory, some SPIM/MARS syscalls, and a SPIM-compatible terminal I/O device",P:function(e){e.A(new D(4294901760,16,0));e.R();e.A(new E(0,1073741824,-1,!1));e.A(new E(1073741824,1073741824,-1,!1));e.A(new E(2147483648,1073741824,-1,!1));e.A(new E(3221225472,
1073741824,-1,!1));L(8,[34,2]);ra+=sa}},Bb:{name:"MIPS32r5 (no delay slots) generic",H:3,description:"MIPS32 release 5 system with branch delay slots disabled, with 4 GB memory, and no other I/O devices",P:function(e){e.R();e.A(new E(0,1073741824,-1,!1));e.A(new E(1073741824,1073741824,-1,!1));e.A(new E(2147483648,1073741824,-1,!1));e.A(new E(3221225472,1073741824,-1,!1));L(8,[34,1]);ra=ua}},Cb:{name:"MIPS32r5 (no delay slots) SPIM",H:3,description:"MIPS32 release 5 system with branch delay slots disabled, with 4 GB memory, some SPIM/MARS syscalls, and a SPIM-compatible terminal I/O device",
P:function(e){e.A(new D(4294901760,16,0));e.R();e.A(new E(0,1073741824,-1,!1));e.A(new E(1073741824,1073741824,-1,!1));e.A(new E(2147483648,1073741824,-1,!1));e.A(new E(3221225472,1073741824,-1,!1));L(8,[34,3]);ra=ua;ra+=sa}},vb:{name:"MIPS32r6 generic",H:2,description:"MIPS32 release 6 system with 4 GB memory and no other I/O devices",P:function(e){e.R();e.A(new E(0,1073741824,-1,!1));e.A(new E(1073741824,1073741824,-1,!1));e.A(new E(2147483648,1073741824,-1,!1));e.A(new E(3221225472,1073741824,
-1,!1))}},wb:{name:"MIPS32r6 SPIM",H:2,description:"MIPS32 release 6 system with 4 GB memory, some SPIM/MARS syscalls, and a SPIM-compatible terminal I/O device",P:function(e){e.A(new D(4294901760,16,0));e.R();e.A(new E(0,1073741824,-1,!1));e.A(new E(1073741824,1073741824,-1,!1));e.A(new E(2147483648,1073741824,-1,!1));e.A(new E(3221225472,1073741824,-1,!1));L(8,[34,2]);ra+=sa}},xb:{name:"MIPS32r6 (no delay slots) generic",H:2,description:"MIPS32 release 6 system with branch delay slots disabled, with 4 GB memory, and no other I/O devices",
P:function(e){e.R();e.A(new E(0,1073741824,-1,!1));e.A(new E(1073741824,1073741824,-1,!1));e.A(new E(2147483648,1073741824,-1,!1));e.A(new E(3221225472,1073741824,-1,!1));L(8,[34,1]);ra=ua}},yb:{name:"MIPS32r6 (no delay slots) SPIM",H:2,description:"MIPS32 release 6 system with branch delay slots disabled, with 4 GB memory, some SPIM/MARS syscalls, and a SPIM-compatible terminal I/O device",P:function(e){e.A(new D(4294901760,16,0));e.R();e.A(new E(0,1073741824,-1,!1));e.A(new E(1073741824,1073741824,
-1,!1));e.A(new E(2147483648,1073741824,-1,!1));e.A(new E(3221225472,1073741824,-1,!1));L(8,[34,3]);ra=ua;ra+=sa}},hb:{name:"RISC-V RV32",H:4,description:"RISC-V RV32 system with 4 GB of memory",P:function(e){e.R();e.A(new d("aclint_swi",4280295696,4,3));e.A(new E(0,1073741824,-1,!1));e.A(new E(1073741824,1073741824,-1,!1));e.A(new E(2147483648,1073741824,-1,!1));e.A(new E(3221225472,1073741824,-1,!1))},hide:!1},Lb:{name:"RISC-V RV32 SPIM",H:4,description:"RISC-V RV32 system with 4 GB of memory, SPIM system calls, and a SPIM-compatible terminal I/O device",
P:function(e){e.A(new D(4294901760,16,24));J.L.hb.P(e);L(8,[35,4])}},Kb:{name:"RISC-V DE1-SoC",H:4,description:"RISC-V RV32 system with DE1-SoC devices",P:function(e){var y,x;e.A(new E(0,67108864,-1,!1));e.R();e.A(new f(4280287232,0,-1,10));e.A(new g(4280287296,16,-1,"switch",10));e.A(new g(4280287312,16,18,"button",4));e.A(y=new q(4280287264,16,-1,!1,6,!1));e.A(x=new q(4280287280,16,-1,!0,6,!1));for(var l=0;4>l;l++)x.C[l]=y.C[l+4];e.A(new Q(4280291328,8,24));e.A(new w(4280295680,16,7,1E5));e.A(new d("aclint_swi",
4280295696,48,3));e.A(new h(4280295424,16,16));e.A(new h(4280295456,16,17));e.ua(134217728,245760,262144,4280299552,150994944,4280299568);e.A(new c(4280287328,0,27));e.A(new g(4280287344,16,28,"gpio",32));if("undefined"===typeof AudioContext)U("<b>Audio device</b> not supported: browser does not support Web Audio");else try{var p=new Y(4280299584,16,21,J.L.Aa(8E3));e.A(p)}catch(m){U('<b>Audio device</b>: Error creating audio device: "'+m.toString()+'"')}e.A(new E(1073741824,1073741824,-1,!1));e.A(new M(4280287488,
8,22));e.A(new M(4280287496,8,23));e.A(new S(4280299616,16,-1,134217728));e.A(new qa(4280303616,32,-1));L(8,[34,1073746208]);L(8,[35,2]);va[0].H="rv32imf";va[1].H="rv32imf-gcc"},hide:!1}}};J.ba=[["nios",J.L.Db],["nios-de1soc",J.L.Gb],["nios-de2-115",J.L.Ib],["nios-de2",J.L.Hb],["nios-de0",J.L.Eb],["nios-de10-lite",J.L.Fb],["arm",J.L.ob],["arm-de1soc",J.L.pb],["mipsr5",J.L.zb],["mipsr5-spim",J.L.Ab],["mipsr5b",J.L.Bb],["mipsr5b-spim",J.L.Cb],["mipsr6",J.L.vb],["mipsr6-spim",J.L.wb],["mipsr6b",J.L.xb],
["mipsr6b-spim",J.L.yb],["rv32",J.L.hb],["rv32-spim",J.L.Lb],["rv32-de1soc",J.L.Kb]];J.Ya={mips:"mipsr6","mips-spim":"mipsr6-spim",mipsb:"mipsr6b","mipsb-spim":"mipsr6b-spim"};J.ta={};for(var ma=0;ma<J.ba.length;ma++)J.ta[J.ba[ma][0]]=J.ba[ma][1]})();aa.loaded(4);function wa(){function b(h,w){"undefined"===typeof w?w={Ka:!1}:"object"!==typeof w&&(console.warn("Deprecated: Expected third argument to be a object"),w={Ka:!w});return w.Ka&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob([String.fromCharCode(65279),h],{type:h.type}):h}function a(h,w,v){var C=new XMLHttpRequest;C.open("GET",h);C.responseType="blob";C.onload=function(){q(C.response,w,v)};C.onerror=function(){console.error("could not download file")};
C.send()}function d(h){var w=new XMLHttpRequest;w.open("HEAD",h,!1);try{w.send()}catch(v){}return 200<=w.status&&299>=w.status}function c(h){try{h.dispatchEvent(new MouseEvent("click"))}catch(v){var w=document.createEvent("MouseEvents");w.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null);h.dispatchEvent(w)}}var f="object"===typeof window&&window.window===window?window:"object"===typeof self&&self.self===self?self:"object"===typeof global&&global.global===global?global:void 0,g=/Macintosh/.test(navigator.userAgent)&&
/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),q=f.Oa||("object"!==typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!g?function(h,w,v){var C=f.URL||f.webkitURL,I=document.createElement("a");w=w||h.name||"download";I.download=w;I.rel="noopener";"string"===typeof h?(I.href=h,I.origin!==location.origin?d(I.href)?a(h,w,v):c(I,I.target="_blank"):c(I)):(I.href=C.createObjectURL(h),setTimeout(function(){C.revokeObjectURL(I.href)},4E4),setTimeout(function(){c(I)},
0))}:"msSaveOrOpenBlob"in navigator?function(h,w,v){w=w||h.name||"download";if("string"===typeof h)if(d(h))a(h,w,v);else{var C=document.createElement("a");C.href=h;C.target="_blank";setTimeout(function(){c(C)})}else navigator.msSaveOrOpenBlob(b(h,v),w)}:function(h,w,v,C){if(C=C||window.open("","_blank"))C.document.title=C.document.body.innerText="downloading...";if("string"===typeof h)return a(h,w,v);w="application/octet-stream"===h.type;v=/constructor/i.test(f.HTMLElement)||f.Xb;var I=/CriOS\/[\d]+/.test(navigator.userAgent);
if((I||w&&v||g)&&"undefined"!==typeof FileReader){var Q=new FileReader;Q.onloadend=function(){var E=Q.result;E=I?E:E.replace(/^data:[^;]*;/,"data:attachment/file;");C?C.location.href=E:location=E;C=null};Q.readAsDataURL(h)}else{var D=f.URL||f.webkitURL,M=D.createObjectURL(h);C?C.location=M:location.href=M;C=null;setTimeout(function(){D.revokeObjectURL(M)},4E4)}});f.Oa=q.Oa=q;"undefined"!==typeof module&&(module.exports=q)}
"function"===typeof define&&define.Sb?define([],wa):"undefined"!==typeof exports?wa():(wa(),this.FileSaver={});Object.entries||(Object.entries=function(b){for(var a=Object.keys(b),d=a.length,c=Array(d);d--;)c[d]=[a[d],b[a[d]]];return c});String.prototype.repeat||(String.prototype.repeat=function(b){if(1>b)return"";for(var a="",d=this.valueOf();1<b;)b&1&&(a+=d),b>>>=1,d+=d;return a+d});
(function(b){function a(d,c){c=c||{bubbles:!1,cancelable:!1};var f=document.createEvent("MouseEvent");f.initMouseEvent(d,c.bubbles,c.cancelable,b,0,0,0,0,0,!1,!1,!1,!1,0,null);return f}try{return new a("test"),!1}catch(d){}a.prototype=Event.prototype;b.MouseEvent=a})(window);
(function(){0=="performance"in window&&(window.performance={});Date.now=Date.now||function(){return(new Date).getTime()};if(0=="now"in window.performance){var b=Date.now();performance.timing&&performance.timing.navigationStart&&(b=performance.timing.navigationStart);window.performance.now=function(){return Date.now()-b}}})();function xa(b){var a=!1;this.trigger=function(){a||(a=!0,window.requestAnimationFrame(function(){a=!1;b()}))}}
function K(b,a){if(void 0===a||null===a)a=8;return("00000000"+(b>>>0).toString(16)).substr(-a)}var za=[];function Aa(b){return[2,2,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1][b&15]}var Ba=null,ra=".global _start\n_start:\n\t\n\t",va=null;
function Ca(){var b=P.arch;Ba=P.queries.sys;if(0==b)Da="Nios II",Ea="nios2",Fa=[{name:"gas",architecture:Ea},{name:"clike"}],va=[{name:"Nios II",code:"asm",H:0,ha:".s"},{name:"C",code:"c",H:16,ha:".c",$a:32992}],W=[[["pc",32,16],["r0",0,0],["r1",1,0],["r2",2,0],["r3",3,0],["r4",4,0],["r5",5,0],["r6",6,0],["r7",7,0],["r8",8,0],["r9",9,0],["r10",10,0],["r11",11,0],["r12",12,0],["r13",13,0],["r14",14,0],["r15",15,0],["r16",16,0],["r17",17,0],["r18",18,0],["r19",19,0],["r20",20,0],["r21",21,0],["r22",
22,0],["r23",23,0],["et",24,0],["bt",25,0],["gp",26,0],["sp",27,0],["fp",28,0],["ea",29,0],["sstatus",30,0],["ra",31,16],["status",64,0],["estatus",65,0],["bstatus",66,0],["ienable",67,0],["ipending",68,0]]],Ga="r0 r1 r2 r3 r4 r5 r6 r7 r8 r9 r10 r11 r12 r13 r14 r15 r16 r17 r18 r19 r20 r21 r22 r23 r24 r25 r26 r27 r28 r29 r31 r31 et bt gp sp fp ea sstatus ra pc".split(" "),Ha=[{text:"Infinite loop",href:"?sys=nios&loadasm=samples/nios/loop.s"},{text:"Audio output test",href:"?sys=nios-de1soc&loadasm=samples/nios/squarewave.s"},
{text:"Audio loopback test",href:"?sys=nios-de1soc&loadasm=samples/nios/audio_loopback.s"},{text:"VGA test",href:"?sys=nios-de1soc&loadasm=samples/nios/vgatest.s"},{text:"Video input test",href:"?sys=nios-de1soc&loadasm=samples/nios/videoin.s"}],Ia=["pc","ra","ea"],Ja=["sp"],Ka={17:null},za=[".align",".byte",".data|<tt>.section .data</tt>",".equ|Set a symbol to a constant value",".global|Make a symbol globally visible",".hword",".section",'.section .exceptions, "ax"',".skip|Insert some number of bytes",
".string|Null-terminated string",".text|<tt>.section .text</tt>",".word","add|reg &larr; reg + reg","addi|reg &larr; reg + imm16s","and","andhi|reg &larr; reg & {imm16, 16'h0}","andi|reg &larr; reg & {16'h0, imm16}","beq|equal","bge|greater or equal","bgeu|greater or equal unsigned","bgt|greater than","bgtu|greater than unsigned","ble|less or equal","bleu|less or equal unsigned","blt|less than","bltu|less than unsigned","bne|not equal","br|unconditional branch","break","bret","call|Call function (pc &larr; imm26)",
"callr|Call function (pc &larr; reg)","cmpeq|equal","cmpeqi|equal imm16s","cmpge|greater or equal","cmpgei|greater or equal imm16s","cmpgeu|greater or equal","cmpgeui|greater or equal imm16u","cmpgt|greater than","cmpgti|greater than imm16s","cmpgtu|greater than unsigned","cmpgtui|greater than unsigned imm16u","cmple|less or equal","cmplei|less or equal imm16s","cmpleu|less or equal unsigned","cmpleui|less or equal unsigned imm16u","cmplt|less than","cmplti|less than imm16s","cmpltu|less than unsigned",
"cmpltui|less than unsigned imm16u","cmpne|not equal","cmpnei|not equal imm16s","custom","div","divu","eret|Branch to <tt>ea</tt>","flushd","flushda","flushi","flushp","initd","initda","initi","jmp|pc &larr; reg","jmpi|pc &larr; imm26","ldb|Load (reg &larr; mem) byte (signed)","ldbio|Load (reg &larr; mem) byte (signed) for I/O","ldbu|Load (reg &larr; mem) byte (unsigned)","ldbuio|Load (reg &larr; mem) byte (unsigned) for I/O","ldh|Load (reg &larr; mem) half-word (signed)","ldhio|Load (reg &larr; mem) half-word (signed) for I/O",
"ldhu|Load (reg &larr; mem) half-word (unsigned)","ldhuio|Load (reg &larr; mem) half-word (unsigned) for I/O","ldw|Load (reg &larr; mem) word","ldwio|Load (reg &larr; mem) word for I/O","mov|Move reg &larr; reg","movhi|Move reg &larr; {imm16, 16'h0}","movi|Move reg &larr; imm16s","movia|Move reg &larr; imm32","movui|Move reg &larr; imm16u","mul|reg &larr; reg &times; reg","muli|reg &larr; reg &times imm16s","mulxss","mulxsu","mulxuu","nextpc|reg &larr; pc+4","nop","nor","or","orhi|reg &larr; reg | {imm16, 16'h0}",
"ori|reg &larr; reg | {16'h0, imm16}","rdctl|reg &larr; control-reg","rdprs","ret|Branch to <tt>ra</tt>","rol|Rotate left","roli|Rotate left by imm5","ror|Rotate right","sll|Shift left logical","slli|Shift left logical by imm5","sra|Shift right arithmetic","srai|Shift right arithmetic by imm5","srl|Shift right logical","srli|Shift right logical by imm5","stb|Store (reg &rarr; mem) byte","stbio|Store (reg &rarr; mem) byte for I/O","sth|Store (reg &rarr; mem) half-word","sthio|Store (reg &rarr; mem) half-word for I/O",
"stw|Store (reg &rarr; mem) word","stwio|Store word for I/O","sub|reg &larr; reg - reg","subi|reg &larr; reg - imm16s","sync","trap|Software interrupt","wrctl|control-reg &larr; reg","wrprs","xor","xorhi|reg &larr; reg ^ {imm16, 16'h0}","xori|reg &larr; reg ^ {16'h0, imm16}"];else if(1==b){Da="ARMv7";Ea="arm";Fa=[{name:"gas",architecture:Ea},{name:"clike"}];va=[{name:"ARMv7",code:"asm",H:1,ha:".s"},{name:"C",code:"c",H:17,ha:".c",$a:32992}];La=function(d){function c(g,q){return'<span class="'+(q?
"on":"off")+'">'+g+"</span>"}let f="&nbsp;?&nbsp;";switch(d&31){case 16:f="USR";break;case 17:f="FIQ";break;case 18:f="IRQ";break;case 19:f="SVC";break;case 22:f="MON";break;case 23:f="ABT";break;case 26:f="HPY";break;case 27:f="UND";break;case 31:f="SYS"}return c("N",d>>31&1)+c("Z",d>>30&1)+c("C",d>>29&1)+c("V",d>>28&1)+c("I",d>>7&1)+" "+f};W=[[["r0",0,0],["r1",1,0],["r2",2,0],["r3",3,0],["r4",4,0],["r5",5,0],["r6",6,0],["r7",7,0],["r8",8,0],["r9",9,0],["r10",10,0],["r11",11,0],["r12",12,0],["sp",
13,0],["lr",14,0],["pc",15,16],["cpsr",64,0,La],["spsr",65,0,La]],[],[]];b=96;for(var a=0;128>b;++b,++a)W[1].push(["s"+a,b,1]);b=96;for(a=0;160>b;b+=2,++a)W[2].push(["d"+a,b,2]);Ga="r0 r1 r2 r3 r4 r5 r6 r7 r8 r9 r10 r11 r12 r13 r14 r15 sp lr pc".split(" ");Ha=[{text:"Infinite loop",href:"?sys=arm&loadasm=samples/arm/loop.s"},{text:"Audio output test",href:"?sys=arm-de1soc&loadasm=samples/arm/squarewave.s"},{text:"Audio loopback test",href:"?sys=arm-de1soc&loadasm=samples/arm/audio_loopback.s"},{text:"VGA test",
href:"?sys=arm-de1soc&loadasm=samples/arm/vgatest.s"},{text:"Video input test",href:"?sys=arm-de1soc&loadasm=samples/arm/videoin.s"}];Ia=["pc","lr"];Ja=["sp"];Ka={12:null,6:{Fa:"Function clobbered sp, or bad return",ia:"Checks if <tt>sp</tt> was modified at the end of a function, and also checks the return address. A function that modifies sp or returns to the wrong location is almost never the intended behaviour."},4:{Fa:"Interrupt clobbered sp or spsr, or bad return",ia:"This checks whether sp or spsr were modified by the interrupt handler. It also checks the interrupt return address."},
14:{ia:"Interrupts should not clobber any registers except those that are banked (r13&ndash;r15). This assertion checks if an interrupt handler modified any registers it shouldn't."},17:null};za='.align{.byte{.data|<tt>.section .data</tt>{.equ|Set a symbol to a constant value{.global|Make a symbol globally visible{.hword{.section{.section .vectors, "ax"{.skip|Insert some number of bytes{.string|Null-terminated string{.syntax divided|Use ARM divided syntax (default){.syntax unified|Use ARM unified syntax{.text|<tt>.section .text</tt>{.word{adc|Add with carry{adcs{add{adds{adr{adrl{and{ands{asr|Arithmetic shift right{asrs{b|unconditional (same as: bal){beq|equal{bne|not equal{bcs|carry set (same as: bhs){bhs|unsigned higher or same (same as: bcs){bcc|carry clear (same as: blo){blo|unsigned lower (same as: bcc){bmi|minus (negative){bpl|plus (non-negative){bvs|overflow (overflow set){bvc|no overflow (overflow clear){bhi|unsigned igher{bls|unsigned lower or same{bge|signed greater or equal{blt|signed less than{bgt|signed greater than{ble|signed less or equal{bal|always (same as: b){bfc|Bit field clear{bfi|Bit field invert{bic|Bitwise bit clear{bics{bkpt{bl|Branch with link (function call){blx|BL and exchange instruction set (ARM &harr; Thumb){bx|Branch to register{bx lr|Return from function{cdp{cdp2{clrex{clz|Count leading zeros{cmn|Compare negative{cmp|Compare{cps{cpsid{cpsie{eor|Exclusive OR{eors{ldc{ldc2{ldc2l{ldcl{ldm|Load multiple (same as: ldmia, ldmfd){ldmia|LDM increment after(same as: ldm, ldmfd){ldmfd|LDM full descending (same as: ldm, ldmia){ldmda|LDM decrement after (same as: ldmfa){ldmfa|LDM full ascending (same as: ldmda){ldmdb|LDM decrement before (same as: ldmea){ldmea|LDM empty ascending (same as: ldmdb){ldmib|LDM increment before (same as: ldmed){ldmed|LDM empty descending (same as: ldmib){ldr|Load register word{ldrb|Load register unsigned byte{ldrbt{ldrd|Load register dual (8-byte){ldrex{ldrexb{ldrexd{ldrexh{ldrh|Load register unsigned half-word{ldrht{ldrsb|Load register signed byte{ldrsbt{ldrsh|Load register signed half-word{ldrsht{ldrt{lsl|Logical shift left{lsls{lsr|Logical shift right{lsrs{mcr{mcr2{mcrr{mcrr2{mla|Multiply accumulate{mlas{mls|Multiply and subtract{mov|Move (reg &larr; reg/imm){mov pc, lr|Return from function{movs{movt{movw|Move (reg &larr; imm16u){mrc{mrc2{mrrc{mrrc2{mrs{msr{mul{muls{mvn|Bitwise not{mvns{neg{negs{nop{orr|Bitwise OR{orrs{pkhbt{pkhtb{pop{push{qadd{qadd16{qadd8{qasx{qdadd{qdsub{qsax{qsub{qsub16{qsub8{rbit|Reverse bit order{rev|Reverse byte order{rev16{revsh{rfe{rfeda{rfedb{rfeea{rfeed{rfefa{rfefd{rfeia{rfeib{ror|Rotate right{rors{rrx{rrxs{rsb|Reverse subtract{rsbs{rsc|Reverse subtract with carry{rscs{sadd16{sadd8{sasx{sbc|Subtract with carry{sbcs{sbfx{sdiv|Not implemented on the Cortex-A9{sel{setend{sev{shadd16{shadd8{shasx{shsax{shsub16{shsub8{smlabb{smlabt{smlad{smladx{smlal{smlalbb{smlalbt{smlald{smlaldx{smlals{smlaltb{smlaltt{smlatb{smlatt{smlawb{smlawt{smlsd{smlsdx{smlsld{smlsldx{smmla{smmlar{smmls{smmlsr{smmul{smmulr{smuad{smuadx{smulbb{smulbt{smull{smulls{smultb{smultt{smulwb{smulwt{smusd{smusdx{srs{srsda{srsdb{srsea{srsed{srsfa{srsfd{srsia{srsib{ssat{ssat16{ssax{ssub16{ssub8{stc{stc2{stc2l{stcl{stm|Store multiple (same as: stmia, stmea){stmia|STM increment after (same as: stm, stmea){stmea|STM empty ascending (same as: stm, stmia){stmda|STM decrement after (same as: stmed){stmed|STM empty descending (same as: stmda){stmdb|STM decrement before (same as: stmfd){stmfd|STM full descending (same as: stmdb){stmib|STM increment before (same as: stmfa){stmfa|STM full ascending (same as: stmib){str|Store register word{strb|Store register byte{strbt{strd|Store register dual (8-byte){strex{strexb{strexd{strexh{strh|Store register half-word{strht{strt{sub{subs{svc|Supervisor call (same as: swi){swi|Software interrupt (same as: svc){swp{swpb{sxtab{sxtab16{sxtah{sxtb{sxtb16{sxth{teq|Test equivalence (bitwise XOR){tst|Test (bitwise AND){uadd16{uadd8{uasx{ubfx{udf|Undefined instruction{udiv|Not implemented on the Cortex-A9{uhadd16{uhadd8{uhasx{uhsax{uhsub16{uhsub8{umaal{umlal{umlals{umull{umulls{uqadd16{uqadd8{uqasx{uqsax{uqsub16{uqsub8{usad8{usada8{usat{usat16{usax{usub16{usub8{uxtab{uxtab16{uxtah{uxtb{uxtb16{uxth{wfe{wfi{yield{vabs{vadd{vcmp{vcmpe{vcvt{vcvtb{vcvtr{vcvtt{vcvtz{vdiv{vfma{vfms{vfnma{vfnms{vldm|Vector load multiple (same as: vldmia){vldmdb|VLDM decrement before{vldmia|VLDM increment after (same as: vldm){vldr|Vector load register{vmla{vmls{vmov{vmovq{vmul{vneg{vnmla{vnmls{vnmul{vpop{vpush{vsqrt{vstm|Vector store multiple (same as: vstmia){vstmdb|VSTM decrement before{vstmia|VSTM increment after (same as: vstm){vstr|Vector store register{vsub'.split("{")}else if(2==
b||3==b)if(Ea="mips",Fa=[{name:"gas",architecture:Ea},{name:"clike"}],Ga="$0 $1 $2 $3 $4 $5 $6 $7 $8 $9 $10 $11 $12 $13 $14 $15 $16 $17 $18 $19 $20 $21 $22 $23 $24 $25 $26 $27 $28 $29 $31 $31 $zero $at $v0 $v1 $a0 $a1 $a2 $a3 $t0 $t1 $t2 $t3 $t4 $t5 $t6 $t7 $s0 $s1 $s2 $s3 $s4 $s5 $s6 $s7 $t8 $t9 $k0 $k1 $gp $sp $fp $ra pc cp0_epc cp0_ebase".split(" "),Ia=["pc","$ra"],Ja=["$sp"],Ka={12:null,4:{Fa:"Interrupt clobbered ra or sp, or bad cp0_epc",ia:"Interrupts may not clobber any registers except <tt>k0</tt> and <tt>k1</tt>, but the registers checked here are particularly critical. This also checks if <tt>c0_epc</tt> is correct (unmodified for interrupts, incremented by 4 for exceptions)."},
14:{ia:"Interrupts should not clobber any registers except <tt>k0</tt> and <tt>k1</tt>. This assertion checks if an interrupt handler modified any registers it shouldn't."}},ra="# Use .set noreorder to prevent the assembler from filling branch\n# delay slots, if you want to fill delay slots manually.\n# .set noreorder\n\n.global _start\n_start:\n\t",ua="# Tell assembler to not insert instructions to fill branch delay slots.\n# This is necessary when branch delay slots are disabled.\n.set noreorder\n\n.global _start\n_start:\n\t",
sa="jal main\n\tli $v0, 10\n\tsyscall\t\t# Use syscall 10 to stop simulation\n\nmain:\n\t",2==b){Da="MIPS32r6";va=[{name:"MIPS32r6",code:"asm",H:2,ha:".s"}];W=[[["pc",32,16],["$zero $0",0,0],["$at $1",1,0],["$v0 $2",2,0],["$v1 $3",3,0],["$a0 $4",4,0],["$a1 $5",5,0],["$a2 $6",6,0],["$a3 $7",7,0],["$t0 $8",8,0],["$t1 $9",9,0],["$t2 $10",10,0],["$t3 $11",11,0],["$t4 $12",12,0],["$t5 $13",13,0],["$t6 $14",14,0],["$t7 $15",15,0],["$s0 $16",16,0],["$s1 $17",17,0],["$s2 $18",18,0],["$s3 $19",19,0],["$s4 $20",
20,0],["$s5 $21",21,0],["$s6 $22",22,0],["$s7 $23",23,0],["$t8 $24",24,0],["$t9 $25",25,0],["$k0 $26",26,0],["$k1 $27",27,0],["$gp $28",28,0],["$sp $29",29,0],["$fp $30",30,0],["$ra $31",31,16],["cp0_status",64,0],["cp0_cause",65,0],["cp0_epc",66,0],["cp0_ebase",67,16],["cp1 fir",192,0],["cp1 fcsr",193,0]],[],[]];b=96;for(a=0;128>b;b++,++a)W[1].push(["$f"+a+".s",b,1]);b=128;for(a=0;192>b;b+=2,++a)W[2].push(["$f"+a+".d",b,2]);Ha=[{text:"Infinite loop",href:"?sys=mipsr6&loadasm=samples/mips32r6/loop.s"},
{text:"Function call",href:"?sys=mipsr6&loadasm=samples/mips32r6/func.s"},{text:"SPIM/MARS syscalls",href:"?sys=mipsr6-spim&loadasm=samples/mips32r6/syscalls.s"}];za="add|Add (overflow exception){addu|Add (no exceptions){addiu|Add imm16 (no exceptions){addiupc|pc + immediate{aluipc|pc + immediate (64K-aligned){align{and{andi{aui|Add immediate, upper{auipc|pc + immediate, upper{b|Branch (delayed){bc|Branch{bal|Branch and link (delayed){balc|Branch and link{beq|rs = rt (delayed){bne|rs &ne; rt (delayed){bgez|&ge; 0 (delayed){bgtz|&gt; 0 (delayed){blez|&le; 0 (delayed){bltz|&lt; 0 (delayed){beqc|rs = rt{bnec|rs &ne; rt;{bgec|&ge;{bgeuc|&ge; (unsigned){bgtc|&gt;{bgtuc|&gt; (unsigned){blec|&le;{bleuc|&le; (unsigned){bltc|&lt;{bltuc|&lt; (unsigned){bnvc|branch no overflow{bovc|branch overflow{beqzc|= 0{bnezc|&ne; 0{bgezc|&ge; 0{bgtzc|&gt; 0{blezc|&le; 0{bltzc|&lt; 0{beqzalc|= 0 and link{bnezalc|&ne; 0 and link{bgezalc|&ge; 0 and link{bgtzalc|&gt; 0 and link{blezalc|&le; 0 and link{bltzalc|&lt; 0 and link{bitswap{break{clo|Count leading ones{clz|Count leading zeros{crc32b{crc32h{crc32w{crc32cb{crc32ch{crc32cw{div|Divide (signed){mod|Modulo (signed){divu|Divide (unsigned){modu|Modulo (unsigned){di|Disable interrupts{ei|Enable interrupts{eret|Exception return{eretnc{ext|Extract bit field{ins|Insert bit field{j|Deprecated: Use <tt>bc</tt>{jal|Deprecated: Use <tt>balc</tt>{jr|Jump register (delayed){jrc|Jump register{jic|Jump indexed{jalr|Jump and link register (delayed){jalrc|Jump and link register{jialc|Jump indexed and link{lapc|reg &larr; label{li|reg &larr; imm32{la|reg &larr; imm32{lb|Load byte{lbu|Load byte (unsigned){lh|Load half-word{lhu|Load half-word (unsigned){lw|Load word{lwpc|Load word, pc-relative{ll|Load linked (used with sc){lsa|Load scaled address{lui|Load upper immediate{move|Move reg &larr; reg{mfc0|Move from coprocessor 0{mfhc0|Move from coprocessor 0 high{mtc0|Move to coprocessor 0{mthc0|Move to coprocessor 0 high{nop{nor{or{ori{rdhwr{rotr|Rotate right{rotrv|Rotate right, variable{sb|Store byte{sh|Store half-word{sw|Store word{sc|Store conditional (used with ll){seb|Sign-extend byte{seh|Sign-extend half-word{seleqz|Select if = 0{selnez|Select if &ne; 0{seq|Set ={sne|Set &ne;{sge|Set &ge;{sgeu|Set &ge; (unsigned){sgt|Set &gt;{sgtu|Set &gt; (unsigned){sle|Set &le;{sleu|Set &le; (unsigned){slt|Set &lt;{sltu|Set &lt; (unsigned){slti|Set &lt; immediate{sltiu|Set &lt; immediate (unsigned){sll|Shift left{sllv|Shift left, variable{sra|Shift right arithmetic{srav|Shift right arithmetic, variable{srl|Shift right logical{srlv|Shift right logical, variable{sub|Subtract (overflow exception){subu|Subtract (no exceptions){syscall{teq|Trap ={tne|Trap &ne;{tge|Trap &ge;{tgeu|Trap &ge; (unsigned){tlt|Trap &lt;{tltu|Trap &lt; (unsigned){wait{wsbh{xor{xori{abs.|FP abs{add.|FP add{bc1eqz{bc1nez{ceil.l.{ceil.w.{cfc1{class.{cmp.af.|FP compare false{cmp.un.|FP compare unordered{cmp.eq.|FP compare ={cmp.ueq.|FP compare unordered or ={cmp.lt.|FP compare ordered &lt;{cmp.ult.|FP compare unordered or &lt;{cmp.le.|FP compare ordered &le;{cmp.ule.|FP compare unordered or &le;{cmp.or.|FP compare ordered{cmp.une.|FP compare unordered or &ne;{cmp.ne.|FP compare ordered &ne;{ctc1{cvt.d.{cvt.l.{cvt.s.{cvt.w.{div.|FP div{floor.l.{floor.w.{ldc1|Load double word to FPU{lwc1|Load word to FPU{maddf.|FP multiply-add{msubf.|FP multiply-subtract{max.|FP max{maxa.|FP max absolute{min.|FP min{mina.|FP min absolute{mfc1|Move from FPU{mfhc1|Move upper word from FPU{mov.|FP move{mtc1|Move to FPU{mthc1|Move to FPU upper word{recip.{rint.{round.l.{round.w.{rsqrt.{sdc1|Store FPU double word{sel.|FP select{seleqz.|FP select{selnez.|FP select{sqrt.{sub.|FP subtract{sdc1|Store FPU double word{swc1|Store FPU word{trunc.l.{trunc.w.".split("{")}else{if(3==
b){Da="MIPS32r5";va=[{name:"MIPS32r5",code:"asm",H:3,ha:".s"}];W=[[["pc",32,16],["$zero $0",0,0],["$at $1",1,0],["$v0 $2",2,0],["$v1 $3",3,0],["$a0 $4",4,0],["$a1 $5",5,0],["$a2 $6",6,0],["$a3 $7",7,0],["$t0 $8",8,0],["$t1 $9",9,0],["$t2 $10",10,0],["$t3 $11",11,0],["$t4 $12",12,0],["$t5 $13",13,0],["$t6 $14",14,0],["$t7 $15",15,0],["$s0 $16",16,0],["$s1 $17",17,0],["$s2 $18",18,0],["$s3 $19",19,0],["$s4 $20",20,0],["$s5 $21",21,0],["$s6 $22",22,0],["$s7 $23",23,0],["$t8 $24",24,0],["$t9 $25",25,
0],["$k0 $26",26,0],["$k1 $27",27,0],["$gp $28",28,0],["$sp $29",29,0],["$fp $30",30,0],["$ra $31",31,16],["hi",36,0],["lo",35,16],["cp0_status",64,0],["cp0_cause",65,0],["cp0_epc",66,0],["cp0_ebase",67,16],["cp1 fir",192,0],["cp1 fcsr",193,0]],[],[]];b=96;for(a=0;128>b;b++,++a)W[1].push(["$f"+a+".s",b,1]);b=128;for(a=0;192>b;b+=2,++a)W[2].push(["$f"+a+".d",b,2]);Ha=[{text:"Infinite loop",href:"?sys=mipsr5&loadasm=samples/mips32r5/loop.s"},{text:"Function call",href:"?sys=mipsr5&loadasm=samples/mips32r5/func.s"},
{text:"SPIM/MARS syscalls",href:"?sys=mipsr5-spim&loadasm=samples/mips32r5/syscalls.s"},{text:"Enable 64-bit FPU",href:"?sys=mipsr5&loadasm=samples/mips32r5/fpu_64bitmode.s"}];za="add|Add (overflow exception){addu|Add (no exceptions){addi|Add imm16 (overflow exception){addiu|Add imm16 (no exceptions){and{andi{b|Branch{bal|Branch and link{beq|rs = rt{bne|rs &ne; rt{bgez|&ge; 0{bgezal|&ge; 0 and link{bgtz|&gt; 0{blez|&le; 0{bltz|&lt; 0{bltzal|&lt; 0 and link{break{clo|Count leading ones{clz|Count leading zeros{div|Divide (signed){divu|Divide (unsigned){di|Disable interrupts{ei|Enable interrupts{eret|Exception return{eretnc{ext|Extract bit field{ins|Insert bit field{j|Jump{jal|Jump and link{jr|Jump register{jalr|Jump and link register{li|reg &larr; imm32{la|reg &larr; imm32{lb|Load byte{lbu|Load byte (unsigned){lh|Load half-word{lhu|Load half-word (unsigned){lw|Load word{lwl|Load (unaligned) word left{lwr|Load (unaligned) word right{ll|Load linked (used with sc){lui|Load upper immediate{madd|Multiply add{maddu|Multiply add unsigned{msub|Multiply subtract{msubu|Multiply subtract unsigned{mflo|Move from LO &rarr; reg{mfhi|Move from HI &rarr; reg{mtlo|Move to LO &larr; reg{mthi|Move to HI &larr; reg{move|Move reg &larr; reg{movn|Move conditional if not 0{movz|Move conditional if 0{mul|Multiply 32-bit{mult|Multiply 64-bit{multu|Multiply 64-bit unsigned{mfc0|Move from coprocessor 0{mfhc0|Move from coprocessor 0 high{mtc0|Move to coprocessor 0{mthc0|Move to coprocessor 0 high{nop{nor{or{ori{rdhwr{rotr|Rotate right{rotrv|Rotate right, variable{sb|Store byte{sh|Store half-word{sw|Store word{swl|Store (unaligned) word left{swr|Store (unaligned) word right{sc|Store conditional (used with ll){seb|Sign-extend byte{seh|Sign-extend half-word{seq|Set ={sne|Set &ne;{sge|Set &ge;{sgeu|Set &ge; (unsigned){sgt|Set &gt;{sgtu|Set &gt; (unsigned){sle|Set &le;{sleu|Set &le; (unsigned){slt|Set &lt;{sltu|Set &lt; (unsigned){slti|Set &lt; immediate{sltiu|Set &lt; immediate (unsigned){sll|Shift left{sllv|Shift left, variable{sra|Shift right arithmetic{srav|Shift right arithmetic, variable{srl|Shift right logical{srlv|Shift right logical, variable{sub|Subtract (overflow exception){subu|Subtract (no exceptions){syscall{teq|Trap ={tne|Trap &ne;{tge|Trap &ge;{tgeu|Trap &ge; (unsigned){tlt|Trap &lt;{tltu|Trap &lt; (unsigned){teqi|Trap = imm16{tnei|Trap &ne; imm16{tgei|Trap &ge; imm16{tgeiu|Trap &ge; imm16 (unsigned){tlti|Trap &lt; imm16{tltiu|Trap &lt; imm16 (unsigned){wait{wsbh{xor{xori{abs.|FP abs{add.|FP add{bc1f|Branch if FP cc false{bc1t|Branch if FP cc true{ceil.l.{ceil.w.{cfc1{c.f.|FP compare false{c.un.|FP compare unordered{c.eq.|FP compare ={c.ueq.|FP compare unordered or ={c.olt.|FP compare ordered &lt;{c.ult.|FP compare unordered or &lt;{c.ole.|FP compare ordered &le;{c.ule.|FP compare unordered or &le;{ctc1{cvt.d.{cvt.l.{cvt.s.{cvt.w.{cvt.ps.s{div.|FP div{floor.l.{floor.w.{ldc1|Load double word to FPU{lwc1|Load word to FPU{ldxc1|Load double word to FPU, indexed{lwxc1|Load word to FPU, indexed{madd.|FP multiply-add{msub.|FP multiply-subtract{nmadd.|FP neg. multiply-add{nmsub.|FP neg. multiply-subtract{mfc1|Move from FPU{mfhc1|Move upper word from FPU{mov.|FP move{movf.|FP cond. move{movt.|FP cond. move{movn.|FP cond. move GPR != 0{movz.|FP cond. move GPR = 0{mtc1|Move to FPU{mthc1|Move to FPU upper word{pll.ps{plu.ps{pul.ps{puu.ps{recip.{round.l.{round.w.{rsqrt.{sdc1|Store FPU double word{sqrt.{sub.|FP subtract{sdc1|Store FPU double word{swc1|Store FPU word{sdxc1|Store FPU double word, indexed{swxc1|Store FPU word, indexed{trunc.l.{trunc.w.".split("{")}}else if(4==
b)Da="RISC-V RV32",Fa=[{name:"gas",architecture:Ea},{name:"clike"}],va=[{name:"RV32",code:"asm",H:"rv32imafd",ha:".s"},{name:"C",code:"c",H:"rv32imafd-gcc",ha:".c"}],W=[[["pc",32,16],["zero x0",0,0],["ra x1",1,0],["sp x2",2,0],["gp x3",3,0],["tp x4",4,0],["t0 x5",5,0],["t1 x6",6,0],["t2 x7",7,0],["s0 x8",8,0],["s1 x9",9,0],["a0 x10",10,0],["a1 x11",11,0],["a2 x12",12,0],["a3 x13",13,0],["a4 x14",14,0],["a5 x15",15,0],["a6 x16",16,0],["a7 x17",17,0],["s2 x18",18,0],["s3 x19",19,0],["s4 x20",20,0],
["s5 x21",21,0],["s6 x22",22,0],["s7 x23",23,0],["s8 x24",24,0],["s9 x25",25,0],["s10 x26",26,0],["s11 x27",27,0],["t3 x28",28,0],["t4 x29",29,0],["t5 x30",30,0],["t6 x31",31,16],["mstatus",72,0],["misa",73,0],["mie",76,0],["mtvec",77,0],["mepc",65,0],["mcause",66,0],["mtval",67,0],["mip",68,16],["fcsr",69,0]],[["ft0 f0.f",96,1],["ft1 f1.f",97,1],["ft2 f2.f",98,1],["ft3 f3.f",99,1],["ft4 f4.f",100,1],["ft5 f5.f",101,1],["ft6 f6.f",102,1],["ft7 f7.f",103,1],["fs0 f8.f",104,1],["fs1 f9.f",105,1],["fa0 f10.f",
106,1],["fa1 f11.f",107,1],["fa2 f12.f",108,1],["fa3 f13.f",109,1],["fa4 f14.f",110,1],["fa5 f15.f",111,1],["fa6 f16.f",112,1],["fa7 f17.f",113,1],["fs2 f18.f",114,1],["fs3 f19.f",115,1],["fs4 f20.f",116,1],["fs5 f21.f",117,1],["fs6 f22.f",118,1],["fs7 f23.f",119,1],["fs8 f24.f",120,1],["fs9 f25.f",121,1],["fs10 f26.f",122,1],["fs11 f27.f",123,1],["ft8 f28.f",124,1],["ft9 f29.f",125,1],["ft10 f30.f",126,1],["ft11 f31.f",127,17]],[["ft0 f0.d",96,2],["ft1 f1.d",98,2],["ft2 f2.d",100,2],["ft3 f3.d",
102,2],["ft4 f4.d",104,2],["ft5 f5.d",106,2],["ft6 f6.d",108,2],["ft7 f7.d",110,2],["fs0 f8.d",112,2],["fs1 f9.d",114,2],["fa0 f10.d",116,2],["fa1 f11.d",118,2],["fa2 f12.d",120,2],["fa3 f13.d",122,2],["fa4 f14.d",124,2],["fa5 f15.d",126,2],["fa6 f16.d",128,2],["fa7 f17.d",130,2],["fs2 f18.d",132,2],["fs3 f19.d",134,2],["fs4 f20.d",136,2],["fs5 f21.d",138,2],["fs6 f22.d",140,2],["fs7 f23.d",142,2],["fs8 f24.d",144,2],["fs9 f25.d",146,2],["fs10 f26.d",148,2],["fs11 f27.d",150,2],["ft8 f28.d",152,2],
["ft9 f29.d",154,2],["ft10 f30.d",156,2],["ft11 f31.d",158,18]]],Ga="x0 x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12 x13 x14 x15 x16 x17 x18 x19 x20 x21 x22 x23 x24 x25 x26 x27 x28 x29 x30 x31 zero ra sp gp tp t0 t1 t2 t3 t4 t5 t6 s0 s1 s2 s3 s4 s5 s6 s7 s8 s9 s10 s11 a0 a1 a2 a3 a4 a5 a6 a7 pc".split(" "),Ha=[{text:"Infinite loop",href:"?sys=rv32&loadasm=samples/rv32/loop.s"},{text:"Function call",href:"?sys=rv32&loadasm=samples/rv32/func.s"},{text:"Timer interrupt",href:"?sys=rv32&loadasm=samples/rv32/timer_interrupt.s"}],
Ia=["pc","ra"],Ja=["sp"],Ka={4:{Fa:"Interrupt clobbered sp, ra, or bad return",ia:"This checks whether sp or ra were modified by the interrupt handler. It also checks the interrupt return address (mepc)."},12:null,17:null,18:!0},za="add|Add{addi|Add immediate{amoswap.w|Atomic memory swap{amoadd.w|Atomic memory add{amomax.w|Atomic memory signed max{amomaxu.w|Atomic memory unsigned max{amomin.w|Atomic memory signed min{amominu.w|Atomic memory unsigned min{amoand.w|Atomic memory AND{amoor.w|Atomic memory OR{amoxor.w|Atomic memory XOR{and|Bitwise AND{andi|Bitwise AND immediate{auipc|Add upper immediate to pc{beq|Branch if equal{bne|Branch if not equal{blt|Branch if less than{bge|Branch if greater or equal{bltu|Branch if (unsigned) less than{bgeu|Branch if (unsigned) greater or equal{beqz|Branch if = zero{bnez|Branch if &ne; zero{bltz|Branch if &lt; zero{bgez|Branch if &ge; zero{call|Jump and link (function call){csrc|Control register clear bits{csrrc|Control register read and clear bits{csrci|Control register clear bits (5b immediate){csrrci|Control register read and clear bits (5b immediate){csrs|Control register set bits{csrrs|Control register read and set bits{csrsi|Control register set bits (5b immediate){csrrsi|Control register read and set bits (5b immediate){csrr|Control register read{csrw|Control register write{csrrw|Control register read and write{csrwi|Control register write (5b immediate){csrrwi|Control register read and write (5b immediate){div|Division (quotient){divu|Division, unsigned (quotient){ecall|Environment call (system call){ebreak|Environment break (debugger breakpoint){j|Unconditional jump (direct jump){jr|Jump register (indirect jump){jal|Jump and link (function call){jalr|Jump and link, register (indirect call){lb|Load byte{lh|Load half word (16b){lw|Load word (32b){lr.w|Load-reserved{lbu|Load byte, unsigned{lhu|Load half word, 16b unsigned{la|Move 32b immediate/symbol to register (pseudoinstruction){li|Move 12b immediate to register{lui|Move 20b immediate to register upper bits{mv|Move register to register{mret|Machine mode return (return from interrupt handler){mul|Multiply{mulh|Multiply high result (signed){mulhsu|Multiply high result (signed &times; unsigned){mulhu|Multiply high result (unsigned &times; unsigned){neg|Negate{nop|No operation{not|Bitwise inversion{or|Bitwise OR{ori|Bitwise OR immediate{rem|Division (remainder){remu|Division unsigned (remainder){sb|Store byte{sh|Store half word (16b){sw|Store word (32b){sc.w|Store-conditional{sll|Shift left logical{srl|Shift right logical{sra|Shift right arithmetic{slli|Shift left logical by immediate{srli|Shift right logical by immediate{srai|Shift right arithmetic by immediate{seqz|Set if = zero{snez|Set if &ne; zero{sltz|Set if &lt; zero{sgtz|Set if &gt; zero{slt|Set if less than{sltu|Set if unsigned less than{slti|Set if less than immediate{sltiu|Set if unsigned less than immediate{sub|Subtract{wfi|Wait for interrupt{xor|Bitwise XOR{xori|Bitwise XOR immediate".split("{");
else throw"Unknown architecture: "+b;}for(var sa,ua,Fa,Ea,Ia,Ja,Ka,W,Ha,Ga,Da,La,pa,Ma,Na,Ua,Va,Wa,Xa={},Ya=document.location.search.substr(1).split("&"),Za=0;Za<Ya.length;Za++){var $a=Ya[Za].split("=");""!=$a[0]&&(Xa[$a[0].toString()]=$a[1]?unescape($a[1].toString()):"")}Xa.sys&&J.Ya[Xa.sys]&&(Xa.sys=J.Ya[Xa.sys]);var P={queries:Xa,arch:0,rev:window.rev||0};function ab(b,a){return P.queries[b]?P.queries[b]:a}
function bb(b){"undefined"===typeof b&&(b=P.queries);var a="",d="?",c;for(c in b)a+=d,a=""==b[c]?a+c:a+c+"="+b[c],d="&";return a}var cb="untitled.s",db=!1,eb=0;function fb(b){for(var a=0,d=0;d<va.length;d++)if(va[d].code===b){a=d;break}eb=gb.value=a;hb()}function ib(b){eb=b.target.value;hb()}
function hb(){var b=eb;jb.setOption("mode",Fa[b]);document.getElementById("fileinput_asm").accept=va[b].ha;var a=cb;a=a.replace(/\.[^\.]+$/,"")+va[b].ha;kb(a);var d;0!=(d=lb.qb(va[b].Tb||0,va[b].$a||0))&&U("Changed the state of "+d+" debug check"+(1<d?"s":"")+" due to changing language to "+va[b].name+". See the Debugging Checks section of the Settings box for details.")}
function mb(){jb=CodeMirror(document.getElementById("qasm_cm"),{lineNumbers:!0,fixedGutter:!0,theme:"neat",indentUnit:4,indentWithTabs:!0,viewportMargin:10,specialChars:/[\t\u00a0\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,extraKeys:{"Ctrl-Space":"autocomplete"},hintOptions:{hint:nb}});jb.setValue(ra);jb.setCursor(jb.doc.lastLine()+1,0);jb.clearHistory();pb=qb=jb.changeGeneration(!0);jb.on("change",rb);sb=document.getElementById("qasm_compile");sb.addEventListener("click",tb);sb.disabled=
!1;for(gb=document.getElementById("qasm_lang");gb.children.length;)gb.removeChild(gb.lastChild);for(var b=0;b<va.length;b++){var a=document.createElement("option");a.value=b;a.textContent=va[b].name;gb.appendChild(a)}gb.addEventListener("change",ib);1>=va.length&&(gb.parentNode.style.display="none");var d=document.getElementById("qasm_box");b=new xa(function(){d.children[1].style.top=(d.children[0].offsetHeight+2*d.children[0].offsetTop).toString()+"px";jb.refresh()});document.getElementById("qasm_box").onresize=
b.trigger;ub=document.getElementById("qasm_status");window.addEventListener("beforeunload",function(c){if(!jb.isClean(qb))return vb(Ma),c.returnValue="The editor has unsaved changes",c.returnValue});window.addEventListener("unload",function(){wb("unloadTime",Math.round(performance.now()));wb("rev",P.rev);xb(!0)})}
function yb(b,a,d){a=document.createElement("span");a.className="editor_hint1";a.innerHTML=d.text;b.appendChild(a);a=document.createElement("span");a.className="editor_hint2";a.innerHTML=d.displayText;b.appendChild(a)}
function nb(b){if(!db)return null;var a=b.getCursor(),d=b.getLine(a.line);b=/^[\s]*([\S]*)$/.exec(d.slice(0,a.ch));if(null===b)return null;b=b[1].toLowerCase();for(var c=a.ch-b.length,f=a.ch;f<d.length&&/\S/.test(d.charAt(f));)++f;d=[];for(var g=za,q=0,h=g.length;q<h;++q)if(g[q].startsWith(b)){var w=g[q].indexOf("|");0<=w?d.push({text:g[q].slice(0,w),displayText:g[q].slice(w+1),render:yb}):d.push(g[q])}return{list:d,from:CodeMirror.Pos(a.line,c),to:CodeMirror.Pos(a.line,f)}}
function zb(b){if(!(5>b.length)){var a=new XMLHttpRequest;a.open("GET",b);a.responseType="text";a.onload=function(){var d=Math.max(b.lastIndexOf("/"),b.lastIndexOf("\\"));jb.setValue(a.response);tb();qb=jb.changeGeneration(!0);kb(b.substr(d+1))};a.send()}}function Ab(){var b=jb.getValue("\r\n");window.Oa(new Blob([b],{type:"text/x-asm;charset=utf-8"}),cb,{Ka:!1});qb=jb.changeGeneration(!0);rb()}function kb(b){b?cb=b:cb="untitled.s";rb()}
function tb(b){b&&("target"in b&&(b=b.target),b.disabled=!0,setTimeout(function(){b.disabled=!1},1500));var a=jb.getValue(),d=new FormData;4194304<a.length?(U("Your source code is "+(a.length/1048576).toFixed(1)+" MB. Consider compiling locally instead of sending a big file to the compile server. Server will refuse to compile very big files."),U("Compiling anyway...")):U("Compiling...");d.append("filepost",a);d.append("arch",va[eb].H);d.append("sys",Ba);var c=new XMLHttpRequest;c.open("POST","compile.php");
c.responseType="arraybuffer";c.onerror=function(){U("Error contacting compile server. Compile failed.","compilemsg fail")};c.onload=function(){var f=c.response,g=!1;if(4<c.response.byteLength){var q=(new Uint32Array(f,0,4))[0];if(q<=f.byteLength-4){var h=new Int8Array(f,q+4);var w="undefined"!==typeof TextDecoder?(new TextDecoder).decode(h):String.fromCharCode.apply(null,h);0<q?(f=new Int8Array(f,4,q),Bb(f,void 0,function(v){v&&(X.jb(a),pb=jb.changeGeneration(!0),rb(),vb(Na));U(w,v?"compilemsg":"compilemsg fail")})):
U(w,"compilemsg fail")}else g=!0}else g=!0;g&&U("Unexpected response from server. Compile failed.","compilemsg fail")};c.send(d)}function Cb(){var b=window.open("","_blank"),a=new FormData;a.append("file",new Blob([jb.getValue()]));var d=new XMLHttpRequest;d.open("POST","share.php");d.responseType="text";d.onload=function(){var c=P.queries;delete c.loadelf;c.loadasm="share/"+d.response;0<eb?c.lang=va[eb].code:delete c.lang;b.location=bb(c)};d.send(a)}
function rb(){var b=jb.isClean(qb),a=jb.isClean(pb);b=cb+(b?"":" [changed since save]")+(a?"":" [changed since compile]");b!==Db&&(Db=ub.innerText=b)}
var gb,jb,qb,pb,sb,ub,Db,X={va:null,La:0,wa:null,W:function(){function b(){var h=document.createElement("div");h.style.background="#822";h.style.width="10px";h.style.height="10px";h.style.borderRadius="5px";h.style.marginTop="4px";return h}var a=X;document.getElementById("asm_topbar_bp").appendChild(b());a.aa=CodeMirror(document.getElementById("asm_cm"),{lineNumbers:!1,gutters:["CodeMirror-linenumbers","d_breakpoints","m_addr","d_op"],fixedGutter:!0,readOnly:"nocursor",undoDepth:0,noCursor:!0,theme:"neat",
indentUnit:4,mode:{name:"gas",architecture:Ea},viewportMargin:10,specialChars:/[\t\u00a0\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g});a.aa.on("gutterClick",function(h,w,v,C){"d_breakpoints"==v&&0==C.button&&(v=X.I.ja(w),null!==v&&(Eb.hasOwnProperty(v)?(v>>>=0,L(11,v),delete Eb[v],Fb(),h.setGutterMarker(w,"d_breakpoints",null)):(v>>>=0,L(10,v),Eb.hasOwnProperty(v)||(Eb[v]=null),Fb(),h.setGutterMarker(w,"d_breakpoints",b()))))});a.I=new Gb(a.aa,2);var d=document.getElementById("asm_box"),
c=new xa(function(){d.children[2].style.top=(d.children[0].offsetHeight+2*d.children[0].offsetTop+d.children[1].offsetHeight).toString()+"px";d.children[1].style.top=(d.children[0].offsetHeight+2*d.children[0].offsetTop).toString()+"px";X.I.refresh()});document.getElementById("asm_box").onresize=c.trigger;document.getElementById("asm_refresh").addEventListener("click",a.I.refresh.bind(a.I));a.I.Ha(document.getElementById("asm_goto"));var f=!1;a.I.Ea=function(h){if(!f){f=!0;null!=X.wa&&a.I.J.operation(function(){var v=
X.wa;X.aa.removeLineClass(v,"wrap","d_line_pc");X.aa.removeLineClass(v,"wrap","d_line_pc_mipsslot1");X.aa.removeLineClass(v,"wrap","d_line_pc_mipsslot2");X.wa=null});var w=X.I.Ia(X.va);h&&(null===w||w<X.aa.firstLine()||w>X.aa.lastLine())&&(X.I.ea(X.va,!1),w=X.I.Ia(X.va));null===w||w<X.aa.firstLine()||w>X.aa.lastLine()||(X.wa=X.aa.addLineClass(w,"wrap","d_line_pc"),1<=X.La&&2>=X.La&&X.aa.addLineClass(X.wa,"wrap","d_line_pc_mipsslot"+X.La),h&&0<X.aa.getScrollInfo().clientHeight&&X.aa.scrollIntoView({line:w,
ch:0},72));f=!1}};a.I.Ba=function(h,w,v,C){var I=a.Pa?a.na?1:2:0,Q=a.Pa;ka(17,{lines:[h,w],addr:C,which:v,forceaddrs:[X.va],dbginfo:I},function(D){var M=a.I.J,E=a.I;a.I.Da(v,function(){for(var O=h;O<=w;++O){var R=D[0][O-h]>>>0;if(void 0===D[2][O-h])break;M.doc.replaceRange("\t"+D[2][O-h],{line:O,ch:0},{line:O});M.setGutterMarker(O,"d_op",document.createTextNode(D[1][O-h]));var la=M.lineInfo(O);if(null!=la.widgets)for(;la.widgets.length;)la.widgets.pop().clear();la=-1;if(Q&&D[3]&&D[3][O-h]){var V=
D[3][O-h],Y=null;if(1==I)for(var S=Math.min(V[0],V[1]);S<=V[1]&&S<=a.na.length;S++)if(2==Q||S!=V[1]&&""!==a.Qa[S-1]||S==V[1]&&a.ib(D[2][O-h].trim().replace(/\s+; 0x[0-9a-fA-F]+$/,""))!=a.Qa[S-1]){Y||=document.createElement("div");var qa=document.createElement("span");qa.appendChild(document.createTextNode(S));Y.appendChild(qa);2==Q?Y.appendChild(document.createTextNode("\t"+a.na[S-1]+"\n")):Y.appendChild(document.createTextNode("\t"+a.na[S-1].trim()+"\n"))}else S==V[1]&&(la=S);else Y||=document.createElement("div"),
qa=document.createElement("span"),qa.appendChild(document.createTextNode(V[0]+":"+V[1])),Y.appendChild(qa);Y&&(Y.className="asm_source",M.addLineWidget(O,Y,{above:!0,handleMouseEvents:!0}))}if(void 0!==Jb[R]){V=Jb[R];Y=document.createElement("div");Y.className="asm_label";for(S=0;S<V.length;S++)0!=S&&Y.appendChild(document.createElement("br")),Y.appendChild(document.createTextNode(V[S]+":"));M.addLineWidget(O,Y,{above:!0,handleMouseEvents:!0})}0<=la&&(S=document.createElement("div"),S.appendChild(document.createTextNode(la)),
S.className="asm_lineno",M.addLineWidget(O,S,{above:!0,handleMouseEvents:!0}));M.setGutterMarker(O,"d_breakpoints",Eb.hasOwnProperty(R)?b():null)}O=D[0];if(O.length!=w-h+1)throw"DISASM_RANGE: return value must have exactly (to-from+1) rows";E.Xa(v,O)})})};a.aa.on("dblclick",function(h,w){h=h.coordsChar({left:w.clientX,top:w.clientY},"window");h=a.I.ja(h.line);null!==h&&(L(8,[32,h]),L(6))});c=document.getElementById("asm_go_menu");for(var g={items:[]},q=0;q<Ia.length;q++)g.items.push({type:"item",
text:Ia[q],onclick:X.I.ea.bind(X.I,Ia[q],!0)});Kb(c,g)},sb:function(b,a,d){void 0!==b&&(X.va=b,X.La=a);X.I.Ea(!!d)},jb:function(b){b?(X.na=b.split("\n"),X.Qa=X.na.map(function(a){return X.ib(a.trim())})):(X.na=null,X.Qa=null)},ib:function(b){return b.replace(/\s*([^$\.\w])\s*/g,"$1").replace(/\s+/g," ").toUpperCase()},na:null,Qa:null,Pa:ab("showsrc","1")|0};
function Lb(){Mb=CodeMirror(document.getElementById("mem_cm"),{lineNumbers:!1,gutters:["CodeMirror-linenumbers","m_addr"],fixedGutter:!0,readOnly:"nocursor",undoDepth:0,noCursor:!0,theme:"neat",indentUnit:4,mode:"text/plain",specialChars:/[\t\u00a0\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g});Z=new Gb(Mb,4);Z.Ba=function(f,g,q,h){var w=Z;if(0==q){var v=h>>>0;var C=h+(g-f+1<<w.da)>>>0}else C=h+(1<<w.da)>>>0,v=h+(f-g<<w.da)>>>0;ka(15,[v,C],function(I){var Q=w.J,D=1<<w.da;Z.Da(q,function(){var M=
0,E=1<<Nb,O=[255,65535,4294967295][Nb],R=new ArrayBuffer(4),la=new Uint32Array(R),V=new Uint8Array(R),Y=[];for(R=f;R<=g;++R){for(var S=" ",qa="",Sa=0;Sa<D;Sa+=4){for(var ta=0;4>ta;ta+=E){var ma=Ob(I[M]>>>8*ta&O);S=S+" ".repeat(Pb()-ma.length)+ma+" "}la[0]=I[M];for(ta=0;4>ta;++ta){ma=V[ta];if(0==ma)ma=8226;else if(32>ma||127<=ma)ma=0;Y[ta]=ma}qa+=String.fromCharCode(32,Y[0],Y[1],Y[2],Y[3]);Sa+4<D&&(S+=" ");M++}S=S+"  "+qa;Q.doc.replaceRange(S,{line:R,ch:0},{line:R})}M=[];if(0==q)for(R=f,E=h;R<=g;++R,
E=E+D>>>0)M[R-f]=E;else for(R=g,E=h;R>=f;--R,E=E-D>>>0)M[R-f]=E;w.Xa(q,M)})})};Z.Ga=function(f){var g=f&(1<<Z.da)-1&~((1<<Nb)-1);f=Pb();var q=(f+1<<2-Nb)+1,h=(g*q/4|0)+1;g=(5*g/4|0)+(q<<Z.da-2)+3;return[[h-1,h+f+1],[g,g+(1<<Nb)]]};var b=document.getElementById("mem_boxcontents"),a=new xa(function(){b.children[2].style.top=(b.children[0].offsetHeight+2*b.children[0].offsetTop+b.children[1].offsetHeight).toString()+"px";b.children[1].style.top=(b.children[0].offsetHeight+2*b.children[0].offsetTop).toString()+
"px";Z.refresh()});document.getElementById("mem_box").onresize=a.trigger;document.getElementById("mem_refresh").addEventListener("click",Z.refresh.bind(Z));Qb=new Rb;Z.ga=Qb.close.bind(Qb);Qb.D=Sb;Qb.F=Tb;Z.Ha(document.getElementById("mem_goto"));a=document.getElementById("mem_go_menu");for(var d={items:[]},c=0;c<Ja.length;c++)d.items.push({type:"item",text:Ja[c],onclick:Z.ea.bind(Z,Ja[c],!0)});Kb(a,d);Ub()}
function Ub(){function b(D){g=(parseInt(D.target.value,16)|0)>>>0;D.target.value=g.toString(16).padStart(4,"0")}function a(){let D=0;switch(document.getElementById("mls_fmt").value){case "raw":D|=0;break;default:D|=32;break;case "line_rn":D|=64;break;case "comma":D|=96}switch(document.getElementById("mls_numfmt").value){case "b":D|=0;break;case "o":D|=4;break;case "s":D|=8;break;default:case "u":D|=12;break;case "x":D|=16}switch(document.getElementById("mls_numsize").value){case "1":D|=0;break;case "2":D|=
1;break;case "4":D|=2;break;case "8":D|=3}return D}function d(){switch(~(1<<w[0]|1<<w[1])&7){case 2:h[1]=h[0]+h[2]>>>0;break;case 1:h[0]=h[1]-h[2]>>>0;break;default:h[2]=h[1]-h[0]>>>0}if(0>h[2]){let D=h[1];h[1]=h[0];h[0]=D;h[2]=h[1]-h[0]}v.value=h[0].toString(16).padStart(4,"0");C.value=h[1].toString(16).padStart(4,"0");I.value=h[2].toString(10);I.D.classList.toggle("bad",100663296<h[2])}function c(D){let M=D.target.ma>>>0;h[M]=2==M?parseInt(D.target.value,void 0)|0:(parseInt(D.target.value,16)|0)>>>
0;d()}function f(D){D&&(D=D.target.ma>>>0,0!=D&&(w[1]=D));D=~(1<<w[0]|1<<w[1])&7;v.D.classList.toggle("computed",D==1<<v.ma);C.D.classList.toggle("computed",D==1<<C.ma);I.D.classList.toggle("computed",D==1<<I.ma)}var g=0;document.getElementById("mls_fmt").addEventListener("change",function(D){D="raw"===D.target.value;document.getElementById("mls_numfmt").disabled=D;document.getElementById("mls_numsize").disabled=D});document.getElementById("mls_lstart").addEventListener("change",b);document.getElementById("mls_lstart").addEventListener("blur",
b);var q=new Vb(function(D){let M=a();ka(28,[g,M,D],function(){Z.refresh()})});document.getElementById("mls_load").addEventListener("click",function(){q.D.click()});document.getElementById("mls_save").addEventListener("click",function(){let D=a();100663296<h[2]?U("Save memory to file: Requested memory region exceeds maximum size of 96 MB.","msg-2"):ka(29,[h[0],h[2],D],function(M){window.Oa(new Blob([M],{type:D&96?"text/plain;charset=utf-8":"application/octet-stream"}),"memory_"+h[0].toString(16)+
(D&96?".txt":".bin"),{Ka:!1})})});var h=[0,0,0],w=[0,1],v=document.getElementById("mls_sstart"),C=document.getElementById("mls_send"),I=document.getElementById("mls_ssize");v.ma=0;C.ma=1;I.ma=2;v.D=v.parentElement.parentElement;C.D=C.parentElement.parentElement;I.D=I.parentElement.parentElement;Wb=function(D){!0===D||!1===D?document.getElementById("mem_boxside").classList.toggle("hide",!D):(D.stopPropagation&&D.stopPropagation(),document.getElementById("mem_boxside").classList.toggle("hide"))};let Q=
document.getElementById("mem_sidebar_menu");Kb(Q,{items:[{type:"section",text:"Sidebar"},{type:"item",text:"Load/Save Memory",onclick:Wb}],position:"right"});Q.parentElement.addEventListener("click",Wb);v.addEventListener("change",c);C.addEventListener("change",c);I.addEventListener("change",c);v.addEventListener("blur",c);C.addEventListener("blur",c);I.addEventListener("blur",c);v.addEventListener("focus",f);C.addEventListener("focus",f);I.addEventListener("focus",f);document.getElementById("mls_fmt").dispatchEvent(new Event("change"));
document.getElementById("mls_lstart").dispatchEvent(new Event("change"));h[0]=(parseInt(v.value,16)|0)>>>0;h[1]=(parseInt(C.value,16)|0)>>>0;d();f(null)}function Sb(b,a,d){var c=(Pb()+1<<2-Nb)+1;a=(a<<2)/c&~((1<<Nb)-1);b=Z.ja(b);if(null===b)throw"Got null address";b+=a;d=Xb(d.trim());L(16,[[b,Nb,d]]);Z.refresh()}function Tb(b,a){var d=Pb(),c=(d+1<<2-Nb)+1;a=(a<<2)/c&~((1<<Nb)-1);if(a>=1<<Z.da)return null;c=(a*c/4|0)+1;return{s:Mb.doc.getRange({line:b,ch:c},{line:b,ch:c+d}).trim(),ch:c,width:d}}
var Z,Mb,Wb,Qb,lb={W:function(){function b(v){lb.B.Pb.innerHTML=J.ta[v.target.value].description}function a(v,C,I,Q=!1){if("object"===typeof Ka){if(null===Ka[v])return;if("object"===typeof Ka[v]||!0===Ka[v])"string"===typeof Ka[v].Fa&&(C=Ka[v].Fa),"string"===typeof Ka[v].ia&&(I=Ka[v].ia);else if(!0===Q)return}Q=document.createElement("li");Q.innerHTML='<label><input type="checkbox" id="dbg'+v+'" '+(c&1<<v?"":"checked")+">"+C+"</label>";Q.title="";d.B.xa.appendChild(Q);I&&$(Q).tooltip({show:!1,hide:!1,
content:I})}var d=lb,c=parseInt(ab("dbgchk","0"),16);d.B={xa:document.getElementById("dbg_checks"),Ob:document.getElementById("settings_sys"),Wa:document.getElementById("settings_maxmem"),Pb:document.getElementById("settings_reload_sysdesc"),eb:document.getElementById("settings_numtype"),cb:document.getElementById("settings_numsize")};d.B.xa.addEventListener("change",lb.lb);a(17,"Integer add/sub overflow","The MIPS <tt>add</tt>, <tt>sub</tt>, and <tt>neg</tt> instructions throw an overflow exception if the operation results in a signed overflow.<p>If throwing an exception on overflow is what you want, then disable this warning. If you want overflow to silently wrap around, use the <tt>addu</tt>, <tt>subu</tt>, and <tt>negu</tt> instructions instead.</p>");
a(0,"Memory access out of range","A memory read or write occurred to an address that isn't mapped to memory (e.g., SDRAM or DDR3) or an I/O device.");a(1,"Memory access misaligned","A word or half-word memory read or write occurred to an address that wasn't properly aligned.");a(8,"Memory access to unallocated stack space","Checks if a memory read or write accesses a 128 byte memory region just below the current stack pointer. Accessing memory near, but not on, the stack often indicates incorrect allocation and deallocation of stack space.<p>If you are using interrupts, be aware that an interrupt handler will usually clobber the region below the stack pointer with no prior warning.");
a(12,"Memory: Suspicious use of cache bypass","This checks for cases where a standard load or store was used to access an I/O device, or a cache-bypassed load/store (e.g., <tt>ldwio</tt> or <tt>stwio</tt>) was used to access regular memory. This could be choosing the wrong type of instruction to use, or it may be a hint that there is a bad pointer.<p>This check assumes that each device is either a memory device or an I/O device. In some cases, how you use the device affects how the device should be classified. In these cases, the warnings given may be incorrect.");
a(16,"Misaligned pc","The program counter must be a multiple of 4. This assertion warns whenever it isn't. This simulator always sets <tt>pc[1:0]</tt> to zero.");a(9,"Instruction fetch: Outside a code section","Instructions normally come from a code section in the executable (such as <tt>.text</tt> or <tt>.exceptions</tt> but not <tt>.data</tt>). This assertion checks each instruction fetch to ensure all executed instructions came from one of these sections.<p>If executing outside a code section wasn't intended, check for a bad branch target, which can sometimes be caused by a corrupted return address.");
a(10,"Instruction fetch: Modified opcode","This checks for self-modifying code by comparing the opcode currently in memory to the one originally loaded from the executable. If the opcode differs, your program has likely modified its own code.<p>If executing modified instructions wasn't intended, use a watchpoint to see when the code was modified and which instruction modified it. Unintended self-modifying code can occur due to a bad pointer used with a store instruction that accidentally overwrites part of the code.");
a(2,"Invalid instruction","The instruction opcode wasn't a legal instruction. This usually occurs because of a bad branch that branched into a region of data or unused memory.");a(18,"Unsupported instruction","The instruction opcode is a legal instruction, but is not supported by this processor.",!0);a(15,"SP moved beyond current stack frame","Checks that the stack pointer isn't moved outside the current stack frame, deallocating stack space owned by the caller.<p>Normally, functions allocate space on the stack (decreasing <tt>sp</tt>), then deallocates this memory (increasing <tt>sp</tt>) before the function finishes. It should not be deallocating stack space owned by the function's caller. This check ensures that <tt>sp</tt> is not greater than the value when first entering the current function.");
a(5,"Function nesting too deep","Checks if the function call nesting depth exceeds 32. If this isn't expected behaviour, check that function calls and returns are properly matched.");a(6,"Function clobbered ra or sp","Checks if <tt>ra</tt> or <tt>sp</tt> were modified at the end of a function. A function that modifies ra or sp is almost never the intended behaviour.");a(7,"Function clobbered callee-saved register","Checks if callee-saved registers were modified. Disable this check if you're not following the calling conventions regarding callee-saved registers.");
a(3,"Interrupt nesting too deep","Checks if the nesting depth of nested interrupts exceeds 8. If this isn't expected behaviour, check that your interrupt service routines are returning properly and not repeatedly being interrupted before completing.");a(4,"Interrupt clobbered ea, ra, sp, or a ctl reg","Interrupts may not clobber any registers except <tt>et (r24)</tt>, but the registers checked here are particularly critical. This also checks if <tt>ea</tt> is correct (decremented by 4).");a(14,"Interrupt clobbered a register",
"Interrupts may not clobber any registers except <tt>et (r24)</tt>. This assertion checks if an interrupt handler modified any registers it shouldn't.");a(11,"Interrupt handler executed too long","This assertion checks for interrupt handlers that don't finish executing (reaches its <tt>eret</tt>) within 100 million instructions.<p>Interrupt handlers should be short. They should handle an event and return quickly, without doing large amounts of computation or waiting for other I/O devices. If it needs to wait, it should set a flag then return, and let the main program or a future interrupt finish the task.");
a(13,"I/O device warnings","These warn about things like unexpected I/O device register settings, or using a particular I/O device improperly.");d.lb();for(var f=d.B.cb;f.hasChildNodes();)f.removeChild(f.lastChild);f.addEventListener("change",d.fb);for(var g=[[0,"Byte"],[1,"Half-word"],[2,"Word"]],q=[[0,"Hexadecimal"],[1,"Decimal unsigned"],[2,"Decimal signed"]],h=0;h<g.length;++h){var w=document.createElement("option");w.value=g[h][0];w.innerHTML=g[h][1];f.appendChild(w)}f.value=2;for(f=d.B.eb;f.hasChildNodes();)f.removeChild(f.lastChild);
f.addEventListener("change",d.fb);for(h=0;h<q.length;++h)w=document.createElement("option"),w.value=q[h][0],w.innerHTML=q[h][1],f.appendChild(w);f.value=0;h=document.getElementById("settings_memwords");h.value=4;h.addEventListener("change",function(v){Z.Nb(v.target.value|0)});h=document.getElementById("settings_display_cc");h.addEventListener("change",function(v){db=v.target.checked});w=document.getElementById("settings_display_src");w.addEventListener("change",function(v){X.Pa=parseInt(v.target.value,
10);X.I.refresh()});w.value=X.Pa;db=h.checked=!0;f=document.getElementById("settings_sys");f.addEventListener("change",b);for(h=0;h<J.ba.length;h++)if(!0!==J.ba[h][1].hide||P.queries.sys==J.ba[h][0])w=document.createElement("option"),w.value=J.ba[h][0],w.innerHTML=J.ba[h][1].name,f.appendChild(w),P.queries.sys==J.ba[h][0]&&(f.value=J.ba[h][0]);f.value=f.value||J.ba[0][0];b({target:f});document.getElementById("settings_sys_change").addEventListener("click",d.rb);f=d.B.Wa;g=[8388608,16777216,33554432,
67108864,134217728,268435456,536870912,1073741824,2147483632];for(h=0;h<g.length;h++)w=document.createElement("option"),w.value=g[h],w.innerHTML=Math.round(g[h]/1048576)+" MB",f.appendChild(w);f.value=P.queries.maxmem||33554432},rb:function(){var b=P.queries;b.sys=lb.B.Ob.value;33554432==lb.B.Wa.value?delete b.maxmem:b.maxmem=lb.B.Wa.value;b=bb(b);""==b?window.location.href=window.location.pathname:window.location.search=b},fb:function(){var b=lb.B.cb.value>>>0,a=lb.B.eb.value>>>0;void 0!==b&&(Nb=
b);void 0!==a&&(Yb=a);b=W.length;for(a=0;a<b;a++)for(var d=W[a].length,c=0;c<d;++c){var f=W[a][c][0];switch(W[a][c][2]&15){case 1:var g=Pb(2,6);break;case 2:g=Pb(3,6);break;default:g=Pb(2)}$b[f].children[1].children[0].size=g}L(6);Z.refresh();Z.Ta()},qb:function(b,a){b|=0;a|=0;if(!b&&!a)return 0;for(var d=0,c=lb.B.xa,f=0,g=0;g<c.children.length;g++){var q=c.children[g].children[0].children[0],h=q.id;"dbg"==h.substr(0,3)&&(h=parseInt(h.substr(3),10),32>h&&(!q.checked&&b>>>h&1?(q.checked=!0,f++):q.checked&&
a>>>h&1&&(q.checked=!1,f++),q.checked||(d|=1<<h)))}f&&L(5,d);return f},lb:function(){for(var b=0,a=lb.B.xa,d=0;d<a.children.length;d++){var c=a.children[d].children[0].children[0],f=c.id;"dbg"==f.substr(0,3)&&(f=parseInt(f.substr(3),10),c.checked||32>f&&(b|=1<<(f&31)))}L(5,b)},Yb:function(){L(5,null)},Qb:function(b){for(var a=lb.B.xa,d=0;d<a.children.length;d++){var c=a.children[d].children[0].children[0],f=c.id;"dbg"==f.substr(0,3)&&(f=parseInt(f.substr(3),10),32>f&&(c.checked=!(b>>(f&31)&1)))}}};
function ac(){var b=document.getElementById("symbols_box"),a=document.createElement("table");a.innerHTML="<thead><tr><th>Symbol</th><th>Address</th></tr></thead><tbody></tbody>";a.className="tablesorter";bc=a;b.appendChild(a);$(bc).tablesorter({headers:{0:{sorter:"text"},1:{sorter:"text"}},sortAppend:[[0,0]]})}
function cc(b){function a(q){q.currentTarget.mb?(vb(Ua),Z.ea(q.currentTarget.ca,!0)):(vb(Na),X.I.ea(q.currentTarget.ca,!0));q.preventDefault();return!1}var d=bc.children[1];for(d.parentNode.removeChild(d);d.hasChildNodes();)d.removeChild(d.lastChild);for(var c=0,f=b.length;c<f;c++){var g=document.createElement("tr");g.innerHTML="<td>"+b[c][0]+'</td><td class="addr"><span>'+K(b[c][1],8)+'</span> <a href="#" title="Scroll to here in disassembly window" style="text-decoration: none" class="fas fa-code"></a>&nbsp;<a href="#" title="Scroll to here in memory window" style="text-decoration: none" class="fas fa-search"></a></td>';
g.children[1].children[1].addEventListener("click",a);g.children[1].children[1].ca=b[c][1];g.children[1].children[1].mb=0;g.children[1].children[2].addEventListener("click",a);g.children[1].children[2].ca=b[c][1];g.children[1].children[2].mb=1;d.appendChild(g)}bc.appendChild(d);$(bc).trigger("updatenow");0<b.length&&$(bc).trigger("sorton",[[[1,0]]])}var bc,$b=[],dc=[];
function ec(){for(var b=document.getElementById("reg_cm");b.hasChildNodes();)b.removeChild(b.lastChild);for(var a=W.length,d=0;d<a;d++){var c=document.createElement("div");c.className="reg_block";for(var f=W[d].length,g=0;g<f;++g){var q=W[d][g][0],h=W[d][g][2];switch(h&15){case 1:var w=Pb(2,6);break;case 2:w=Pb(3,6);break;default:w=Pb(2)}let C="";W[d][g][3]&&(C='<span class="r_append"></span>');var v=document.createElement("div");v.innerHTML='<div class="r_num">'+q+'</div><div class="r_val"><input spellcheck="false" type="text" value="--------" size='+
w+">"+C+"</div>";v.id="reg_value_"+q;if(h&16||g==f-1)v.className="gap";c.appendChild(v);$b[q]=v;v=v.children[1].children[0];v.addEventListener("focus",fc);v.addEventListener("blur",gc);v.addEventListener("change",hc);v.addEventListener("keydown",ic);v.F=[d,g]}0<d?$(c).draggable():c.style.zIndex="1";b.appendChild(c);d+1<a&&b.appendChild(document.createElement("br"))}document.getElementById("reg_refresh").addEventListener("click",function(){L(6)});L(6)}
function fc(){var b=W[this.F[0]][this.F[1]],a=b[1]<<1;b=b[2]&15;var d=Aa(b);this.value=2==b?Ob({pa:dc[a],oa:dc[a+2]},d,6):1==b?Ob(dc[a],d,6):Ob(dc[a],d,5);this.classList.add("editing");this.selectionStart=0;this.selectionEnd=this.value.length;this.Ja=!0}function gc(){this.classList.remove("editing");L(6);this.Ja=!1}function ic(b){"Escape"==b.key&&(this.Ja=!1);"Escape"!=b.key&&"Enter"!=b.key||this.blur()}
function hc(){if(this.Ja){var b=W[this.F[0]][this.F[1]],a=b[2]&15,d=Aa(a);b=b[1];a=1==a||2==a?Xb(this.value,d,6):Xb(this.value,d);3==d?(L(8,[b,a.pa]),L(8,[b+1,a.oa])):L(8,[b,a]);this.blur()}}
function vb(b){var a;if(b.parentElement&&b.parentElement.parentElement&&b.parentElement.parentElement.parentElement&&b.parentElement.parentElement.parentElement.classList.contains("dialog-floating"))b.parentElement.parentElement.parentElement.dispatchEvent(new MouseEvent("mousedown"));else{a:{for(var d=[pa.context.model.rootNode];d.length;){var c=d.pop();if(c.container&&c.container.elementContent===b){b=c;break a}if(Array.isArray(c.children))for(var f=0,g=c.children.length;f<g;f++)d.push(c.children[f])}b=
null}(a=b)&&a.parent&&a.parent.container&&a.parent.container.setActiveChild&&a.parent.container.selectedTab&&a.parent.container.selectedTab().container!==a.container&&a.parent.container.setActiveChild(a.container)}}
function jc(){var b=document.getElementById("content"),a=new dockspawn.DockManager(b);a.initialize();a.resize(document.body.clientWidth-(b.offsetWidth-b.clientWidth),window.innerHeight-b.offsetTop-(b.offsetHeight-b.clientHeight));var d=new xa(function(){a.resize(document.body.clientWidth-(b.offsetWidth-b.clientWidth),window.innerHeight-b.offsetTop-(b.offsetHeight-b.clientHeight))});window.addEventListener("resize",d.trigger,!1);d.trigger();d=a.context.model.documentManagerNode;var c=document.getElementById("reg_box"),
f=c&&new dockspawn.PanelContainer(c,a),g=(c=document.getElementById("settings_box"))&&new dockspawn.PanelContainer(c,a),q=(Ma=c=document.getElementById("qasm_box"))&&new dockspawn.PanelContainer(c,a,{tabSelectCallback:function(){jb.focus()}}),h=(Na=c=document.getElementById("asm_box"))&&new dockspawn.PanelContainer(c,a),w=(Ua=c=document.getElementById("mem_box"))&&new dockspawn.PanelContainer(c,a),v=(c=document.getElementById("mem_watch_box"))&&new dockspawn.PanelContainer(c,a);c=document.getElementById("dev_box");
var C=null;c.children[0]&&0<c.children[0].children.length?C=c&&new dockspawn.PanelContainer(c,a):(c.parentElement.removeChild(c),c=null);var I=(c=document.getElementById("messages_box"))&&new dockspawn.PanelContainer(c,a),Q=(c=document.getElementById("bp_box"))&&new dockspawn.PanelContainer(c,a),D=(c=document.getElementById("stats_box"))&&new dockspawn.PanelContainer(c,a),M=(c=document.getElementById("trace_box"))&&new dockspawn.PanelContainer(c,a),E=(c=document.getElementById("callstack_box"))&&
new dockspawn.PanelContainer(c,a);c=(c=document.getElementById("symbols_box"))&&new dockspawn.PanelContainer(c,a);C&&a.dockRight(d,C,.333);a.dockDown(d,I,.2);g=a.dockLeft(d,g);f=a.dockUp(g,f,.75);a.dockFill(f,E);a.dockFill(f,M);a.dockFill(f,Q);a.dockFill(f,v);a.dockFill(f,c);a.dockFill(f,D);q=a.dockFill(d,q);a.dockFill(d,h);a.dockFill(d,w);f.parent.container.setActiveChild(f.container);q.parent.container.setActiveChild(q.container);pa=a;document.getElementById("content").style.opacity="1";d=document.getElementById("loading");
d.parentNode.removeChild(d);d=null}var kc=document.createDocumentFragment(),nc=new xa(function(){for(var b=lc,a=mc,d=a.scrollHeight-a.clientHeight<=a.scrollTop+5;0<b.childElementCount&&b.childElementCount>1E4-kc.children.length;)b.removeChild(b.firstChild);for(var c=0;c<kc.children.length;c++){var f=kc.children[c];f.classList.contains("new_msg")&&setTimeout(function(){f.classList.remove("new_msg")},10500)}b.appendChild(kc);d?a.scrollTop=1E20:a.parentElement.parentElement.parentElement.classList.add("message_unseen")});
function U(b,a){if(b){var d=document.createElement("p");a&&(d.className=a);"stdout"!=a&&d.classList.add("new_msg");d.innerHTML=b;kc.appendChild(d);nc.trigger()}}function oc(){L(1,1)}function pc(){L(24,0);L(1,-1)}function qc(){L(24,-1);L(1,-1)}function rc(){L(1,0)}function sc(){L(1,-1)}function tc(){L(2)}
function uc(b){if(null!=vc&&null!=vc[b])return vc[b];for(var a=0,d=W[0].length;a<d;a++)if(0==(W[0][a][2]&15)){let c=W[0][a][0].split(" "),f=!1;for(let g=0,q=c.length;g<q&&!f;g++)b==c[g]&&(f=!0);if(f)return dc[W[0][a][1]<<1]}b=parseInt(b,16);return isNaN(b)?null:b}function wc(b){if(!(5>b.length)){var a=new XMLHttpRequest;a.open("GET",b);a.responseType="arraybuffer";a.onload=function(){Bb(new Int8Array(a.response));vb(Na)};a.send()}}
function oa(b){return function(a){vb(Ua);Z.ea(b,!0);a.preventDefault()}}function xc(b,a,d){d.state=d.state||0;return function(c){d.state=!d.state;b.classList.toggle("check",d.state);a&&a(d.state);c.stopPropagation()}}
function na(b){switch(b.type){case "section":var a="dev_menu_sec";break;case "item":a="dev_menu_item";break;case "check":a="dev_menu_item";break;case "link":a="dev_menu_item";break;default:a="dev_menu_text"}if("link"==b.type){var d=document.createElement("a");d.href=b.href;d.target="_blank"}else d=document.createElement("span");d.className="dev_menu_row "+a;d.innerHTML=b.text;"item"==b.type?(b.onclick&&d.addEventListener("click",b.onclick),b.V&&(a=document.createElement("i"),a.className="icon "+b.V,
d.appendChild(a)),b.ka&&(a=document.createElement("i"),a.className="icon fas fa-search",d.appendChild(a),d.addEventListener("click",oa(b.ka)),d.title="Go to "+K(b.ka)+" in Memory window")):"check"==b.type?(a=document.createElement("i"),a.className="check fas fa-check",d.addEventListener("click",xc(d,b.onclick,b)),d.appendChild(a)):"link"==b.type&&(b.onclick&&d.addEventListener("click",b.onclick),b.V?(a=document.createElement("i"),a.className="icon "+b.V,d.appendChild(a)):void 0===b.V&&(a=document.createElement("i"),
a.className="icon fas fa-external-link-alt",d.appendChild(a)));return d}function Kb(b,a){if(a){if(Array.isArray(a.items))for(var d=0,c=a.items.length;d<c;++d)b.appendChild(na(a.items[d]));a.position&&"right"===a.position&&(b.style.right="0")}b.addEventListener("click",function(f){var g=f.currentTarget;g.style.display="none";setTimeout(function(){g.style.display=""},250)})}
function zc(b){function a(g){Bb(new Int8Array(g.target.result),null,function(q){q&&vb(Na)});c.close&&c.close();c.Ca&&c.Ca();c=null}function d(g){U("Error reading file: "+g.target.error.name);c=null}if(b.currentTarget.value){var c=b.target.files[0];var f=new FileReader;f.onload=a;f.onerror=d;f.readAsArrayBuffer(c);f=null;b.target.value=null}}
function Ac(b){function a(g){var q=c.name.substr(Math.max(c.name.lastIndexOf("/"),c.name.lastIndexOf("\\"))+1);jb.setValue(g.target.result);qb=jb.changeGeneration(!0);kb(q);vb(Ma);jb.focus();c.close&&c.close();c.Ca&&c.Ca();c=null}function d(g){U("Error reading file: "+g.target.error.name);c=null}if(b.currentTarget.value){var c=b.target.files[0];var f=new FileReader;f.onload=a;f.onerror=d;f.readAsText(c);f=null;b.target.value=null}}
var Vb=class{K(b){this.F&&this.F(new Int8Array(b.target.result));this.f.close&&this.f.close();this.f.Ca&&this.f.Ca();this.f=null}M(b){U("Error reading file: "+b.target.error.name);this.f=null}C(b){b.currentTarget.value&&(this.f=b.target.files[0],b.target.value=null,268435456<this.f.size?U("Load file: File too big ("+this.f.size+" bytes). Refusing to load it to avoid running out of memory.","msg-2"):(b=new FileReader,b.onload=this.K.bind(this),b.onerror=this.M.bind(this),b.readAsArrayBuffer(this.f)))}constructor(b){this.f=
null;this.D=document.createElement("input");this.F=b;Object.assign(this.D,{type:"file",style:"opacity: 0; width: 0; height: 0"});this.D.addEventListener("change",this.C.bind(this))}};function Bc(b){var a=/[?&](load.*)=([^&]*)/.exec(b.currentTarget.href),d=/[?&]lang=([^&]*)/.exec(b.currentTarget.href);"loadelf"==a[1]?wc(a[2]):"loadasm"==a[1]?(fb(d?d[1]:void 0),zb(a[2])):console.log("Couldn't parse sample program URL: "+a[1]);b.preventDefault();return!1}
function Cc(){document.getElementById("messages_clear").addEventListener("click",function(){for(var c=lc;c.hasChildNodes();)c.removeChild(c.lastChild)},!1);mc.addEventListener("scroll",function(c){c=c.target;c.scrollHeight-c.clientHeight<=c.scrollTop+5&&c.parentElement.parentElement.parentElement.classList.remove("message_unseen")});self.cpulator_messages_unseen_scroll=function(c){mc.scrollTop=mc.scrollHeight;c&&c.preventDefault()};mb();Lb();X.W();lb.W();ec();Dc=document.getElementById("stats_box");
Dc.innerHTML='<table class="statsbox"><tr><th>Counter</th><th>Value</th></tr><tr><td>Exec. instructions</td><td id="box_stats_0">0</td></tr>\n<tr><td>Data loads</td><td id="box_stats_1">0</td></tr>\n<tr><td>Data stores</td><td id="box_stats_2">0</td></tr>\n<tr><td title="Total wall-clock time spent while CPUlator was in a running state">Simulator run time (ms)</td><td id="box_stats_4">0</td></tr>\n<tr><td title="Wall-clock time spent while CPUlator was simulating the CPU and I/O devices, excluding UI and drawing code">Simulator core run time (ms)</td><td id="box_stats_3">0</td></tr>\n<tr><td title="Simulator speed in millions of simulated instructions per second">Simulated MIPS</td><td id="box_stats_3b">-</td></tr>\n</table>';
Ec=[];Ec[0]=document.getElementById("box_stats_0");Ec[1]=document.getElementById("box_stats_1");Ec[2]=document.getElementById("box_stats_2");Ec[3]=document.getElementById("box_stats_3");Ec[4]=document.getElementById("box_stats_4");Ec[5]=document.getElementById("box_stats_3b");Fc=document.getElementById("callstack_box");Fc.innerHTML="";Gc=document.getElementById("trace_box");Gc.innerHTML="";Hc=[];Ic=[[],[],[]];Jc=document.getElementById("bp_box");Fb();Kc();ac();document.getElementById("tb_step").addEventListener("click",
oc,!1);document.getElementById("tb_stepover").addEventListener("click",pc,!1);document.getElementById("tb_stepout").addEventListener("click",qc,!1);document.getElementById("tb_continue").addEventListener("click",sc,!1);document.getElementById("tb_stop").addEventListener("click",rc,!1);document.getElementById("tb_restart").addEventListener("click",tc,!1);document.getElementById("tb_load").addEventListener("click",Lc,!1);var b=[{type:"section",text:"Assembly Source (Editor)"},{type:"item",text:'<span class="dev_menu_with_shortcut">Open...<span class="dev_menu_shortcut">Ctrl-O</span></span>',
V:"fas fa-edit",onclick:function(){document.getElementById("fileinput_asm").click()}},{type:"item",text:'<span class="dev_menu_with_shortcut">Save...<span class="dev_menu_shortcut">Ctrl-S</span></span>',V:"fas fa-download",onclick:Ab}];b.push({type:"item",text:"Share",V:"fas fa-share-square",onclick:Cb,hint:"Uploads the assembly source code and creates a link. Anyone with the link can see the uploaded code. The new link opens in a new window."});b.push({type:"section",text:"ELF Executable"},{type:"item",
text:"Load ELF...",V:"fas fa-code",onclick:function(){document.getElementById("fileinput_elf").click()}});b.push({type:"section",text:"Memory Contents"},{type:"item",text:"Load/Save Memory...",onclick:function(){vb(Ua);Wb(!0)}});Kb(document.getElementById("tb_file_content"),{items:b});b={items:[{type:"section",text:"Documentation"},{type:"link",text:"Documentation",href:"doc/"},{type:"section",text:"Feedback"},{type:"link",text:"Bugs, Feature requests",href:"mailto:henry@stuffedcow.net?Subject=CPUlator%20stuff%20("+
P.queries.sys+")"},{type:"section",text:"Sample Programs"}]};for(var a=0;a<Ha.length;++a){var d=Ha[a];d.V=-1!==d.href.indexOf("loadasm")?"fas fa-edit":"fas fa-code";d.type="link";d.onclick=Bc;b.items.push(d)}b.items.push({type:"section",text:"Version "+window.rev});Kb(document.getElementById("tb_help_content"),b);document.getElementById("fileinput_elf").addEventListener("change",zc);document.getElementById("fileinput_asm").addEventListener("change",Ac);document.addEventListener("keydown",function(c){function f(q,
h,w,v){return!!q==!!c.ctrlKey&&!!h==!!c.shiftKey&&!!w==!!c.altKey&&v==c.keyCode}var g=!0;f(0,0,0,113)?oc():f(1,0,0,113)?pc():f(0,1,0,113)?qc():f(0,0,0,114)?sc():f(0,0,0,115)?rc():f(1,0,0,82)?tc():f(1,1,0,76)?Lc():f(0,0,0,116)?sb.disabled||tb(sb):f(1,0,0,69)?(vb(Ma),jb.focus()):f(1,0,0,68)?vb(Na):f(1,0,0,77)?vb(Ua):f(1,0,0,79)?document.getElementById("fileinput_asm").click():f(1,0,0,83)?Ab():g=!1;g&&(c.preventDefault(),c.stopPropagation())},!0);$("a.notalink").click(function(c){c.preventDefault()});
fb(P.queries.lang);null!=P.queries.loadasm?zb(P.queries.loadasm):P.queries.loadelf&&wc(P.queries.loadelf)}var Yb=0,Nb=2;function Pb(b,a){if(void 0===a||null===a)a=Yb;else if(5==a)a=Yb,4==a&&(a=0);else if(6==a)switch(Yb){case 0:a=0;break;default:a=4}if(void 0===b||null===b)b=Nb;if(4==a)return 17;if(0==a)return[2,4,8,16][b];if(1==a)return[3,5,10,20][b];if(2==a)return[4,6,11,20][b];throw"Bad format";}
function Xb(b,a,d){if(void 0===d||null===d)d=Yb;else if(5==d)d=Yb,4==d&&(d=0);else if(6==d)switch(Yb){case 0:d=0;break;default:d=4}if(void 0===a||null===a)a=Nb;var c=[255,65535,4294967295,0][a]>>>0;if(4==d){if(2==a)return a=new ArrayBuffer(4),d=new Int32Array(a),(new Float32Array(a))[0]=parseFloat(b),d[0];if(3==a)return a=new ArrayBuffer(8),d=new Int32Array(a),(new Float64Array(a))[0]=parseFloat(b),{pa:d[0],oa:d[1]};throw"Bad size for float type";}if(3==a)switch(d){case 0:return{pa:parseInt("0"+b.slice(-8),
16),oa:parseInt("0"+b.slice(0,-8),16)}}else switch(d){case 0:return parseInt(b,16)&c;case 1:return parseInt(b,10)>>>0&c;case 2:return parseInt(b,10);default:return"bad fmt"}}
function Ob(b,a,d){if(void 0===d||null===d)d=Yb;else if(5==d)d=Yb,4==d&&(d=0);else if(6==d)switch(Yb){case 0:d=0;break;default:if(d=4,2==a){var c=new ArrayBuffer(4),f=new Int32Array(c);c=new Float32Array(c);f[0]=b;b=c[0]}else 3==a&&(c=new ArrayBuffer(8),f=new Int32Array(c),c=new Float64Array(c),f[0]=b.pa,f[1]=b.oa,b=c[0])}if(void 0===a||null===a)a=Nb;if(4==d)return 0===b&&1/b===1/-0?"-"+(0).toPrecision(10):b.toPrecision(10);if(3==a)switch(d){case 0:return K(b.oa,8)+K(b.pa,8);default:return"bad fmt 64"}else switch(d){case 0:return K(b,
[2,4,8,16][a]>>>0);case 1:return(b>>>0).toString(10);case 2:return a=[24,16,0,0][a],(b<<a>>a).toString(10);default:return"bad fmt"}}
var Mc=[],ka=function(){var b={msg:0,data:null,reply:!0};try{b.msg=25,b.data=null,ea.postMessage(b,void 0)}catch(a){return function(d,c,f){b.msg=d>>>0;b.data=c;Mc.push(f);if(10<Mc.length)throw"Suspicious: cpulator.sim.sendmsg_callbacks has more than 10 elements";ea.postMessage(b)}}return function(a,d,c,f){b.msg=a>>>0;b.data=d;Mc.push(c);if(10<Mc.length)throw"Suspicious: cpulator.sim.sendmsg_callbacks has more than 10 elements";ea.postMessage(b,f)}}(),L=function(){var b={msg:0,data:null};try{b.msg=
25,b.data=null,ea.postMessage(b,void 0)}catch(a){return function(d,c){b.msg=d>>>0;b.data=c;ea.postMessage(b)}}return function(a,d,c){b.msg=a>>>0;b.data=d;ea.postMessage(b,c)}}(),vc={},Jb={};function Bb(b,a,d){X.jb(null);ka(3,b,function(c){if(c){for(var f=Array(c.length),g={},q={},h=0,w=c.length;h<w;h++){var v=c[h][0],C=c[h][1]>>>0;f[h]=v;g[v]=C;void 0===q[C]?q[C]=[v]:q[C].push(v)}Z.bb(f);X.I.bb(f);vc=g;Jb=q;cc(c)}Wa=a;d&&d(!!c);X.I.refresh();c&&tc()})}
function Lc(){Wa?Wa():ka(23,null,function(b){X.I.refresh();b&&tc()})}var Nc=document.getElementById("toolbar"),Oc=document.getElementById("tb_runstate"),Pc=null,Dc,Ec;
(function(){function b(c){c.preventDefault();return!1}function a(c){if(0==c.button)return vb(Na),X.I.ea(c.currentTarget.ca,!0),c.preventDefault(),!1}function d(c){if(c.buttons&1)return vb(Na),X.I.ea(c.currentTarget.ca,!0),c.preventDefault(),!1}Va=function(c,f){c.ca=f;c.addEventListener("click",b);c.addEventListener("mousedown",a);c.addEventListener("mouseover",d)}})();var Fc,Hc,Gc,Ic;
function Fb(){var b=document.createElement("table"),a=document.createElement("tr");a.innerHTML='<th style="padding-right:0.5em;">Address</th><th style="padding: 0 3.5em">Condition</th><td><button>Clear</button></td>';a.children[2].children[0].addEventListener("click",Qc);b.appendChild(a);a=Object.entries(Eb);for(var d=0,c=a.length;d<c;d++){var f=parseInt(a[d][0],10),g=document.createElement("tr");g.innerHTML='<td><a href="#">'+K(f,8)+'</a></td><td><input type="text" value="'+(a[d][1]?a[d][1][0]:"")+
'"></td>';var q=g.children[0].children[0];q.ca=f;q.addEventListener("click",function(h){vb(Na);X.I.ea(h.target.ca,!0);return!1});q=g.children[1].children[0];a[d][1]&&!a[d][1][1]&&q.classList.add("bp_bad");q.ca=f;f=function(){var h=this;Rc(h.ca,h.value,function(w){w?h.classList.remove("bp_bad"):h.classList.add("bp_bad")})};q.addEventListener("change",f);q.addEventListener("input",f);b.appendChild(g)}for(a=Jc;a.hasChildNodes();)a.removeChild(a.lastChild);a.appendChild(b)}
function Qc(){for(var b in Eb)Eb.hasOwnProperty(b)&&(L(11,b>>>0),delete Eb[b]);Fb();X.aa.clearGutter("d_breakpoints")}function Rc(b,a,d){b>>>=0;if(!Eb.hasOwnProperty(b))throw"Can't set condition for non-existent breakpoint";ka(12,[b,a],function(c){Eb.hasOwnProperty(b)&&(Eb[b]=[a,c]);d(c)})}var Eb={},Jc;function Sc(b){L(14,b)}
function Tc(b){function a(q){vb(Na);X.I.ea(this.ca,!0);q.preventDefault();return!1}for(var d=Uc.children[0],c=0,f=b.length;c<f;c++){var g=b[c];null!==g&&(d.children[3].children[c+1].innerHTML=(g[0]>>>0).toString(16),d.children[5].children[c+1].innerHTML=g[1]>>>0,-1==g[2]?d.children[6].children[c+1].innerHTML=" -- ":(d.children[6].children[c+1].innerHTML='<a href="#">'+K(g[2],8)+'</a> <span class="c-sans">'+g[3]+"</span>",d.children[6].children[c+1].children[0].ca=g[2],d.children[6].children[c+1].children[0].addEventListener("click",
a)),d.children[7].children[c+1].innerHTML=g[4]>>>0,-1==g[5]?d.children[8].children[c+1].innerHTML=" -- ":(d.children[8].children[c+1].innerHTML='<a href="#">'+K(g[5],8)+'</a>&nbsp; <span class="c-sans">'+g[6]+"</span>",d.children[8].children[c+1].children[0].ca=g[5],d.children[8].children[c+1].children[0].addEventListener("click",a)))}}
function Vc(b){var a=Uc.children[0],d=[];d[0]=b;d[1]=parseInt(a.children[1].children[b+1].children[0].value,16)>>>0;a.children[1].children[b+1].children[0].value=d[1].toString(16);d[2]=parseInt(a.children[2].children[b+1].children[0].value,16)>>>0;a.children[2].children[b+1].children[0].value=d[2].toString(16);d[3]=a.children[4].children[b+1].children[0].children[0].checked?1:0;d[4]=a.children[4].children[b+1].children[1].children[0].checked?1:0;L(13,d)}
function Kc(){for(var b=document.getElementById("mem_watch_box");b.hasChildNodes();)b.removeChild(b.lastChild);var a=document.createElement("table");Uc=a;a.innerHTML="<tbody><tr><th></th></tr><tr><th>Start addr</th></tr><tr><th>End addr</th></tr><tr><th>Size</th></tr><tr><th>Pause on</th></tr><tr><th>Reads</th></tr><tr><th>Last read</th></tr><tr><th>Writes</th></tr><tr><th>Last write</th></tr><tr><th>Counters</th></tr></tbody>";for(var d=0;4>d;d++){var c=d,f=Uc.children[0],g=document.createElement("th");
g.innerHTML=c;g.style.textAlign="center";f.children[0].appendChild(g);g=document.createElement("td");g.innerHTML='<input type="text" maxlength="9" size="9">';g.addEventListener("change",Vc.bind(null,c));g.children[0].tabIndex=c+1;f.children[1].appendChild(g);g=document.createElement("td");g.innerHTML='<input type="text" maxlength="9" size="9">';g.addEventListener("change",Vc.bind(null,c));g.children[0].tabIndex=c+1;f.children[2].appendChild(g);g=document.createElement("td");g.innerHTML="0";f.children[3].appendChild(g);
g=document.createElement("td");g.innerHTML='<label>R<input type="checkbox"></label> <label>W<input type="checkbox"></label>';g.addEventListener("change",Vc.bind(null,c));g.children[0].children[0].tabIndex=c+1;g.children[1].children[0].tabIndex=c+1;f.children[4].appendChild(g);g=document.createElement("td");g.innerHTML="0";f.children[5].appendChild(g);g=document.createElement("td");g.innerHTML="--";f.children[6].appendChild(g);g=document.createElement("td");g.innerHTML="0";f.children[7].appendChild(g);
g=document.createElement("td");g.innerHTML="--";f.children[8].appendChild(g);g=document.createElement("td");g.innerHTML="<button>Reset</button>";g.children[0].addEventListener("click",Sc.bind(null,c));g.tabIndex=c+1;f.children[9].appendChild(g);Vc(c)}b.appendChild(a);b=a.children[0];$(b.children[1].children[0]).tooltip({hide:!1,show:!1,content:"Start and end specify the address range to watch, in hexadecimal. End must be greater than start. The address range that is watched spans from start (inclusive) to end (exclusive)."});
$(b.children[2].children[0]).tooltip({hide:!1,show:!1,content:"Start and end specify the address range to watch, in hexadecimal. End must be greater than start. The address range that is watched spans from start (inclusive) to end (exclusive)."});$(b.children[3].children[0]).tooltip({hide:!1,show:!1,content:"Size is the size of the region being watched, in bytes, in hexadecimal."});$(b.children[4].children[0]).tooltip({hide:!1,show:!1,content:"R and W control whether the program should be paused when a Read or a Write occurs to the address range being watched."});
$(b.children[5].children[0]).tooltip({hide:!1,show:!1,content:"Reads counts the number of times a read from the watched address range occurred."});$(b.children[7].children[0]).tooltip({hide:!1,show:!1,content:"Writes counts the number of times a write to the watched address range occurred."});$(b.children[6].children[0]).tooltip({hide:!1,show:!1,content:"Last Read records the instruction that most recently read from the watched address range."});$(b.children[8].children[0]).tooltip({hide:!1,show:!1,
content:"Last Write records the instruction that most recently wrote to the watched address range."});$(b.children[9].children[0]).tooltip({hide:!1,show:!1,content:"Resets the Read and Write counters."})}var Uc,mc=null,lc=null,Wc={},Xc=null;function wb(b,a){Xc&&clearTimeout(Xc);if("string"===typeof b)Wc[b]&&xb(!1),Wc[b]=a;else if("object"===typeof b)for(var d in b)b.hasOwnProperty(d)&&(Wc[d]=b[d]);Xc=setTimeout(xb,2E4)}
function xb(b){var a="",d=!1,c;for(c in Wc)Wc.hasOwnProperty(c)&&(a&&(a+="&"),a=a+encodeURIComponent(c)+"="+encodeURIComponent(Wc[c]),delete Wc[c],d=!0);d&&(d=new XMLHttpRequest,d.open("POST","status.php",!b),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(a));Xc&&clearTimeout(Xc);Xc=null}
function Gb(b,a){this.da=null==a?2:a;this.Ma=150;this.S=this.X=0;this.G=[0];this.C=this.Y=0;this.M=null;this.J=b;this.K=null;this.ja=function(c){return void 0===this.G[c]||null===this.G[c]?null:this.G[c]};this.Ia=function(c){c>>>=0;if(this.G[this.X]==c)return this.X;for(var f=this.X,g=this.S;f<g;++f)if(null!==this.G[f]){if(this.G[f]==c)return f;if(null===this.G[f+1]||f+1>=g)break;if(0<=(c-this.G[f]|0)&&0>(c-this.G[f+1]|0))return f}return null};this.Ba=function(c,f,g,q){this.Da(g,function(){console.log("Unimplemented: AddressScroll load lines "+
c+" to "+f+" addr = "+K(q)+" which = "+g);var h=[];if(0==g)for(var w=c,v=q;w<=f;++w,v=v+(1<<this.da)>>>0)h[w-c]=v;else for(w=f,v=q;w>=c;--w,v=v-(1<<this.da)>>>0)h[w-c]=v;this.Xa(g,h)}.bind(this))};this.ea=function(c,f){var g=c;if(this.Y)this.M=[g,f];else{this.ra(null);if("string"===typeof c){if(this.D&&(this.D.value=c),c=uc(c),null===c)return this.D&&(this.D.value=""),null}else"number"===typeof c?this.D&&(this.D.value=K(c,8)):this.D&&(this.D.value="");var q=this.Ia(c);if(5<q&&q<this.J.lastLine()-
4)0<this.J.getScrollInfo().clientHeight&&this.J.scrollIntoView({line:q,ch:0},128);else{var h=this.J;this.J.eachLine(function(Q){h.removeLineClass(Q,"wrap","jta")});q=this.J.getViewport();var w=c&~((1<<this.da)-1),v=this.J.getOption("viewportMargin");this.S=this.X=v=Math.min(Math.ceil(.8*(q.from+v)+.2*(q.to-v)),this.G.length-1);this.G[v]=w;this.Z(this.J,q.from,q.to,2)}if(this.Y&&f)this.M=[g,f];else{if(f&&(w=c&~((1<<this.da)-1),f=this.Ia(w),null!==f)){var C=this,I=this.J.removeLineClass(f,"wrap","jta");
"number"===typeof I.Ua&&clearTimeout(I.Ua);this.J.addLineClass(I,"wrap","jta");I.Ua=setTimeout(function(){C.J.removeLineClass(I,"wrap","jta");I.Ua=null},1100);if(c=this.Ga(c)){g=[];for(q=0;q<c.length;q++)g.push({anchor:{line:f,ch:c[q][0]},head:{line:f,ch:c[q][1]}});this.ra(g)}}return 0}}};this.Ga=function(){return null};this.Nb=function(c){var f=this.J.lineAtHeight(this.J.getScrollInfo().top+8,"local"),g=this.ja(f);this.da=Math.max(0,Math.min(7,c));c=g&~((1<<this.da)-1);this.S=this.X=f;this.G[f]=
c;this.refresh();this.Ta()};this.refresh=function(){this.J.refresh();if(!(0>=this.J.getScrollInfo().clientHeight)){this.S=this.X;var c=this.J.getViewport();this.Z(this.J,c.from,c.to,2)}};this.F=[];this.Da=function(c,f){if(2==c){if(this.F[0])throw"Function 0 already queued";this.F[0]=f}else if(1==c){if(this.F[1])throw"Function 1 already queued";this.F[1]=f;this.Y&=-3}else if(0==c){if(this.F[2])throw"Function 2 already queued";this.F[2]=f;this.Y&=-5}1==this.Y&&this.nb()};this.Xa=function(c,f){if(1==
c){c=this.X;for(var g=0,q=f.length;g<q&&void 0!==f[g];++c,++g){this.G[c]=f[g]>>>0;var h=document.createTextNode(K(this.G[c]));this.J.setGutterMarker(c,"m_addr",h)}}else if(0==c)for(c=this.S-1,g=f.length-1;0<=g&&void 0!==f[g];--c,--g)this.G[c]=f[g]>>>0,h=document.createTextNode(K(this.G[c])),this.J.setGutterMarker(c,"m_addr",h);else throw"update_loaded_addresses: Invalid value for 'which'";if(this.G.length!=this.J.doc.lineCount())throw"map and doc length mismatch: "+this.G.length+" vs. "+this.J.doc.lineCount();
};this.sa=null;this.nb=function(){if(1!=this.Y)throw"can't schedule a viewportChanged call when one already running";this.J.operation(function(){for(var f=0;f<this.F.length;f++){if(this.F[f])this.F[f]();this.F[f]=null}this.Ea&&this.Ea(!1)}.bind(this));this.Y&=-2;if(this.M){var c=this.M;this.M=null;this.ea(c[0],c[1])}this.sa&&clearTimeout(this.sa);this.C&1?this.Z(this.J,null,null,0):this.C&2&&(this.sa=setTimeout(this.Z.bind(this,this.J,null,null,1),250))};this.Z=function(c,f,g,q){function h(w){0>=
c.getScrollInfo().clientHeight&&(w=!0);var v,C,I=c.getViewport(),Q=I.from;I=I.to;var D=Q-this.Ma,M=I+this.Ma+1,E=M-D;var O=D;var R=M-c.doc.lineCount();if(w||(Math.abs(O)|0)<this.Ma&&(Math.abs(R)|0)<this.Ma)O=R=0;if(this.S!=this.X&&null===this.G[this.S-1])throw"bottom element is null 1";Q-=O;I-=O;w=this.ja(this.X);D=this.ja(this.S-0);M=this.ja(this.S-1);this.X-=O;0>this.X&&(this.X=0);this.S-=O;this.S>E&&(this.S=E);E=this.X==this.S;Q<this.X&&(this.Y|=2,this.Ba(Q,this.X,1,w));I>this.S&&(this.Y|=4,E?
this.Ba(this.S,I-1,0,D):this.Ba(this.S-1,I-1,0,M));this.X=Q;this.S=I;0==O&&0==R?this.Da(2,function(){}):this.Da(2,function(){var la=c.getScrollInfo();v=c.lineAtHeight(la.top,"local");C=c.heightAtLine(v,"local");if(0>O){c.doc.replaceRange("\n".repeat(-O),{line:0,ch:0});for(var V=0;V<-O;++V)this.G.unshift(null);if(this.G.length!=c.doc.lineCount())throw"map and doc length mismatch: "+this.G.length+" vs. "+c.doc.lineCount();}else if(0<O&&(c.doc.replaceRange("",{line:0,ch:0},{line:O,ch:0}),this.G.splice(0,
O),this.G.length!=c.doc.lineCount()))throw"map and doc length mismatch: "+this.G.length+" vs. "+c.doc.lineCount();V=c.doc.lastLine();if(0<R){c.doc.replaceRange("\n".repeat(R),{line:V});for(V=0;V<R;++V)this.G.push(null);if(this.G.length!=c.doc.lineCount())throw"map and doc length mismatch: "+this.G.length+" vs. "+c.doc.lineCount();}else if(0>R&&(c.doc.replaceRange("",{line:V+R,ch:0},{line:V}),this.G.splice(V+R+1,-R),this.G.length!=c.doc.lineCount()))throw"map and doc length mismatch: "+this.G.length+
" vs. "+c.doc.lineCount();0!=O&&(V=c.heightAtLine(v-O,"local")-C,c.scrollTo(null,la.top+V),this.Ta(),this.Ea&&this.Ea(!1))}.bind(this))}this.Y?q||(this.C|=1):!q||1==q&&this.C&1?(this.C=2,this.Y=1,h.call(this,!0)):(this.C&=-4,this.Y=1,h.call(this,!1))};this.ga=null;this.Ta=function(){this.ga&&this.ga();this.ra(null)};this.Ha=function(c){this.D=c;c.value="";var f=this;c.addEventListener("keypress",function(g){if(void 0===g||13==g.which)$(c).autocomplete("close"),f.ea(c.value,!0),c.selectionStart=0,
c.selectionEnd=c.value.length});$(c).autocomplete({minLength:0,delay:0,source:Ga});$(c).on("autocompleteselect",function(g,q){f.ea(q.item.value,!0);g.target.selectionStart=0;g.target.selectionEnd=g.target.value.length;g.preventDefault()})};this.bb=function(c){c=c.concat(Ga);$(this.D).autocomplete("option","source",c);$(this.D).autocomplete("option","minLength",0)};b.doc.replaceRange(" \n".repeat(200),{line:0,ch:0});for(a=0;200>a;++a)this.G.unshift(null);if(this.G.length!=b.doc.lineCount())throw"map and doc length mismatch: "+
this.G.length+" vs. "+b.doc.lineCount();a=b.doc.lastLine();b.doc.replaceRange("\n ".repeat(200),{line:a});for(a=0;200>a;++a)this.G.push(null);if(this.G.length!=b.doc.lineCount())throw"map and doc length mismatch: "+this.G.length+" vs. "+b.doc.lineCount();this.ra=function(c){c?(this.K=c,b.setSelections(c,0,{scroll:!1})):this.K&&(this.K=null,b.setSelection(b.getCursor(),void 0,{scroll:!1}))};var d=this;b.on("viewportChange",this.Z.bind(this));b.on("beforeSelectionChange",function(c,f){d.K?f.ranges=
d.K:f.ranges[0].head=f.ranges[0].anchor;f.update(f.ranges)})}
function Rb(){function b(){null!=c&&(c=null,a.display.scroller.draggable=g,d.B.parentNode.removeChild(d.B))}var a=Mb,d=this,c=null,f=document.createElement("input"),g=a.display.scroller.draggable;f.type="text";f.className="popup-edit";f.setAttribute("draggable","false");f.addEventListener("mousedown",function(q){if(null!=c)return q.stopPropagation(),!1});f.addEventListener("focus",function(){a.display.scroller.draggable=!1});f.addEventListener("blur",function(){b();a.display.scroller.draggable=g});
f.addEventListener("dragstart",function(q){q.preventDefault()});f.addEventListener("keydown",function(q){13==q.keyCode?(d.D&&d.D(c.line,c.ch,f.value),b()):27==q.keyCode&&b()});this.B=f;this.C=function(q,h){if(0==h.button){h=q.coordsChar({left:h.clientX,top:h.clientY},"window");var w=d.F(h.line,h.ch);if(w){h.ch=w.ch;q.addWidget(h,d.B,!1,"over");q=window.getComputedStyle(d.B);var v=w.width||8;d.B.style.left=parseFloat(d.B.style.left)-(d.B.offsetWidth-parseFloat(q.width))/2+"px";d.B.style.top=parseFloat(d.B.style.top)-
(d.B.offsetHeight-parseFloat(q.height))/2+"px";d.B.style.width=a.defaultCharWidth()*v+2+"px";d.B.maxLength=v;d.B.value=w.s;d.B.select();setTimeout(function(){d.B.focus()},0);c=h}else b()}};a.on("mousedown",this.C);this.close=b;this.F=function(q,h){return{s:"fixme",ch:h}};this.D=function(){};return this}var Yc=[],Zc=null,$c=null,ad=null,bd=null,cd=null;
function dd(){null!==$c&&(X.sb($c[0],$c[1],$c[2]),$c=null);if(null!=Zc){for(var b=Zc,a=Gc,d=a.scrollTop+a.clientHeight<a.scrollHeight,c=b.length,f=a.children.length,g=0,q=0;g<c;g+=3,q++){var h=b[g+1],w=b[g+2];if(q<f)var v=a.children[q];else Hc.length?v=Hc.pop():(v=document.createElement("a"),v.href="#",Va(v,0));var C=v,I=b[g],Q=h;if(void 0===C.qa||C.qa!=I){if(void 0!==C.qa&&Ic[I].length){var D=C.childNodes[0];Ic[C.qa].push(D);C.replaceChild(Ic[I].pop(),D)}else if(void 0!==C.qa&&Ic[C.qa].push(C.removeChild(C.childNodes[0])),
Ic[I].length)C.appendChild(Ic[I].pop());else switch(I){case 0:C.innerHTML='<span>00000000<span class="asm_trace_label">&nbsp;</span></span>';break;case 1:C.innerHTML='<span>00000000<span class="asm_trace_label"> <i> &mdash; ret </i></span></span>';break;case 2:C.innerHTML='<span>00000000<span class="asm_trace_label"> <i> &mdash; eret </i></span></span>'}C.qa=I}C=C.childNodes[0].childNodes;C[0].textContent=K(Q,8);C[1].childNodes[0].textContent=w;v.ca=h;q>=f&&a.appendChild(v)}for(b=c/3;a.children.length>
q;)c=a.lastChild,c.classList.remove("asm_callstack_top"),Hc.push(c),a.removeChild(a.lastChild);f<b&&0<f&&a.children[f-1].classList.remove("asm_callstack_top");f!=b&&0<b&&a.children[b-1].classList.add("asm_callstack_top");if(d||b>f)a.scrollTop=a.scrollHeight;Zc=null}null!=ad&&(a=ad,a!==Pc&&(Pc=a,0!=a?(Nc.classList.add("runstate_running"),Oc.textContent="Running"):(Nc.classList.remove("runstate_running"),Oc.textContent="Stopped")),ad=null);if(null!=bd){a=bd;d=W.length;for(f=0;f<d;f++)for(q=W[f].length,
b=0;b<q;++b)if(c=W[f][b][0],g=W[f][b][1]<<1,h=W[f][b][2],v=$b[c].children[1].children[0],v.classList.remove("reg-changed"),!v.Ja){switch(h&15){case 0:v.value=Ob(a[g],2);a[g+1]&&v.classList.add("reg-changed");break;case 1:v.value=Ob(a[g],2,6);a[g+1]&&v.classList.add("reg-changed");break;case 2:v.value=Ob({pa:a[g],oa:a[g+2]},3,6);(a[g+1]||a[g+3])&&v.classList.add("reg-changed");break;default:throw"Register update: Unknown type "+(h&15);}W[f][b][3]&&($b[c].children[1].children[1].innerHTML=W[f][b][3](a[g]))}dc.length=
a.length;for(d=0;d<a.length;d++)dc[d]=a[d];bd=null}null!=cd&&(a=cd,d=Ec,d[0].textContent=a[0]>>>0,d[1].textContent=a[1]>>>0,d[2].textContent=a[2]>>>0,d[3].textContent=a[3]>>>0,d[4].textContent=a[4]>>>0,d[5].textContent=a[3]?(a[0]/a[3]*.001).toPrecision(4):"-",cd=null);a=0;for(d=Yc.length;a<d;a++)J.Jb(Yc[a][0],Yc[a][1]);Yc.length=0;window.requestAnimationFrame(dd)}dd(0);
function ed(b){var a=b.data.msg;b=b.data.data;switch(a){case 0:aa.loaded(2);break;case 1:U(b);break;case 18:U(b,"stdout");break;case 3:if(0==Mc.length)throw"Incoming reply but sendmsg_callbacks is empty";Mc.shift()(b);break;case 4:lb.Qb(b);break;case 5:bd=b;break;case 7:ad=b;break;case 6:$c=b;break;case 8:cd=b;break;case 9:a=Fc;a.innerHTML="";for(var d=b.length,c=0;c<d;c++){var f=b[c],g=document.createElement("a");switch(f[0]){case 0:var q='<span class="asm_trace_label"><b>Trap at </b></span>'+K(f[1],
8);break;case 1:q='<span class="asm_trace_label"><b>Exception before </b></span>'+K(f[1],8);break;case 2:q=K(f[1],8);break;case 3:q='<span class="asm_trace_label">... '+f[1]+" more unknown function calls</span>";break;default:throw"callstack data parse error";}if(3!=f[0]){switch(f[2]){case 0:q=q+' (<span class="asm_trace_label">in ISR due to ipending=</span><small>'+K(f[3],8)+"</small>)";break;case 1:q+=' (<span class="asm_trace_label">in ISR due to trap</span>)';break;case 2:q+=' <span class="asm_trace_label"> &mdash;</span>';
break;case 3:q=q+' (<span class="asm_trace_label"><b>'+f[3]+"</b> </span><small>"+K(f[4],8)+"</small>)";break;default:throw"callstack data parse error";}Va(g,f[1])}g.innerHTML="<span>"+q+"</span>";g.href="#";g.className="asm_trace";0==c&&(g.className+=" asm_callstack_top");a.appendChild(g)}break;case 10:Zc=b;break;case 12:Tc(b);break;case 13:Z.refresh(b);break;case 14:Yc.push(b);break;case 15:J.ya[b[0]].gb(b[1],b[2]);break;case 16:wb(b[0],b[1]);break;case 17:break;default:throw"UI thread received unknown message type: "+
a;}}
(function(){aa.ub=function(){J.W();Cc();jc();L(9);U("CPUlator has started with system <b>"+J.ta[Ba].name+"</b> containing a <b>"+Da+"</b> processor.");var a=Math.round(performance.now());console.log("CPUlator startup complete: "+a+" ms");var d=Da;3==P.arch&&(d="MIPS");document.title="CPUlator "+d+" System Simulator";wb("startupTime",a);wb("system",Ba);wb("userAgent",navigator.userAgent);wb("rev",P.rev)};document.addEventListener("DOMContentLoaded",function(){aa.loaded(1);mc=document.getElementById("messages_window");var a=
document.createElement("div");lc=a;mc.appendChild(a);L(0,P)});ea=new Worker("thread.min.js?v="+P.rev);ea.onmessage=ed;var b=null;P.queries.sys&&(b=J.ta[P.queries.sys]);b||(console.log("No selected system or system doesn't exist. Choosing '"+J.ba[0][0]+"'"),b=J.ba[0][1],P.queries.sys=J.ba[0][0]);P.arch=b.H;Ca()})();
